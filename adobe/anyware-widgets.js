/**
 * AnywareComponents - 2.50.0-jenkins-AWC_AnywareComponents_release-155 (2015-12-16)
 * Collection of resusable Adobe Anyware Widgets
 * Copyright (c) 2015 Adobe Systems Inc
 */

/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*!
 * CanJS - 2.2.7
 * http://canjs.com/
 * Copyright (c) 2015 Bitovi
 * Fri, 24 Jul 2015 20:57:32 GMT
 * Licensed MIT
 */

/*
 * jQuery JSONP Core Plugin 2.4.0 (2012-08-21)
 *
 * https://github.com/jaubourg/jquery-jsonp
 *
 * Copyright (c) 2012 Julian Aubourg
 *
 * This document is licensed as free software under the terms of the
 * MIT License: http://www.opensource.org/licenses/mit-license.php
 */

/**
 * @license RequireJS text 2.0.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*******************************************************************************
 * OpenAjax-mashup.js
 *
 * Reference implementation of the OpenAjax Hub, as specified by OpenAjax Alliance.
 * Specification is under development at:
 *
 *   http://www.openajax.org/member/wiki/OpenAjax_Hub_Specification
 *
 * Copyright 2006-2009 OpenAjax Alliance
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at http://www.apache.org/licenses/LICENSE-2.0 . Unless
 * required by applicable law or agreed to in writing, software distributed
 * under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations under the License.
 *
 ******************************************************************************/

/*

        Copyright 2006-2009 OpenAjax Alliance

        Licensed under the Apache License, Version 2.0 (the "License");
        you may not use this file except in compliance with the License.
        You may obtain a copy of the License at

                http://www.apache.org/licenses/LICENSE-2.0

        Unless required by applicable law or agreed to in writing, software
        distributed under the License is distributed on an "AS IS" BASIS,
        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
        See the License for the specific language governing permissions and
        limitations under the License.
*/

/*

        Copyright 2006-2009 OpenAjax Alliance

        Licensed under the Apache License, Version 2.0 (the "License");
        you may not use this file except in compliance with the License.
        You may obtain a copy of the License at

                http://www.apache.org/licenses/LICENSE-2.0

        Unless required by applicable law or agreed to in writing, software
        distributed under the License is distributed on an "AS IS" BASIS,
        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
        See the License for the specific language governing permissions and
        limitations under the License.
*/

/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */

/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements. See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership. The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations under the License.
 */

/*
 * Copyright (c) 2010 - The OWASP Foundation
 *
 * The jquery-encoder is published by OWASP under the MIT license. You should read and accept the
 * LICENSE before you use, modify, and/or redistribute this software.
 */

!function(){var requirejs,require,define;!function(e){function t(e,t){return v.call(e,t)}function n(e,t){var n,r,i,o,a,s,u,c,l,d,p,f=t&&t.split("/"),h=g.map,m=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(f=f.slice(0,f.length-1),e=e.split("/"),a=e.length-1,g.nodeIdCompat&&y.test(e[a])&&(e[a]=e[a].replace(y,"")),e=f.concat(e),l=0;l<e.length;l+=1)if(p=e[l],"."===p)e.splice(l,1),l-=1;else if(".."===p){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||m)&&h){for(n=e.split("/"),l=n.length;l>0;l-=1){if(r=n.slice(0,l).join("/"),f)for(d=f.length;d>0;d-=1)if(i=h[f.slice(0,d).join("/")],i&&(i=i[r])){o=i,s=l;break}if(o)break;!u&&m&&m[r]&&(u=m[r],c=l)}!o&&u&&(o=u,s=c),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function r(t,n){return function(){return l.apply(e,b.call(arguments,0).concat([t,n]))}}function i(e){return function(t){return n(t,e)}}function o(e){return function(t){f[e]=t}}function a(n){if(t(h,n)){var r=h[n];delete h[n],m[n]=!0,c.apply(e,r)}if(!t(f,n)&&!t(m,n))throw new Error("No "+n);return f[n]}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function u(e){return function(){return g&&g.config&&g.config[e]||{}}}var c,l,d,p,f={},h={},g={},m={},v=Object.prototype.hasOwnProperty,b=[].slice,y=/\.js$/;d=function(e,t){var r,o=s(e),u=o[0];return e=o[1],u&&(u=n(u,t),r=a(u)),u?e=r&&r.normalize?r.normalize(e,i(t)):n(e,t):(e=n(e,t),o=s(e),u=o[0],e=o[1],u&&(r=a(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:r}},p={require:function(e){return r(e)},exports:function(e){var t=f[e];return"undefined"!=typeof t?t:f[e]={}},module:function(e){return{id:e,uri:"",exports:f[e],config:u(e)}}},c=function(n,i,s,u){var c,l,g,v,b,y,_=[],w=typeof s;if(u=u||n,"undefined"===w||"function"===w){for(i=!i.length&&s.length?["require","exports","module"]:i,b=0;b<i.length;b+=1)if(v=d(i[b],u),l=v.f,"require"===l)_[b]=p.require(n);else if("exports"===l)_[b]=p.exports(n),y=!0;else if("module"===l)c=_[b]=p.module(n);else if(t(f,l)||t(h,l)||t(m,l))_[b]=a(l);else{if(!v.p)throw new Error(n+" missing "+l);v.p.load(v.n,r(u,!0),o(l),{}),_[b]=f[l]}g=s?s.apply(f[n],_):void 0,n&&(c&&c.exports!==e&&c.exports!==f[n]?f[n]=c.exports:g===e&&y||(f[n]=g))}else n&&(f[n]=s)},requirejs=require=l=function(t,n,r,i,o){if("string"==typeof t)return p[t]?p[t](n):a(d(t,n).f);if(!t.splice){if(g=t,g.deps&&l(g.deps,g.callback),!n)return;n.splice?(t=n,n=r,r=null):t=e}return n=n||function(){},"function"==typeof r&&(r=i,i=o),i?c(e,t,n,r):setTimeout(function(){c(e,t,n,r)},4),l},l.config=function(e){return l(e)},requirejs._defined=f,define=function(e,n,r){n.splice||(r=n,n=[]),t(f,e)||t(h,e)||(h[e]=[e,n,r])},define.amd={jQuery:!0}}(),define("lib/almond/almond",function(){}),define("jquery",[],function(){return window.$}),define("can/util/can",[],function(){var e="undefined"!=typeof window?window:global,t={};("undefined"==typeof GLOBALCAN||GLOBALCAN!==!1)&&(e.can=t),t.global=e,t.k=function(){},t.isDeferred=t.isPromise=function(e){return e&&"function"==typeof e.then&&"function"==typeof e.pipe},t.isMapLike=function(e){return t.Map&&(e instanceof t.Map||e&&e.__get)};var n=0;t.cid=function(e,t){return e._cid||(n++,e._cid=(t||"")+n),e._cid},t.VERSION="2.2.7",t.simpleExtend=function(e,t){for(var n in t)e[n]=t[n];return e},t.last=function(e){return e&&e[e.length-1]};var r=Function.prototype.bind;return r?t.proxy=function(e,t){return r.call(e,t)}:t.proxy=function(e,t){return function(){return e.apply(t,arguments)}},t.frag=function(e){var n;return e&&"string"!=typeof e?11===e.nodeType?e:"number"==typeof e.nodeType?(n=document.createDocumentFragment(),n.appendChild(e),n):"number"==typeof e.length?(n=document.createDocumentFragment(),t.each(e,function(e){n.appendChild(t.frag(e))}),n):(n=t.buildFragment(""+e,document.body),n.childNodes.length||n.appendChild(document.createTextNode("")),n):(n=t.buildFragment(null==e?"":""+e,document.body),n.childNodes.length||n.appendChild(document.createTextNode("")),n)},t.scope=t.viewModel=function(e,n,r){e=t.$(e);var i=t.data(e,"scope")||t.data(e,"viewModel");switch(i||(i=new t.Map,t.data(e,"scope",i),t.data(e,"viewModel",i)),arguments.length){case 0:case 1:return i;case 2:return i.attr(n);default:return i.attr(n,r),e}},t["import"]=function(e){var n=new t.Deferred;return"object"==typeof window.System&&t.isFunction(window.System["import"])?window.System["import"](e).then(t.proxy(n.resolve,n),t.proxy(n.reject,n)):window.define&&window.define.amd?window.require([e],function(e){n.resolve(e)}):window.steal?steal.steal(e,function(e){n.resolve(e)}):window.require?n.resolve(window.require(e)):n.resolve(),n.promise()},t.__observe=function(){},t}),define("can/util/attr",["can/util/can"],function(e){var t=e.global.setImmediate||function(e){return setTimeout(e,0)},n={MutationObserver:e.global.MutationObserver||e.global.WebKitMutationObserver||e.global.MozMutationObserver,map:{"class":"className",value:"value",innertext:"innerText",textcontent:"textContent",checked:!0,disabled:!0,readonly:!0,required:!0,src:function(e,t){return null==t||""===t?(e.removeAttribute("src"),null):(e.setAttribute("src",t),t)},style:function(e,t){return e.style.cssText=t||""}},defaultValue:["input","textarea"],set:function(t,r,i){r=r.toLowerCase();var o;n.MutationObserver||(o=n.get(t,r));var a,s=t.nodeName.toString().toLowerCase(),u=n.map[r];"function"==typeof u?a=u(t,i):u===!0?(a=t[r]=!0,"checked"===r&&"radio"===t.type&&e.inArray(s,n.defaultValue)>=0&&(t.defaultChecked=!0)):u?(a=i,t[u]!==i&&(t[u]=i),"value"===u&&e.inArray(s,n.defaultValue)>=0&&(t.defaultValue=i)):(t.setAttribute(r,i),a=i),n.MutationObserver||a===o||n.trigger(t,r,o)},trigger:function(n,r,i){return e.data(e.$(n),"canHasAttributesBindings")?(r=r.toLowerCase(),t(function(){e.trigger(n,{type:"attributes",attributeName:r,target:n,oldValue:i,bubbles:!1},[])})):void 0},get:function(e,t){t=t.toLowerCase();var r=n.map[t];return"string"==typeof r&&e[r]?e[r]:e.getAttribute(t)},remove:function(e,t){t=t.toLowerCase();var r;n.MutationObserver||(r=n.get(e,t));var i=n.map[t];"function"==typeof i&&i(e,void 0),i===!0?e[t]=!1:"string"==typeof i?e[i]="":e.removeAttribute(t),n.MutationObserver||null==r||n.trigger(e,t,r)},has:function(){var t=e.global.document&&document.createElement("div");return t&&t.hasAttribute?function(e,t){return e.hasAttribute(t)}:function(e,t){return null!==e.getAttribute(t)}}()};return n}),define("can/event",["can/util/can"],function(e){return e.addEvent=function(e,t){var n=this.__bindEvents||(this.__bindEvents={}),r=n[e]||(n[e]=[]);return r.push({handler:t,name:e}),this},e.listenTo=function(t,n,r){var i=this.__listenToEvents;i||(i=this.__listenToEvents={});var o=e.cid(t),a=i[o];a||(a=i[o]={obj:t,events:{}});var s=a.events[n];s||(s=a.events[n]=[]),s.push(r),e.bind.call(t,n,r)},e.stopListening=function(t,n,r){var i=this.__listenToEvents,o=i,a=0;if(!i)return this;if(t){var s=e.cid(t);if((o={})[s]=i[s],!i[s])return this}for(var u in o){var c,l=o[u];t=i[u].obj,n?(c={})[n]=l.events[n]:c=l.events;for(var d in c){var p=c[d]||[];for(a=0;a<p.length;)r&&r===p[a]||!r?(e.unbind.call(t,d,p[a]),p.splice(a,1)):a++;p.length||delete l.events[d]}e.isEmptyObject(l.events)&&delete i[u]}return this},e.removeEvent=function(e,t,n){if(!this.__bindEvents)return this;for(var r,i=this.__bindEvents[e]||[],o=0,a="function"==typeof t;o<i.length;)r=i[o],(n?n(r,e,t):a&&r.handler===t||!a&&(r.cid===t||!t))?i.splice(o,1):o++;return this},e.dispatch=function(e,t){var n=this.__bindEvents;if(n){"string"==typeof e&&(e={type:e});var r=e.type,i=(n[r]||[]).slice(0),o=[e];t&&o.push.apply(o,t);for(var a=0,s=i.length;s>a;a++)i[a].handler.apply(this,o);return e}},e.one=function(t,n){var r=function(){return e.unbind.call(this,t,r),n.apply(this,arguments)};return e.bind.call(this,t,r),this},e.event={on:function(){return 0===arguments.length&&e.Control&&this instanceof e.Control?e.Control.prototype.on.call(this):e.addEvent.apply(this,arguments)},off:function(){return 0===arguments.length&&e.Control&&this instanceof e.Control?e.Control.prototype.off.call(this):e.removeEvent.apply(this,arguments)},bind:e.addEvent,unbind:e.removeEvent,delegate:function(t,n,r){return e.addEvent.call(this,n,r)},undelegate:function(t,n,r){return e.removeEvent.call(this,n,r)},trigger:e.dispatch,one:e.one,addEvent:e.addEvent,removeEvent:e.removeEvent,listenTo:e.listenTo,stopListening:e.stopListening,dispatch:e.dispatch},e.event}),define("can/util/each",["can/util/can"],function(e){var t=function(e){var t="length"in e&&e.length;return"function"!=typeof arr&&(0===t||"number"==typeof t&&t>0&&t-1 in e)};return e.each=function(n,r,i){var o,a,s,u=0;if(n)if(t(n))if(e.List&&n instanceof e.List)for(a=n.attr("length");a>u&&(s=n.attr(u),r.call(i||s,s,u,n)!==!1);u++);else for(a=n.length;a>u&&(s=n[u],r.call(i||s,s,u,n)!==!1);u++);else if("object"==typeof n)if(e.Map&&n instanceof e.Map||n===e.route){var c=e.Map.keys(n);for(u=0,a=c.length;a>u&&(o=c[u],s=n.attr(o),r.call(i||s,s,o,n)!==!1);u++);}else for(o in n)if(n.hasOwnProperty(o)&&r.call(i||n[o],n[o],o,n)===!1)break;return n},e}),define("can/util/inserted",["can/util/can"],function(e){e.inserted=function(t){t=e.makeArray(t);for(var n,r,i=!1,o=e.$(document.contains?document:document.body),a=0;void 0!==(r=t[a]);a++){if(!i){if(!r.getElementsByTagName)continue;if(!e.has(o,r).length)return;i=!0}if(i&&r.getElementsByTagName){n=e.makeArray(r.getElementsByTagName("*")),e.trigger(r,"inserted",[],!1);for(var s,u=0;void 0!==(s=n[u]);u++)e.trigger(s,"inserted",[],!1)}}},e.appendChild=function(t,n){var r;r=11===n.nodeType?e.makeArray(n.childNodes):[n],t.appendChild(n),e.inserted(r)},e.insertBefore=function(t,n,r){var i;i=11===n.nodeType?e.makeArray(n.childNodes):[n],t.insertBefore(n,r),e.inserted(i)}}),define("can/util/jquery",["jquery","can/util/can","can/util/attr","can/event","can/util/each","can/util/inserted"],function(e,t,n,r){var i=function(e){return e.nodeName&&(1===e.nodeType||9===e.nodeType)||e==window};e=e||window.jQuery,e.extend(t,e,{trigger:function(n,r,o,a){i(n)?e.event.trigger(r,o,n,!a):n.trigger?n.trigger(r,o):("string"==typeof r&&(r={type:r}),r.target=r.target||n,o&&(o.length&&"string"==typeof o?o=[o]:o.length||(o=[o])),o||(o=[]),t.dispatch.call(n,r,o))},event:t.event,addEvent:t.addEvent,removeEvent:t.removeEvent,buildFragment:function(t,n){var r;return t=[t],n=n||document,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,r=e.buildFragment(t,n),r.cacheable?e.clone(r.fragment):r.fragment||r},$:e,each:t.each,bind:function(n,r){return this.bind&&this.bind!==t.bind?this.bind(n,r):i(this)?e.event.add(this,n,r):t.addEvent.call(this,n,r),this},unbind:function(n,r){return this.unbind&&this.unbind!==t.unbind?this.unbind(n,r):i(this)?e.event.remove(this,n,r):t.removeEvent.call(this,n,r),this},delegate:function(n,r,o){return this.delegate?this.delegate(n,r,o):i(this)?e(this).delegate(n,r,o):t.bind.call(this,r,o),this},undelegate:function(n,r,o){return this.undelegate?this.undelegate(n,r,o):i(this)?e(this).undelegate(n,r,o):t.unbind.call(this,r,o),this},proxy:t.proxy,attr:n}),t.on=t.bind,t.off=t.unbind,e.each(["append","filter","addClass","remove","data","get","has"],function(e,n){t[n]=function(e){return e[n].apply(e,t.makeArray(arguments).slice(1))}});var o=e.cleanData;e.cleanData=function(n){e.each(n,function(e,n){n&&t.trigger(n,"removed",[],!1)}),o(n)};var a,s=e.fn.domManip;if(e.fn.domManip=function(e,t,n){for(var r=1;r<arguments.length;r++)if("function"==typeof arguments[r]){a=r;break}return s.apply(this,arguments)},e(document.createElement("div")).append(document.createElement("div")),e.fn.domManip=2===a?function(e,n,r){return s.call(this,e,n,function(e){var n;11===e.nodeType&&(n=t.makeArray(e.childNodes));var i=r.apply(this,arguments);return t.inserted(n?n:[e]),i})}:function(e,n){return s.call(this,e,function(e){var r;11===e.nodeType&&(r=t.makeArray(e.childNodes));var i=n.apply(this,arguments);return t.inserted(r?r:[e]),i})},t.attr.MutationObserver)e.event.special.attributes={setup:function(){var e=this,n=new t.attr.MutationObserver(function(n){n.forEach(function(n){var r=t.simpleExtend({},n);t.trigger(e,r,[])})});n.observe(this,{attributes:!0,attributeOldValue:!0}),t.data(t.$(this),"canAttributesObserver",n)},teardown:function(){t.data(t.$(this),"canAttributesObserver").disconnect(),e.removeData(this,"canAttributesObserver")}};else{var u=e.attr;e.attr=function(e,n){var r,i;arguments.length>=3&&(r=u.call(this,e,n));var o=u.apply(this,arguments);return arguments.length>=3&&(i=u.call(this,e,n)),i!==r&&t.attr.trigger(e,n,r),o};var c=e.removeAttr;e.removeAttr=function(e,n){var r=u.call(this,e,n),i=c.apply(this,arguments);return null!=r&&t.attr.trigger(e,n,r),i},e.event.special.attributes={setup:function(){t.data(t.$(this),"canHasAttributesBindings",!0)},teardown:function(){e.removeData(this,"canHasAttributesBindings")}}}return function(){var e="<-\n>",n=t.buildFragment(e,document);if(e!==n.childNodes[0].nodeValue){var r=t.buildFragment;t.buildFragment=function(e,t){var n=r(e,t);return 1===n.childNodes.length&&3===n.childNodes[0].nodeType&&(n.childNodes[0].nodeValue=e),n}}}(),e.event.special.inserted={},e.event.special.removed={},t}),define("can/util/library",["can/util/jquery"],function(e){return e}),define("can/util/string",["can/util/library"],function(e){var t=/_|-/,n=/\=\=/,r=/([A-Z]+)([A-Z][a-z])/g,i=/([a-z\d])([A-Z])/g,o=/([a-z\d])([A-Z])/g,a=/\{([^\}]+)\}/g,s=/"/g,u=/'/g,c=/-+(.)?/g,l=/[a-z][A-Z]/g,d=function(e,t,n){var r=e[t];return void 0===r&&n===!0&&(r=e[t]={}),r},p=function(e){return/^f|^o/.test(typeof e)},f=function(e){var t=null===e||void 0===e||isNaN(e)&&""+e=="NaN";return""+(t?"":e)};return e.extend(e,{esc:function(e){return f(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(s,"&#34;").replace(u,"&#39;")},getObject:function(t,n,r){var i,o,a,s,u=t?t.split("."):[],c=u.length,l=0;if(n=e.isArray(n)?n:[n||window],s=n.length,!c)return n[0];for(l;s>l;l++){for(i=n[l],a=void 0,o=0;c>o&&p(i);o++)a=i,i=d(a,u[o]);if(void 0!==a&&void 0!==i)break}if(r===!1&&void 0!==i&&delete a[u[o-1]],r===!0&&void 0===i)for(i=n[0],o=0;c>o&&p(i);o++)i=d(i,u[o],!0);return i},capitalize:function(e,t){return e.charAt(0).toUpperCase()+e.slice(1)},camelize:function(e){return f(e).replace(c,function(e,t){return t?t.toUpperCase():""})},hyphenate:function(e){return f(e).replace(l,function(e,t){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})},underscore:function(e){return e.replace(n,"/").replace(r,"$1_$2").replace(i,"$1_$2").replace(o,"_").toLowerCase()},sub:function(t,n,r){var i=[];return t=t||"",i.push(t.replace(a,function(t,o){var a=e.getObject(o,n,r===!0?!1:void 0);return void 0===a||null===a?(i=null,""):p(a)&&i?(i.push(a),""):""+a})),null===i?i:i.length<=1?i[0]:i},replacer:a,undHash:t}),e}),define("can/construct",["can/util/string"],function(e){var t,n=0;try{Object.getOwnPropertyDescriptor({}),t=!0}catch(r){t=!1}var i=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return n&&(n.get||n.set)?n:null},o=function(t,n,r){r=r||t;var o;for(var a in t)(o=i(t,a))?this._defineProperty(r,n,a,o):e.Construct._overwrite(r,n,a,t[a])},a=function(t,n,r){r=r||t;for(var i in t)e.Construct._overwrite(r,n,i,t[i])};return e.Construct=function(){return arguments.length?e.Construct.extend.apply(e.Construct,arguments):void 0},e.extend(e.Construct,{constructorExtends:!0,newInstance:function(){var e,t=this.instance();return t.setup&&(e=t.setup.apply(t,arguments)),t.init&&t.init.apply(t,e||arguments),t},_inherit:t?o:a,_defineProperty:function(e,t,n,r){Object.defineProperty(e,n,r)},_overwrite:function(e,t,n,r){e[n]=r},setup:function(t,n){this.defaults=e.extend(!0,{},t.defaults,this.defaults)},instance:function(){n=1;var e=new this;return n=0,e},extend:function(t,r,i){function o(){return n?void 0:this.constructor!==c&&arguments.length&&c.constructorExtends?c.extend.apply(c,arguments):c.newInstance.apply(c,arguments)}var a=t,s=r,u=i;"string"!=typeof a&&(u=s,s=a,a=null),u||(u=s,s=null),u=u||{};var c,l,d,p,f,h,g,m,v,b=this,y=this.prototype;v=this.instance(),e.Construct._inherit(u,y,v),a&&(l=a.split("."),g=l.pop()),"undefined"==typeof constructorName&&(c=function(){return o.apply(this,arguments)});for(h in b)b.hasOwnProperty(h)&&(c[h]=b[h]);e.Construct._inherit(s,b,c),a&&(d=e.getObject(l.join("."),window,!0),m=d,p=e.underscore(a.replace(/\./g,"_")),f=e.underscore(g),d[g]=c),e.extend(c,{constructor:c,prototype:v,namespace:m,_shortName:f,fullName:a,_fullName:p}),void 0!==g&&(c.shortName=g),c.prototype.constructor=c;var _=[b].concat(e.makeArray(arguments)),w=c.setup.apply(c,_);return c.init&&c.init.apply(c,w||_),c}}),e.Construct.prototype.setup=function(){},e.Construct.prototype.init=function(){},e.Construct}),define("can/control",["can/util/library","can/construct"],function(e){var t,n=function(t,n,r){return e.bind.call(t,n,r),function(){e.unbind.call(t,n,r)}},r=e.isFunction,i=e.extend,o=e.each,a=[].slice,s=/\{([^\}]+)\}/g,u=e.getObject("$.event.special",[e])||{},c=function(t,n,r,i){return e.delegate.call(t,n,r,i),function(){e.undelegate.call(t,n,r,i)}},l=function(t,r,i,o){return o?c(t,e.trim(o),r,i):n(t,r,i)},d=e.Control=e.Construct({setup:function(){if(e.Construct.setup.apply(this,arguments),e.Control){var t,n=this;n.actions={};for(t in n.prototype)n._isAction(t)&&(n.actions[t]=n._action(t))}},_shifter:function(t,n){var i="string"==typeof n?t[n]:n;return r(i)||(i=t[i]),function(){return t.called=n,i.apply(t,[this.nodeName?e.$(this):this].concat(a.call(arguments,0)))}},_isAction:function(e){var t=this.prototype[e],n=typeof t;return"constructor"!==e&&("function"===n||"string"===n&&r(this.prototype[t]))&&!!(u[e]||p[e]||/[^\w]/.test(e))},_action:function(n,r){if(s.lastIndex=0,r||!s.test(n)){var i=r?e.sub(n,this._lookup(r)):n;if(!i)return null;var o=e.isArray(i),a=o?i[1]:i,u=a.split(/\s+/g),c=u.pop();return{processor:p[c]||t,parts:[a,u.join(" "),c],delegate:o?i[0]:void 0}}},_lookup:function(e){return[e,window]},processors:{},defaults:{}},{setup:function(t,n){var r,o=this.constructor,a=o.pluginName||o._fullName;return this.element=e.$(t),a&&"can_control"!==a&&this.element.addClass(a),r=e.data(this.element,"controls"),r||(r=[],e.data(this.element,"controls",r)),r.push(this),this.options=i({},o.defaults,n),this.on(),[this.element,this.options]},on:function(t,n,r,i){if(!t){this.off();var o,a,s=this.constructor,u=this._bindings,c=s.actions,d=this.element,p=e.Control._shifter(this,"destroy");for(o in c)c.hasOwnProperty(o)&&(a=c[o]||s._action(o,this.options,this),a&&(u.control[o]=a.processor(a.delegate||d,a.parts[2],a.parts[1],o,this)));return e.bind.call(d,"removed",p),u.user.push(function(t){e.unbind.call(t,"removed",p)}),u.user.length}return"string"==typeof t&&(i=r,r=n,n=t,t=this.element),void 0===i&&(i=r,r=n,n=null),"string"==typeof i&&(i=e.Control._shifter(this,i)),this._bindings.user.push(l(t,r,i,n)),this._bindings.user.length},off:function(){var e=this.element[0],t=this._bindings;t&&(o(t.user||[],function(t){t(e)}),o(t.control||{},function(t){t(e)})),this._bindings={user:[],control:{}}},destroy:function(){if(null!==this.element){var t,n=this.constructor,r=n.pluginName||n._fullName;this.off(),r&&"can_control"!==r&&this.element.removeClass(r),t=e.data(this.element,"controls"),t.splice(e.inArray(this,t),1),e.trigger(this,"destroyed"),this.element=null}}}),p=e.Control.processors;return t=function(t,n,r,i,o){return l(t,n,e.Control._shifter(o,i),r)},o(["change","click","contextmenu","dblclick","keydown","keyup","keypress","mousedown","mousemove","mouseout","mouseover","mouseup","reset","resize","scroll","select","submit","focusin","focusout","mouseenter","mouseleave","touchstart","touchmove","touchcancel","touchend","touchleave","inserted","removed"],function(e){p[e]=t}),d}),define("can/control/route",["can/control"],function(){}),define("can/util/bind",["can/util/library"],function(e){return e.bindAndSetup=function(){return e.addEvent.apply(this,arguments),this._init||(this._bindings?this._bindings++:(this._bindings=1,this._bindsetup&&this._bindsetup())),this},e.unbindAndTeardown=function(t,n){var r=this.__bindEvents[t]||[],i=r.length;return e.removeEvent.apply(this,arguments),null===this._bindings?this._bindings=0:this._bindings=this._bindings-(i-r.length),!this._bindings&&this._bindteardown&&this._bindteardown(),this},e}),define("can/bubble",["can/util/library"],function(e){var t=e.bubble={event:function(e,t){return e.constructor._bubbleRule(t,e)},childrenOf:function(e,n){e._each(function(r,i){r&&r.bind&&t.toParent(r,e,i,n)})},teardownChildrenFrom:function(e,n){e._each(function(r){t.teardownFromParent(e,r,n)})},toParent:function(t,n,r,i){e.listenTo.call(n,t,i,function(){var i=e.makeArray(arguments),o=i.shift();i[0]=(e.List&&n instanceof e.List?n.indexOf(t):r)+(i[0]?"."+i[0]:""),o.triggeredNS=o.triggeredNS||{},o.triggeredNS[n._cid]||(o.triggeredNS[n._cid]=!0,e.trigger(n,o,i))})},teardownFromParent:function(t,n,r){n&&n.unbind&&e.stopListening.call(t,n,r)},isBubbling:function(e,t){return e._bubbleBindings&&e._bubbleBindings[t]},bind:function(e,n){if(!e._init){var r,i=t.event(e,n),o=i.length;e._bubbleBindings||(e._bubbleBindings={});for(var a=0;o>a;a++)r=i[a],e._bubbleBindings[r]?e._bubbleBindings[r]++:(e._bubbleBindings[r]=1,t.childrenOf(e,r))}},unbind:function(n,r){for(var i,o=t.event(n,r),a=o.length,s=0;a>s;s++)i=o[s],n._bubbleBindings&&n._bubbleBindings[i]--,n._bubbleBindings&&!n._bubbleBindings[i]&&(delete n._bubbleBindings[i],t.teardownChildrenFrom(n,i),e.isEmptyObject(n._bubbleBindings)&&delete n._bubbleBindings)},add:function(n,r,i){if(r instanceof e.Map&&n._bubbleBindings)for(var o in n._bubbleBindings)n._bubbleBindings[o]&&(t.teardownFromParent(n,r,o),t.toParent(r,n,i,o))},removeMany:function(e,n){for(var r=0,i=n.length;i>r;r++)t.remove(e,n[r])},remove:function(n,r){if(r instanceof e.Map&&n._bubbleBindings)for(var i in n._bubbleBindings)n._bubbleBindings[i]&&t.teardownFromParent(n,r,i)},set:function(n,r,i,o){return e.Map.helpers.isObservable(i)&&t.add(n,i,r),e.Map.helpers.isObservable(o)&&t.remove(n,o),i}};return t}),define("can/util/batch",["can/util/can"],function(e){var t=1,n=0,r=[],i=[],o=null;e.batch={start:function(e){n++,e&&i.push(e)},stop:function(a,s){if(a?n=0:n--,0===n){if(null!==o)return;o=r.slice(0);var u,c,l=i.slice(0);for(r=[],i=[],e.batch.batchNum=t,t++,s&&e.batch.start(),u=0;u<o.length;u++)e.dispatch.apply(o[u][0],o[u][1]);for(o=null,u=0,c=l.length;u<l.length;u++)l[u]();e.batch.batchNum=void 0}},trigger:function(i,a,s){if(!i._init)if(a="string"==typeof a?{type:a}:a,o)o.push([i,[a,s]]);else{if(0===n)return e.dispatch.call(i,a,s);a.batchNum=t,r.push([i,[a,s]])}},afterPreviousEvents:function(t){if(o){var n={};e.bind.call(n,"ready",t),o.push([n,[{type:"ready"},[]]])}else t()}}}),define("can/map",["can/util/library","can/util/bind","can/bubble","can/construct","can/util/batch"],function(e,t,n){var r=null,i=function(){for(var e in r)r[e].added&&delete r[e].obj._cid;r=null},o=function(e){return r&&r[e._cid]&&r[e._cid].instance},a=null,s=e.Map=e.Construct.extend({setup:function(){if(e.Construct.setup.apply(this,arguments),e.Map){this.defaults||(this.defaults={}),this._computes=[];for(var t in this.prototype)"define"!==t&&"constructor"!==t&&("function"!=typeof this.prototype[t]||this.prototype[t].prototype instanceof e.Construct)?this.defaults[t]=this.prototype[t]:this.prototype[t].isComputed&&this._computes.push(t);this.helpers.define&&this.helpers.define(this)}!e.List||this.prototype instanceof e.List||(this.List=s.List.extend({Map:this},{}))},_bubble:n,_bubbleRule:function(e){return"change"===e||e.indexOf(".")>=0?["change"]:[]},_computes:[],bind:e.bindAndSetup,on:e.bindAndSetup,unbind:e.unbindAndTeardown,off:e.unbindAndTeardown,id:"id",helpers:{define:null,attrParts:function(e,t){return t?[e]:"object"==typeof e?e:(""+e).split(".")},addToMap:function(t,n){var o;r||(o=i,r={});var a=t._cid,s=e.cid(t);return r[s]||(r[s]={obj:t,instance:n,added:!a}),o},isObservable:function(t){return t instanceof e.Map||t&&t===e.route},canMakeObserve:function(t){return t&&!e.isDeferred(t)&&(e.isArray(t)||e.isPlainObject(t))},serialize:function(t,n,r){var i=e.cid(t),o=!1;return a||(o=!0,a={attr:{},serialize:{}}),a[n][i]=r,t.each(function(i,o){var u,c=s.helpers.isObservable(i),l=c&&a[n][e.cid(i)];u=l?l:"serialize"===n?s.helpers._serialize(t,o,i):s.helpers._getValue(t,o,i,n),void 0!==u&&(r[o]=u)}),e.__observe(t,"__keys"),o&&(a=null),r},_serialize:function(e,t,n){return s.helpers._getValue(e,t,n,"serialize")},_getValue:function(e,t,n,r){return s.helpers.isObservable(n)?n[r]():n}},keys:function(t){var n=[];e.__observe(t,"__keys");for(var r in t._data)n.push(r);return n}},{setup:function(t){t instanceof e.Map&&(t=t.serialize()),this._data={},e.cid(this,".map"),this._init=1,this._computedBindings={};var n=this._setupDefaults(t);this._setupComputes(n);var r=t&&e.Map.helpers.addToMap(t,this),i=e.extend(e.extend(!0,{},n),t);this.attr(i),r&&r(),this.bind("change",e.proxy(this._changes,this)),delete this._init},_setupComputes:function(){for(var e,t=this.constructor._computes,n=0,r=t.length;r>n;n++)e=t[n],this[e]=this[e].clone(this),this._computedBindings[e]={count:0}},_setupDefaults:function(){return this.constructor.defaults||{}},_bindsetup:function(){},_bindteardown:function(){},_changes:function(t,n,r,i,o){e.batch.trigger(this,{type:n,batchNum:t.batchNum,target:t.target},[i,o])},_triggerChange:function(t,r,i,o){n.isBubbling(this,"change")?e.batch.trigger(this,{type:"change",target:this},[t,r,i,o]):e.batch.trigger(this,t,[i,o]),("remove"===r||"add"===r)&&e.batch.trigger(this,{type:"__keys",target:this})},_each:function(e){var t=this.__get();for(var n in t)t.hasOwnProperty(n)&&e(t[n],n)},attr:function(e,t){var n=typeof e;return"string"!==n&&"number"!==n?this._attrs(e,t):1===arguments.length?this._get(e):(this._set(e,t),this)},each:function(){return e.each.apply(void 0,[this].concat(e.makeArray(arguments)))},removeAttr:function(t){var n=e.List&&this instanceof e.List,r=e.Map.helpers.attrParts(t),i=r.shift(),o=n?this[i]:this._data[i];return r.length&&o?o.removeAttr(r):("string"==typeof t&&~t.indexOf(".")&&(i=t),this._remove(i,o),o)},_remove:function(e,t){e in this._data&&(delete this._data[e],e in this.constructor.prototype||delete this[e],this._triggerChange(e,"remove",void 0,t))},_get:function(t){t=""+t;var n=t.indexOf(".");if(n>=0){var r=this.__get(t);if(void 0!==r)return r;var i=t.substr(0,n),o=t.substr(n+1);e.__observe(this,i);var a=this.__get(i);return a&&a._get?a._get(o):void 0}return e.__observe(this,t),this.__get(t)},__get:function(e){return e?this._computedBindings[e]?this[e]():this._data[e]:this._data},__type:function(t,n){if(!(t instanceof e.Map)&&e.Map.helpers.canMakeObserve(t)){var r=o(t);if(r)return r;if(e.isArray(t)){var i=e.List;return new i(t)}var a=this.constructor.Map||e.Map;return new a(t)}return t},_set:function(e,t,n){e=""+e;var r,i=e.indexOf(".");if(!n&&i>=0){var o=e.substr(0,i),a=e.substr(i+1);if(r=this._init?void 0:this.__get(o),!s.helpers.isObservable(r))throw"can.Map: Object does not exist";r._set(a,t)}else this.__convert&&(t=this.__convert(e,t)),r=this._init?void 0:this.__get(e),this.__set(e,this.__type(t,e),r)},__set:function(e,t,n){if(t!==n){var r=void 0!==n||this.__get().hasOwnProperty(e)?"set":"add";this.___set(e,this.constructor._bubble.set(this,e,t,n)),this._computedBindings[e]||this._triggerChange(e,r,t,n),n&&this.constructor._bubble.teardownFromParent(this,n)}},___set:function(e,t){this._computedBindings[e]?this[e](t):this._data[e]=t,"function"==typeof this.constructor.prototype[e]||this._computedBindings[e]||(this[e]=t)},bind:function(t,n){var r=this._computedBindings&&this._computedBindings[t];if(r)if(r.count)r.count++;else{r.count=1;var i=this;r.handler=function(n,r,o){e.batch.trigger(i,{type:t,batchNum:n.batchNum,target:i},[r,o])},this[t].bind("change",r.handler)}return this.constructor._bubble.bind(this,t),e.bindAndSetup.apply(this,arguments)},unbind:function(t,n){var r=this._computedBindings&&this._computedBindings[t];return r&&(1===r.count?(r.count=0,this[t].unbind("change",r.handler),delete r.handler):r.count--),this.constructor._bubble.unbind(this,t),e.unbindAndTeardown.apply(this,arguments)},serialize:function(){return e.Map.helpers.serialize(this,"serialize",{})},_attrs:function(t,n){if(void 0===t)return s.helpers.serialize(this,"attr",{});t=e.simpleExtend({},t);var r,i,o=this;e.batch.start(),this.each(function(e,r){if("_cid"!==r){if(i=t[r],void 0===i)return void(n&&o.removeAttr(r));o.__convert&&(i=o.__convert(r,i)),s.helpers.isObservable(i)?o.__set(r,o.__type(i,r),e):s.helpers.isObservable(e)&&s.helpers.canMakeObserve(i)?e.attr(i,n):e!==i&&o.__set(r,o.__type(i,r),e),delete t[r]}});for(r in t)"_cid"!==r&&(i=t[r],this._set(r,i,!0));return e.batch.stop(),this},compute:function(t){if(e.isFunction(this.constructor.prototype[t]))return e.compute(this[t],this);var n=t.split("."),r=n.length-1,i={args:[]};return e.compute(function(t){return arguments.length?void e.compute.read(this,n.slice(0,r)).value.attr(n[r],t):e.compute.read(this,n,i).value},this)}});return s.prototype.on=s.prototype.bind,s.prototype.off=s.prototype.unbind,s}),define("can/list",["can/util/library","can/map","can/bubble"],function(e,t,n){var r=[].splice,i=function(){var e={0:"a",length:1};return r.call(e,0,1),!e[0]}(),o=t.extend({Map:t},{setup:function(t,n){this.length=0,e.cid(this,".map"),this._init=1,this._computedBindings={},this._setupComputes(),t=t||[];var r;e.isDeferred(t)?this.replace(t):(r=t.length&&e.Map.helpers.addToMap(t,this),this.push.apply(this,e.makeArray(t||[]))),r&&r(),this.bind("change",e.proxy(this._changes,this)),e.simpleExtend(this,n),delete this._init},_triggerChange:function(n,r,i,o){t.prototype._triggerChange.apply(this,arguments);var a=+n;~(""+n).indexOf(".")||isNaN(a)||("add"===r?(e.batch.trigger(this,r,[i,a]),e.batch.trigger(this,"length",[this.length])):"remove"===r?(e.batch.trigger(this,r,[o,a]),e.batch.trigger(this,"length",[this.length])):e.batch.trigger(this,r,[i,a]))},__get:function(t){return t?this[t]&&this[t].isComputed&&e.isFunction(this.constructor.prototype[t])?this[t]():this[t]:this},__set:function(t,n,r){if(t=isNaN(+t)||t%1?t:+t,"number"==typeof t&&t>this.length-1){var i=new Array(t+1-this.length);return i[i.length-1]=n,this.push.apply(this,i),i}return e.Map.prototype.__set.call(this,""+t,n,r)},___set:function(e,t){this[e]=t,+e>=this.length&&(this.length=+e+1)},_remove:function(e,t){isNaN(+e)?(delete this[e],this._triggerChange(e,"remove",void 0,t)):this.splice(e,1)},_each:function(e){for(var t=this.__get(),n=0;n<t.length;n++)e(t[n],n)},serialize:function(){return t.helpers.serialize(this,"serialize",[])},splice:function(t,o){var a,s,u,c=e.makeArray(arguments),l=[],d=c.length>2;for(t=t||0,a=0,s=c.length-2;s>a;a++)u=a+2,c[u]=this.__type(c[u],u),l.push(c[u]),this[a+t]!==c[u]&&(d=!1);if(d&&this.length<=l.length)return l;void 0===o&&(o=c[1]=this.length-t);var p=r.apply(this,c);if(!i)for(a=this.length;a<p.length+this.length;a++)delete this[a];if(e.batch.start(),o>0&&(n.removeMany(this,p),this._triggerChange(""+t,"remove",void 0,p)),c.length>2){for(a=0,s=l.length;s>a;a++)n.set(this,a,l[a]);this._triggerChange(""+t,"add",l,p)}return e.batch.stop(),p},_attrs:function(n,r){return void 0===n?t.helpers.serialize(this,"attr",[]):(n=e.makeArray(n),e.batch.start(),this._updateAttrs(n,r),void e.batch.stop())},_updateAttrs:function(e,n){for(var r=Math.min(e.length,this.length),i=0;r>i;i++){var o=this[i],a=e[i];t.helpers.isObservable(o)&&t.helpers.canMakeObserve(a)?o.attr(a,n):o!==a&&this._set(i,a)}e.length>this.length?this.push.apply(this,e.slice(this.length)):e.length<this.length&&n&&this.splice(e.length)}}),a=function(t){return t[0]&&e.isArray(t[0])?t[0]:e.makeArray(t)};return e.each({push:"length",unshift:0},function(e,t){var r=[][t];o.prototype[t]=function(){for(var t,i,o=[],a=e?this.length:0,s=arguments.length;s--;)i=arguments[s],o[s]=n.set(this,s,this.__type(i,s));return t=r.apply(this,o),(!this.comparator||o.length)&&this._triggerChange(""+a,"add",o,void 0),t}}),e.each({pop:"length",shift:0},function(e,t){o.prototype[t]=function(){
if(this.length){var r=a(arguments),i=e&&this.length?this.length-1:0,o=[][t].apply(this,r);return this._triggerChange(""+i,"remove",void 0,[o]),o&&o.unbind&&n.remove(this,o),o}}}),e.extend(o.prototype,{indexOf:function(t,n){return this.attr("length"),e.inArray(t,this,n)},join:function(){return[].join.apply(this.attr(),arguments)},reverse:function(){var t=[].reverse.call(e.makeArray(this));this.replace(t)},slice:function(){var e=Array.prototype.slice.apply(this,arguments);return new this.constructor(e)},concat:function(){var t=[];return e.each(e.makeArray(arguments),function(n,r){t[r]=n instanceof e.List?n.serialize():n}),new this.constructor(Array.prototype.concat.apply(this.serialize(),t))},forEach:function(t,n){return e.each(this,t,n||this)},replace:function(t){return e.isDeferred(t)?t.then(e.proxy(this.replace,this)):this.splice.apply(this,[0,this.length].concat(e.makeArray(t||[]))),this},filter:function(t,n){var r,i=new e.List,o=this;return this.each(function(e,a,s){r=t.call(n|o,e,a,o),r&&i.push(e)}),i}}),e.List=t.List=o,e.List}),define("can/model",["can/util/library","can/map","can/list"],function(e){var t=function(t,n,r){var i=new e.Deferred;return t.then(function(){var t=e.makeArray(arguments),o=!0;try{t[0]=r.apply(n,t)}catch(a){o=!1,i.rejectWith(i,[a].concat(t))}o&&i.resolveWith(i,t)},function(){i.rejectWith(this,arguments)}),"function"==typeof t.abort&&(i.abort=function(){return t.abort()}),i},n=0,r=function(t){return e.__observe(t,t.constructor.id),t.__get(t.constructor.id)},i=function(t,n,r,i,o,a){var s={};if("string"==typeof t){var u=t.split(/\s+/);s.url=u.pop(),u.length&&(s.type=u.pop())}else e.extend(s,t);return s.data="object"!=typeof n||e.isArray(n)?n:e.extend(s.data||{},n),s.url=e.sub(s.url,s.data,!0),e.ajax(e.extend({type:r||"post",dataType:i||"json",success:o,error:a},s))},o=function(n,i,o,a,s){var u;e.isArray(n)?(u=n[1],n=n[0]):u=n.serialize(),u=[u];var c,l,d=n.constructor;return("update"===i||"destroy"===i)&&u.unshift(r(n)),l=d[i].apply(d,u),c=t(l,n,function(e){return n[s||i+"d"](e,l),n}),l.abort&&(c.abort=function(){l.abort()}),c.then(o,a),c},a={models:function(t,n,r){if(e.Model._reqs++,t){if(t instanceof this.List)return t;var i=this,o=[],a=i.List||h,s=n instanceof e.List?n:new a,u=t instanceof h,c=u?t.serialize():t;if(c=i.parseModels(c,r),c.data&&(t=c,c=c.data),"undefined"==typeof c||!e.isArray(c))throw new Error("Could not get any raw data while converting using .models");return s.length&&s.splice(0),e.each(c,function(e){o.push(i.model(e,r))}),s.push.apply(s,o),e.isArray(t)||e.each(t,function(e,t){"data"!==t&&s.attr(t,e)}),setTimeout(e.proxy(this._clean,this),1),s}},model:function(t,n,r){if(t){t="function"==typeof t.serialize?t.serialize():this.parseModel(t,r);var i=t[this.id];(i||0===i)&&this.store[i]&&(n=this.store[i]);var o=n&&e.isFunction(n.attr)?n.attr(t,this.removeAttr||!1):new this(t);return o}}},s={parseModel:function(t){return function(n){return t?e.getObject(t,n):n}},parseModels:function(t){return function(n){if(e.isArray(n))return n;t=t||"data";var r=e.getObject(t,n);if(!e.isArray(r))throw new Error("Could not get any raw data while converting using .models");return r}}},u={create:{url:"_shortName",type:"post"},update:{data:function(t,n){n=n||{};var r=this.id;return n[r]&&n[r]!==t&&(n["new"+e.capitalize(t)]=n[r],delete n[r]),n[r]=t,n},type:"put"},destroy:{type:"delete",data:function(e,t){return t=t||{},t.id=t[this.id]=e,t}},findAll:{url:"_shortName"},findOne:{}},c=function(e,t){return function(n){return n=e.data?e.data.apply(this,arguments):n,i(t||this[e.url||"_url"],n,e.type||"get")}},l=function(e,t){if(e.resource){var n=e.resource.replace(/\/+$/,"");return"findAll"===t||"create"===t?n:n+"/{"+e.id+"}"}};e.Model=e.Map.extend({fullName:"can.Model",_reqs:0,setup:function(t,r,i,o){if("string"!=typeof r&&(o=i,i=r),o||(o=i),this.store={},e.Map.setup.apply(this,arguments),e.Model){i&&i.List?(this.List=i.List,this.List.Map=this):this.List=t.List.extend({Map:this},{});var d=this,p=e.proxy(this._clean,d);e.each(u,function(n,r){if(i&&i[r]&&("string"==typeof i[r]||"object"==typeof i[r])?d[r]=c(n,i[r]):i&&i.resource&&!e.isFunction(i[r])&&(d[r]=c(n,l(d,r))),d["make"+e.capitalize(r)]){var o=d["make"+e.capitalize(r)](d[r]);e.Construct._overwrite(d,t,r,function(){e.Model._reqs++;var t=o.apply(this,arguments),n=t.then(p,p);return n.abort=t.abort,n})}});var f={};e.each(a,function(n,r){var o="parse"+e.capitalize(r),a=i&&i[r]||d[r];"string"==typeof a?(d[o]=a,e.Construct._overwrite(d,t,r,n)):i&&i[r]&&(f[o]=!0)}),e.each(s,function(n,r){var o=i&&i[r]||d[r];if("string"==typeof o)e.Construct._overwrite(d,t,r,n(o));else if(!(i&&e.isFunction(i[r])||d[r])){var a=n();a.useModelConverter=f[r],e.Construct._overwrite(d,t,r,a)}}),"can.Model"!==d.fullName&&d.fullName||(d.fullName="Model"+ ++n),e.Model._reqs=0,this._url=this._shortName+"/{"+this.id+"}"}},_ajax:c,_makeRequest:o,_clean:function(){if(e.Model._reqs--,!e.Model._reqs)for(var t in this.store)this.store[t]._bindings||delete this.store[t];return arguments[0]},models:a.models,model:a.model},{setup:function(t){var n=t&&t[this.constructor.id];e.Model._reqs&&null!=n&&(this.constructor.store[n]=this),e.Map.prototype.setup.apply(this,arguments)},isNew:function(){var e=r(this);return!(e||0===e)},save:function(e,t){return o(this,this.isNew()?"create":"update",e,t)},destroy:function(t,n){if(this.isNew()){var r=this,i=e.Deferred();return i.then(t,n),i.done(function(e){r.destroyed(e)}).resolve(r)}return o(this,"destroy",t,n,"destroyed")},_bindsetup:function(){var t=this.__get(this.constructor.id);return null!=t&&(this.constructor.store[t]=this),e.Map.prototype._bindsetup.apply(this,arguments)},_bindteardown:function(){return delete this.constructor.store[r(this)],e.Map.prototype._bindteardown.apply(this,arguments)},___set:function(t,n){e.Map.prototype.___set.call(this,t,n),t===this.constructor.id&&this._bindings&&(this.constructor.store[r(this)]=this)}});var d=function(e){return function(t,n,r){return this[e](t,null,r)}},p=function(e){return this.parseModel.useModelConverter?this.model(e):this.parseModel(e)},f={makeFindAll:d("models"),makeFindOne:d("model"),makeCreate:p,makeUpdate:p,makeDestroy:p};e.each(f,function(n,r){e.Model[r]=function(r){return function(){var i=e.makeArray(arguments),o=e.isFunction(i[1])?i.splice(0,1):i.splice(0,2),a=t(r.apply(this,o),this,n);return a.then(i[0],i[1]),a}}}),e.each(["created","updated","destroyed"],function(t){e.Model.prototype[t]=function(n){var r=this,i=r.constructor;n&&"object"==typeof n&&this.attr(e.isFunction(n.attr)?n.attr():n),e.dispatch.call(this,{type:"change",target:this},[t]),e.dispatch.call(i,t,[this])}});var h=e.Model.List=e.List.extend({_bubbleRule:function(t,n){var r=e.List._bubbleRule(t,n);return r.push("destroyed"),r}},{setup:function(t){e.isPlainObject(t)&&!e.isArray(t)?(e.List.prototype.setup.apply(this),this.replace(e.isDeferred(t)?t:this.constructor.Map.findAll(t))):e.List.prototype.setup.apply(this,arguments),this._init=1,this.bind("destroyed",e.proxy(this._destroyed,this)),delete this._init},_destroyed:function(e,t){if(/\w+/.test(t))for(var n;(n=this.indexOf(e.target))>-1;)this.splice(n,1)}});return e.Model}),define("can/read",["can/util/library"],function(e){var t=function(e,r,i){i=i||{};for(var o,a,s={foundObservable:!1},u=n(e,0,r,i,s),c=r.length,l=0;c>l;){a=u;for(var d=0,p=t.propertyReaders.length;p>d;d++){var f=t.propertyReaders[d];if(f.test(u)){u=f.read(u,r[l],l,i,s);break}}if(l+=1,u=n(u,l,r,i,s,a),o=typeof u,l<r.length&&(null===u||"function"!==o&&"object"!==o))return i.earlyExit&&i.earlyExit(a,l-1,u),{value:void 0,parent:a}}return void 0===u&&i.earlyExit&&i.earlyExit(a,l-1),{value:u,parent:a}},n=function(e,n,r,i,o,a){var s;do{s=!1;for(var u=0,c=t.valueReaders.length;c>u;u++)t.valueReaders[u].test(e,n,r,i)&&(e=t.valueReaders[u].read(e,n,r,i,o,a))}while(s);return e};return t.valueReaders=[{name:"compute",test:function(e,t,n,r){return e&&e.isComputed},read:function(t,n,r,i,o){return i.isArgument&&n===r.length?t:(!o.foundObservable&&i.foundObservable&&(i.foundObservable(t,n),o.foundObservable=!0),t instanceof e.Compute?t.get():t())}},{name:"function",test:function(t,n,r,i){var o=typeof t;return"function"===o&&!t.isComputed&&(i.executeAnonymousFunctions||i.isArgument&&n===r.length)&&!(e.Construct&&t.prototype instanceof e.Construct)&&!(e.route&&t===e.route)},read:function(t,n,r,i,o,a){return i.isArgument&&n===r.length?i.proxyMethods!==!1?e.proxy(t,a):t:t.call(a)}}],t.propertyReaders=[{name:"map",test:e.isMapLike,read:function(t,n,r,i,o){return!o.foundObservable&&i.foundObservable&&(i.foundObservable(t,r),o.foundObservable=!0),"function"==typeof t[n]&&t.constructor.prototype[n]===t[n]?i.returnObserveMethods?t[n]:"constructor"===n&&t instanceof e.Construct||t[n].prototype instanceof e.Construct?t[n]:t[n].apply(t,i.args||[]):t.attr(n)}},{name:"promise",test:function(t){return e.isPromise(t)},read:function(t,n,r,i,o){!o.foundObservable&&i.foundObservable&&(i.foundObservable(t,r),o.foundObservable=!0);var a=t.__observeData;return t.__observeData||(a=t.__observeData={isPending:!0,state:"pending",isResolved:!1,isRejected:!1,value:void 0,reason:void 0},e.cid(a),e.simpleExtend(a,e.event),t.then(function(e){a.isPending=!1,a.isResolved=!0,a.value=e,a.state="resolved",a.dispatch("state",["resolved","pending"])},function(e){a.isPending=!1,a.isRejected=!0,a.reason=e,a.state="rejected",a.dispatch("state",["rejected","pending"])})),e.__observe(a,"state"),n in a?a[n]:t[n]}},{name:"object",test:function(){return!0},read:function(e,t){return null==e?void 0:e[t]}}],t.write=function(t,n,r,i){return i=i||{},e.isMapLike(t)?!i.isArgument&&t._data&&t._data[n]&&t._data[n].isComputed?t._data[n](r):t.attr(n,r):t[n]&&t[n].isComputed?t[n](r):void("object"==typeof t&&(t[n]=r))},t}),define("can/get_value_and_bind",["can/util/library"],function(e){function t(t,n,o,s){var u=r(t,n),c=u.observed,l=o.observed;return u.names!==o.names&&(i(l,c,s),a(l,s)),e.batch.afterPreviousEvents(function(){u.ready=!0}),u}var n=[];e.__isRecordingObserves=function(){return n.length},e.__observe=e.__reading=function(e,t){if(n.length){var r=e._cid+"|"+t,i=n[n.length-1];i.names+=r,i.observed[r]={obj:e,event:t+""}}},e.__notObserve=function(t){return function(){var n=e.__clearObserved(),r=t.apply(this,arguments);return e.__setObserved(n),r}},e.__clearObserved=e.__clearReading=function(){if(n.length){var e=n[n.length-1];return n[n.length-1]={names:"",observed:{}},e}},e.__setObserved=e.__setReading=function(e){n.length&&(n[n.length-1]=e)},e.__addObserved=e.__addReading=function(t){if(n.length){var r=n[n.length-1];e.simpleExtend(r.observed,t.observed),r.names+=t.names}};var r=function(e,t){n.push({names:"",observed:{}});var r=e.call(t),i=n.pop();return i.value=r,i},i=function(e,t,n){for(var r in t)o(e,t,r,n)},o=function(e,t,n,r){if(e[n])delete e[n];else{var i=t[n];i.obj.bind(i.event,r)}},a=function(e,t){for(var n in e){var r=e[n];r.obj.unbind(r.event,t)}};return t}),define("can/proto_compute",["can/util/library","can/util/bind","can/read","can/get_value_and_bind","can/util/batch"],function(e,t,n,r){var i=function(t,n,r,i){n!==r&&e.batch.trigger(t,i?{type:"change",batchNum:i}:"change",[n,r])},o=function(t,n,i,o){var a,s,u;return o=!1,{on:function(c){var l=this;s||(s=function(e){if(a.ready&&t.bound&&(void 0===e.batchNum||e.batchNum!==u)){var c,d=a.value;o?(c=n.call(i),a.value=c):(a=r(n,i,a,s),c=a.value),l.updater(c,d,e.batchNum),u=u=e.batchNum}}),a=r(n,i,{observed:{}},s),o&&(n=e.__notObserve(n)),t.value=a.value,t.hasDependencies=!e.isEmptyObject(a.observed)},off:function(e){for(var t in a.observed){var n=a.observed[t];n.obj.unbind(n.event,s)}}}},a=function(){},s=function(e,t,n){this.value=e,i(this,e,t,n)},u=function(e,t,n){return function(){return e.call(t,n.get())}},c=function(e,t){return function(n){void 0!==n&&t(n,e.value)}};e.Compute=function(t,n,r,i){for(var o=[],a=0,s=arguments.length;s>a;a++)o[a]=arguments[a];var u=typeof o[1];"function"==typeof o[0]?this._setupGetterSetterFn(o[0],o[1],o[2],o[3]):o[1]?"string"===u?this._setupContextString(o[0],o[1],o[2]):"function"===u?this._setupContextFunction(o[0],o[1],o[2]):o[1]&&o[1].fn?this._setupAsyncCompute(o[0],o[1]):this._setupContextSettings(o[0],o[1]):this._setupInitialValue(o[0]),this._args=o,this.isComputed=!0,e.cid(this,"compute")},e.simpleExtend(e.Compute.prototype,{_bindsetup:e.__notObserve(function(){this.bound=!0,this._on(this.updater)}),_bindteardown:function(){this._off(this.updater),this.bound=!1},bind:e.bindAndSetup,unbind:e.unbindAndTeardown,clone:function(t){return t&&"function"==typeof this._args[0]?this._args[1]=t:t&&(this._args[2]=t),new e.Compute(this._args[0],this._args[1],this._args[2],this._args[3])},_on:a,_off:a,get:function(){return e.__isRecordingObserves()&&this._canObserve!==!1&&(e.__observe(this,"change"),this.bound||e.Compute.temporarilyBind(this)),this.bound?this.value:this._get()},_get:function(){return this.value},set:function(e){var t=this.value,n=this._set(e,t);return this.hasDependencies?this._setUpdates?this.value:this._get():(void 0===n?this.value=this._get():this.value=n,i(this,this.value,t),this.value)},_set:function(e){return this.value=e},updater:s,_computeFn:function(e){return arguments.length?this.set(e):this.get()},toFunction:function(){return e.proxy(this._computeFn,this)},_setupGetterSetterFn:function(t,n,r,i){this._set=e.proxy(t,n),this._get=e.proxy(t,n),this._canObserve=r===!1?!1:!0;var a=o(this,t,n||this,i);this._on=a.on,this._off=a.off},_setupContextString:function(t,n,r){var i=e.isMapLike(t),o=this,a=function(e,t,n){o.updater(t,n,e.batchNum)};i?(this.hasDependencies=!0,this._get=function(){return t.attr(n)},this._set=function(e){t.attr(n,e)},this._on=function(e){t.bind(r||n,a),this.value=this._get()},this._off=function(){return t.unbind(r||n,a)}):(this._get=function(){return e.getObject(n,[t])},this._set=function(r){var i=n.split("."),o=i.pop(),a=e.getObject(i.join("."),[t]);a[o]=r})},_setupContextFunction:function(t,n,r){this.value=t,this._set=n,e.simpleExtend(this,r)},_setupContextSettings:function(t,n){if(this.value=t,this._set=n.set?e.proxy(n.set,n):this._set,this._get=n.get?e.proxy(n.get,n):this._get,!n.__selfUpdater){var r=this,i=this.updater;this.updater=function(){i.call(r,r._get(),r.value)}}this._on=n.on?n.on:this._on,this._off=n.off?n.off:this._off},_setupAsyncCompute:function(t,n){this.value=t;var r,i=e.proxy(this.updater,this),a=this,s=n.fn;this.updater=i;var l=new e.Compute(t);this.lastSetValue=l,this._setUpdates=!0,this._set=function(e){return e===l.get()?this.value:l.set(e)},this._get=u(s,n.context,l),0===s.length?r=o(this,s,n.context):1===s.length?r=o(this,function(){return s.call(n.context,l.get())},n):(this.updater=c(this,i),r=o(this,function(){var e=s.call(n.context,l.get(),function(e){i(e,a.value)});return void 0!==e?e:this.value},n)),this._on=r.on,this._off=r.off},_setupInitialValue:function(e){this.value=e}});var l,d=function(){for(var e=0,t=l.length;t>e;e++)l[e].unbind("change",a);l=null};return e.Compute.temporarilyBind=function(e){e.bind("change",a),l||(l=[],setTimeout(d,10)),l.push(e)},e.Compute.async=function(t,n,r){return new e.Compute(t,{fn:n,context:r})},e.Compute.read=n,e.Compute.set=n.write,e.Compute.truthy=function(t){return new e.Compute(function(){var e=t.get();return"function"==typeof e&&(e=e.get()),!!e})},e.Compute}),define("can/compute",["can/util/library","can/util/bind","can/util/batch","can/proto_compute"],function(e,t){e.compute=function(t,n,r,i){var o=new e.Compute(t,n,r,i),a=o.bind,s=o.unbind,u=function(e){return arguments.length?o.set(e):o.get()},c=e.cid(u,"compute"),l="__handler"+c;return u.bind=function(e,t){var n=t&&t[l];return t&&!n&&(n=t[l]=function(){t.apply(u,arguments)}),a.call(o,e,n)},u.unbind=function(e,t){var n=t&&t[l];return n?(delete t[l],o.unbind(e,n)):s.apply(o,arguments)},u.isComputed=o.isComputed,u.clone=function(r){return"function"==typeof t&&(n=r),e.compute(t,n,r,i)},u.computeInstance=o,u};var n,r=function(){},i=function(){for(var e=0,t=n.length;t>e;e++)n[e].unbind("change",r);n=null};return e.compute.temporarilyBind=function(e){e.bind("change",r),n||(n=[],setTimeout(i,10)),n.push(e)},e.compute.truthy=function(t){return e.compute(function(){var e=t();return"function"==typeof e&&(e=e()),!!e})},e.compute.async=function(t,n,r){return e.compute(t,{fn:n,context:r})},e.compute.read=e.Compute.read,e.compute.set=e.Compute.set,e.compute}),define("can/view/compute_data",["can/util/library","can/compute","can/get_value_and_bind"],function(e,t,n){var r=function(t){return t.reads&&1===t.reads.length&&t.root instanceof e.Map&&!e.isFunction(t.root[t.reads[0]])},i=function(e,t){return n(e,null,{observed:{}},t)},o=function(e,t){for(var n in e.observed){var r=e.observed[n];r.obj.unbind(r.event,t)}},a=function(e,t){var n=e.root,r=e.reads[0];return n.bind(r,t),{value:e.initialValue,observed:{something:!0}}},s=function(e,t){e.root.unbind(e.reads[0],t)},u=function(t,n,r,i,o){if(!(arguments.length>4)){if(i.root)return e.compute.read(i.root,i.reads,r).value;var a=t.read(n,r);return i.scope=a.scope,i.initialValue=a.value,i.reads=a.reads,i.root=a.rootObserve,i.setRoot=a.setRoot,a.value}var s=i.root||i.setRoot;if(s.isComputed)s(o);else if(i.reads.length){var u=i.reads.length-1,c=i.reads.length?e.compute.read(s,i.reads.slice(0,u)).value:s;e.compute.set(c,i.reads[u],o,r)}};return function(t,c,l){l=l||{args:[]};var d,p,f={},h=function(e){return arguments.length?u(t,c,l,f,e):u(t,c,l,f)},g=function(e){if(p.ready&&b.computeInstance.bound&&(void 0===e.batchNum||e.batchNum!==d)){var t,r=p.value;p=n(h,null,p,g),t=p.value,b.computeInstance.updater(t,r,e.batchNum),d=d=e.batchNum}},m=function(e,t,n){"function"!=typeof t?b.computeInstance.updater(t,n,e.batchNum):(s(f,m),p=i(h,g),v=!1,b.computeInstance.updater(p.value,n,e.batchNum))},v=!1,b=e.compute(void 0,{on:function(){if(p=i(h,g),r(f)){var t=p;p=a(f,m),o(t,g),v=!0}b.computeInstance.value=p.value,b.computeInstance.hasDependencies=!e.isEmptyObject(p.observed)},off:function(){v?s(f,m):o(p,g)},set:h,get:h,__selfUpdater:!0});return f.compute=b,f}}),define("can/view",["can/util/library"],function(e){var t=e.isFunction,n=e.makeArray,r=1,i=function(e){var t=function(){return c.frag(e.apply(this,arguments))};return t.render=function(){return e.apply(e,arguments)},t},o=function(e,t){if(!e.length)throw"can.view: No template or empty template:"+t},a=function(n,r){if(t(n)){var i=e.Deferred();return i.resolve(n)}var a,s,u,l="string"==typeof n?n:n.url,d=n.engine&&"."+n.engine||l.match(/\.[\w\d]+$/);if(l.match(/^#/)&&(l=l.substr(1)),(s=document.getElementById(l))&&(d="."+s.type.match(/\/(x\-)?(.+)/)[2]),d||c.cached[l]||(l+=d=c.ext),e.isArray(d)&&(d=d[0]),u=c.toId(l),l.match(/^\/\//)&&(l=l.substr(2),l=window.steal?steal.config().root.mapJoin(""+steal.id(l)):l),window.require&&require.toUrl&&(l=require.toUrl(l)),a=c.types[d],c.cached[u])return c.cached[u];if(s)return c.registerView(u,s.innerHTML,a);var p=new e.Deferred;return e.ajax({async:r,url:l,dataType:"text",error:function(e){o("",l),p.reject(e)},success:function(e){o(e,l),c.registerView(u,e,a,p)}}),p},s=function(t){var n=[];if(e.isDeferred(t))return[t];for(var r in t)e.isDeferred(t[r])&&n.push(t[r]);return n},u=function(t){return e.isArray(t)&&"success"===t[1]?t[0]:t},c=e.view=e.template=function(e,n,r,i){return t(r)&&(i=r,r=void 0),c.renderAs("fragment",e,n,r,i)};return e.extend(c,{frag:function(e,t){return c.hookup(c.fragment(e),t)},fragment:function(t){if("string"!=typeof t&&11===t.nodeType)return t;var n=e.buildFragment(t,document.body);return n.childNodes.length||n.appendChild(document.createTextNode("")),n},toId:function(t){return e.map(t.toString().split(/\/|\./g),function(e){return e?e:void 0}).join("_")},toStr:function(e){return null==e?"":""+e},hookup:function(t,n){var r,i,o=[];return e.each(t.childNodes?e.makeArray(t.childNodes):t,function(t){1===t.nodeType&&(o.push(t),o.push.apply(o,e.makeArray(t.getElementsByTagName("*"))))}),e.each(o,function(e){e.getAttribute&&(r=e.getAttribute("data-view-id"))&&(i=c.hookups[r])&&(i(e,n,r),delete c.hookups[r],e.removeAttribute("data-view-id"))}),t},hookups:{},hook:function(e){return c.hookups[++r]=e," data-view-id='"+r+"'"},cached:{},cachedRenderers:{},cache:!0,register:function(t){this.types["."+t.suffix]=t,e[t.suffix]=c[t.suffix]=function(e,n){var r,o;if(!n)return o=function(){return r||(r=t.fragRenderer?t.fragRenderer(null,e):i(t.renderer(null,e))),r.apply(this,arguments)},o.render=function(){var n=t.renderer(null,e);return n.apply(n,arguments)},o;var a=function(){return r||(r=t.fragRenderer?t.fragRenderer(e,n):t.renderer(e,n)),r.apply(this,arguments)};return t.fragRenderer?c.preload(e,a):c.preloadStringRenderer(e,a)}},types:{},ext:".ejs",registerScript:function(e,t,n){return"can.view.preloadStringRenderer('"+t+"',"+c.types["."+e].script(t,n)+");"},preload:function(t,n){var r=c.cached[t]=(new e.Deferred).resolve(function(e,t){return n.call(e,e,t)});return r.__view_id=t,c.cachedRenderers[t]=n,n},preloadStringRenderer:function(e,t){return this.preload(e,i(t))},render:function(t,n,r,i){return e.view.renderAs("string",t,n,r,i)},renderTo:function(e,t,n,r){return("string"===e&&t.render?t.render:t)(n,r)},renderAs:function(r,i,o,l,d){t(l)&&(d=l,l=void 0);var p,f,h,g,m,v=s(o);if(v.length)return f=new e.Deferred,h=e.extend({},o),v.push(a(i,!0)),e.when.apply(e,v).then(function(t){var i,a=n(arguments),s=a.pop();if(e.isDeferred(o))h=u(t);else for(var c in o)e.isDeferred(o[c])&&(h[c]=u(a.shift()));i=e.view.renderTo(r,s,h,l),f.resolve(i,h),d&&d(i,h)},function(){f.reject.apply(f,arguments)}),f;if(p=e.__clearReading(),g=t(d),f=a(i,g),p&&e.__setReading(p),g)m=f,f.then(function(t){d(o?e.view.renderTo(r,t,o,l):t)});else{if("resolved"===f.state()&&f.__view_id){var b=c.cachedRenderers[f.__view_id];return o?e.view.renderTo(r,b,o,l):b}f.then(function(t){m=o?e.view.renderTo(r,t,o,l):t})}return m},registerView:function(t,n,r,o){var a,s="object"==typeof r?r:c.types[r||c.ext];return a=s.fragRenderer?s.fragRenderer(t,n):i(s.renderer(t,n)),o=o||new e.Deferred,c.cache&&(c.cached[t]=o,o.__view_id=t,c.cachedRenderers[t]=a),o.resolve(a)}}),e}),define("can/view/scope",["can/util/library","can/view/compute_data","can/construct","can/map","can/list","can/view","can/compute"],function(e,t){var n=/(\\)?\./g,r=/\\\./g,i=function(e){var t=[],i=0;return e.replace(n,function(n,o,a){o||(t.push(e.slice(i,a).replace(r,".")),i=a+n.length)}),t.push(e.slice(i).replace(r,".")),t},o=e.Construct.extend({read:e.compute.read},{init:function(e,t){this._context=e,this._parent=t,this.__cache={}},attr:e.__notObserve(function(t,n){var r={isArgument:!0,returnObserveMethods:!0,proxyMethods:!1},i=this.read(t,r);if(2===arguments.length){var o=t.lastIndexOf("."),a=-1!==o?t.substring(0,o):".",s=this.read(a,r).value;-1!==o&&(t=t.substring(o+1,t.length)),e.compute.set(s,t,n,r)}return i.value}),add:function(e){return e!==this._context?new this.constructor(e,this):this},computeData:function(e,n){return t(this,e,n)},compute:function(e,t){return this.computeData(e,t).compute},read:function(t,n){var r;if("./"===t.substr(0,2))r=!0,t=t.substr(2);else{if("../"===t.substr(0,3))return this._parent.read(t.substr(3),n);if(".."===t)return{value:this._parent._context};if("."===t||"this"===t)return{value:this._context}}for(var o,a,s,u,c,l=-1===t.indexOf("\\.")?t.split("."):i(t),d=this,p=[],f=-1;d;){if(o=d._context,null!==o&&("object"==typeof o||"function"==typeof o)){var h=e.compute.read(o,l,e.simpleExtend({foundObservable:function(e,t){a=e,s=l.slice(t)},earlyExit:function(e,t){t>f&&(c=a,u=s,f=t)},executeAnonymousFunctions:!0},n));if(void 0!==h.value)return{scope:d,rootObserve:a,value:h.value,reads:s};p.push(e.__clearObserved())}d=r?null:d._parent}var g=p.length;if(g)for(var m=0;g>m;m++)e.__addObserved(p[m]);return{setRoot:c,reads:u,value:void 0}}});return e.view.Scope=o,o}),define("can/elements",["can/util/library","can/view"],function(e){var t="undefined"!=typeof document?document:null,n=t&&function(){return 1===e.$(document.createComment("~")).length}(),r={tagToContentPropMap:{option:t&&"textContent"in document.createElement("option")?"textContent":"innerText",textarea:"value"},attrMap:e.attr.map,attrReg:/([^\s=]+)[\s]*=[\s]*/,defaultValue:e.attr.defaultValue,tagMap:{"":"span",colgroup:"col",table:"tbody",tr:"td",ol:"li",ul:"li",tbody:"tr",thead:"tr",tfoot:"tr",select:"option",optgroup:"option"},reverseTagMap:{col:"colgroup",tr:"tbody",option:"select",td:"tr",th:"tr",li:"ul"},getParentNode:function(e,t){return t&&11===e.parentNode.nodeType?t:e.parentNode},setAttr:e.attr.set,getAttr:e.attr.get,removeAttr:e.attr.remove,contentText:function(e){return"string"==typeof e?e:e||0===e?""+e:""},after:function(t,n){var r=t[t.length-1];r.nextSibling?e.insertBefore(r.parentNode,n,r.nextSibling):e.appendChild(r.parentNode,n)},replace:function(t,i){r.after(t,i),e.remove(e.$(t)).length<t.length&&!n&&e.each(t,function(e){8===e.nodeType&&e.parentNode.removeChild(e)})}};return e.view.elements=r,r}),define("can/view/callbacks",["can/util/library","can/view"],function(e){var t=e.view.attr=function(e,t){if(!t){var i=n[e];if(!i)for(var o=0,a=r.length;a>o;o++){var s=r[o];if(s.match.test(e)){i=s.handler;break}}return i}"string"==typeof e?n[e]=t:r.push({match:e,handler:t})},n={},r=[],i=/[-\:]/,o=e.view.tag=function(t,n){if(!n){var r=a[t.toLowerCase()];return!r&&i.test(t)&&(r=function(){}),r}e.global.html5&&(e.global.html5.elements+=" "+t,e.global.html5.shivDocument()),a[t.toLowerCase()]=n},a={};return e.view.callbacks={_tags:a,_attributes:n,_regExpAttributes:r,tag:o,attr:t,tagHandler:function(t,n,r){var i,o=r.options.attr("tags."+n),s=o||a[n],u=r.scope;if(s){var c=e.__clearObserved();i=s(t,r),e.__setObserved(c)}else i=u;if(i&&r.subtemplate){u!==i&&(u=u.add(i));var l=r.subtemplate(u,r.options),d="string"==typeof l?e.view.frag(l):l;e.appendChild(t,d)}}},e.view.callbacks}),define("can/scanner",["can/view","can/elements","can/view/callbacks"],function(can,elements,viewCallbacks){var newLine=/(\r|\n)+/g,notEndTag=/\//,clean=function(e){return e.split("\\").join("\\\\").split("\n").join("\\n").split('"').join('\\"').split("   ").join("\\t")},getTag=function(e,t,n){if(e)return e;for(;n<t.length;){if("<"===t[n]&&!notEndTag.test(t[n+1]))return elements.reverseTagMap[t[n+1]]||"span";n++}return""},bracketNum=function(e){return--e.split("{").length- --e.split("}").length},myEval=function(script){eval(script)},attrReg=/([^\s]+)[\s]*=[\s]*$/,startTxt="var ___v1ew = [];",finishTxt="return ___v1ew.join('')",put_cmd="___v1ew.push(\n",insert_cmd=put_cmd,htmlTag=null,quote=null,beforeQuote=null,rescan=null,getAttrName=function(){var e=beforeQuote.match(attrReg);return e&&e[1]},status=function(){return quote?"'"+getAttrName()+"'":htmlTag?1:0},top=function(e){return e[e.length-1]},Scanner;return can.view.Scanner=Scanner=function(e){can.extend(this,{text:{},tokens:[]},e),this.text.options=this.text.options||"",this.tokenReg=[],this.tokenSimple={"<":"<",">":">",'"':'"',"'":"'"},this.tokenComplex=[],this.tokenMap={};for(var t,n=0;t=this.tokens[n];n++)t[2]?(this.tokenReg.push(t[2]),this.tokenComplex.push({abbr:t[1],re:new RegExp(t[2]),rescan:t[3]})):(this.tokenReg.push(t[1]),this.tokenSimple[t[1]]=t[0]),this.tokenMap[t[0]]=t[1];this.tokenReg=new RegExp("("+this.tokenReg.slice(0).concat(["<",">",'"',"'"]).join("|")+")","g")},Scanner.prototype={helpers:[],scan:function(e,t){var n=[],r=0,i=this.tokenSimple,o=this.tokenComplex;e=e.replace(newLine,"\n"),this.transform&&(e=this.transform(e)),e.replace(this.tokenReg,function(t,a){var s=arguments[arguments.length-2];if(s>r&&n.push(e.substring(r,s)),i[t])n.push(t);else for(var u,c=0;u=o[c];c++)if(u.re.test(t)){n.push(u.abbr),u.rescan&&n.push(u.rescan(a));break}r=s+a.length}),r<e.length&&n.push(e.substr(r));var a,s,u,c,l="",d=[startTxt+(this.text.start||"")],p=function(e,t){d.push(put_cmd,'"',clean(e),'"'+(t||"")+");")},f=[],h=null,g=!1,m={attributeHookups:[],tagHookups:[],lastTagHookup:""},v=function(){m.lastTagHookup=m.tagHookups.pop()+m.tagHookups.length},b="",y=[],_=!1,w=!1,x=0,C=this.tokenMap;for(htmlTag=quote=beforeQuote=null;void 0!==(u=n[x++]);){if(null===h)switch(u){case C.left:case C.escapeLeft:case C.returnLeft:g=htmlTag&&1;case C.commentLeft:h=u,l.length&&p(l),l="";break;case C.escapeFull:g=htmlTag&&1,rescan=1,h=C.escapeLeft,l.length&&p(l),rescan=n[x++],l=rescan.content||rescan,rescan.before&&p(rescan.before),n.splice(x,0,C.right);break;case C.commentFull:break;case C.templateLeft:l+=C.left;break;case"<":0!==n[x].indexOf("!--")&&(htmlTag=1,g=0),l+=u;break;case">":htmlTag=0;var A="/"===l.substr(l.length-1)||"--"===l.substr(l.length-2),O="";if(m.attributeHookups.length&&(O="attrs: ['"+m.attributeHookups.join("','")+"'], ",m.attributeHookups=[]),b+m.tagHookups.length!==m.lastTagHookup&&b===top(m.tagHookups))A&&(l=l.substr(0,l.length-1)),d.push(put_cmd,'"',clean(l),'"',",can.view.pending({tagName:'"+b+"',"+O+"scope: "+(this.text.scope||"this")+this.text.options),A?(d.push("}));"),l="/>",v()):"<"===n[x]&&n[x+1]==="/"+b?(d.push("}));"),l=u,v()):(d.push(",subtemplate: function("+this.text.argNames+"){\n"+startTxt+(this.text.start||"")),l="");else if(g||!_&&elements.tagToContentPropMap[y[y.length-1]]||O){var E=",can.view.pending({"+O+"scope: "+(this.text.scope||"this")+this.text.options+'}),"';A?p(l.substr(0,l.length-1),E+'/>"'):p(l,E+'>"'),l="",g=0}else l+=u;(A||_)&&(y.pop(),b=y[y.length-1],_=!1),m.attributeHookups=[];break;case"'":case'"':if(htmlTag)if(quote&&quote===u){quote=null;var N=getAttrName();if(viewCallbacks.attr(N)&&m.attributeHookups.push(N),w){l+=u,p(l),d.push(finishTxt,"}));\n"),l="",w=!1;break}}else if(null===quote&&(quote=u,beforeQuote=a,c=getAttrName(),"img"===b&&"src"===c||"style"===c)){p(l.replace(attrReg,"")),l="",w=!0,d.push(insert_cmd,"can.view.txt(2,'"+getTag(b,n,x)+"',"+status()+",this,function(){",startTxt),p(c+"="+u);break}default:if("<"===a){b="!--"===u.substr(0,3)?"!--":u.split(/\s/)[0];var j,R=!1;0===b.indexOf("/")&&(R=!0,j=b.substr(1)),R?(top(y)===j&&(b=j,_=!0),top(m.tagHookups)===j&&(p(l.substr(0,l.length-1)),d.push(finishTxt+"}}) );"),l="><",v())):(b.lastIndexOf("/")===b.length-1&&(b=b.substr(0,b.length-1)),"!--"!==b&&viewCallbacks.tag(b)&&("content"===b&&elements.tagMap[top(y)]&&(u=u.replace("content",elements.tagMap[top(y)])),m.tagHookups.push(b)),y.push(b))}l+=u}else switch(u){case C.right:case C.returnRight:switch(h){case C.left:s=bracketNum(l),1===s?(d.push(insert_cmd,"can.view.txt(0,'"+getTag(b,n,x)+"',"+status()+",this,function(){",startTxt,l),f.push({before:"",after:finishTxt+"}));\n"})):(r=f.length&&-1===s?f.pop():{after:";"},r.before&&d.push(r.before),d.push(l,";",r.after));break;case C.escapeLeft:case C.returnLeft:s=bracketNum(l),s&&f.push({before:finishTxt,after:"}));\n"});for(var T=h===C.escapeLeft?1:0,k={insert:insert_cmd,tagName:getTag(b,n,x),status:status(),specialAttribute:w},S=0;S<this.helpers.length;S++){var M=this.helpers[S];if(M.name.test(l)){l=M.fn(l,k),M.name.source===/^>[\s]*\w*/.source&&(T=0);break}}"object"==typeof l?l.startTxt&&l.end&&w?d.push(insert_cmd,"can.view.toStr( ",l.content,"() ) );"):(l.startTxt?d.push(insert_cmd,"can.view.txt(\n"+("string"==typeof status()||(null!=l.escaped?l.escaped:T))+",\n'"+b+"',\n"+status()+",\nthis,\n"):l.startOnlyTxt&&d.push(insert_cmd,"can.view.onlytxt(this,\n"),d.push(l.content),l.end&&d.push("));")):w?d.push(insert_cmd,l,");"):d.push(insert_cmd,"can.view.txt(\n"+("string"==typeof status()||T)+",\n'"+b+"',\n"+status()+",\nthis,\nfunction(){ "+(this.text.escape||"")+"return ",l,s?startTxt:"}));\n"),rescan&&rescan.after&&rescan.after.length&&(p(rescan.after.length),rescan=null)}h=null,l="";break;case C.templateLeft:l+=C.left;break;default:l+=u}a=u}l.length&&p(l),d.push(";");var I=d.join(""),P={out:(this.text.outStart||"")+I+" "+finishTxt+(this.text.outEnd||"")};return myEval.call(P,"this.fn = (function("+this.text.argNames+"){"+P.out+"});\r\n//# sourceURL="+t+".js"),P}},can.view.pending=function(e){var t=can.view.getHooks();return can.view.hook(function(n){can.each(t,function(e){e(n)}),e.templateType="legacy",e.tagName&&viewCallbacks.tagHandler(n,e.tagName,e),can.each(e&&e.attrs||[],function(t){
e.attributeName=t;var r=viewCallbacks.attr(t);r&&r(n,e)})})},can.view.tag("content",function(e,t){return t.scope}),can.view.Scanner=Scanner,Scanner}),define("can/view/node_lists",["can/util/library","can/elements"],function(e){var t=!0;try{document.createTextNode("")._=0}catch(n){t=!1}var r={},i={},o="ejs_"+Math.random(),a=0,s=function(e,n){var r=n||i,s=u(e,r);return s?s:t||3!==e.nodeType?(++a,e[o]=(e.nodeName?"element_":"obj_")+a):(++a,r["text_"+a]=e,"text_"+a)},u=function(e,n){if(t||3!==e.nodeType)return e[o];for(var r in n)if(n[r]===e)return r},c=[].splice,l=[].push,d=function(e){for(var t=0,n=0,r=e.length;r>n;n++){var i=e[n];i.nodeType?t++:t+=d(i)}return t},p=function(e,t){for(var n={},r=0,i=e.length;i>r;r++){var o=f.first(e[r]);n[s(o,t)]=e[r]}return n},f={id:s,update:function(t,n){var r=f.unregisterChildren(t);n=e.makeArray(n);var i=t.length;return c.apply(t,[0,i].concat(n)),t.replacements?f.nestReplacements(t):f.nestList(t),r},nestReplacements:function(e){for(var t=0,n={},r=p(e.replacements,n),i=e.replacements.length;t<e.length&&i;){var o=e[t],a=r[u(o,n)];a&&(e.splice(t,d(a),a),i--),t++}e.replacements=[]},nestList:function(e){for(var t=0;t<e.length;){var n=e[t],i=r[s(n)];i?i!==e&&e.splice(t,d(i),i):r[s(n)]=e,t++}},last:function(e){var t=e[e.length-1];return t.nodeType?t:f.last(t)},first:function(e){var t=e[0];return t.nodeType?t:f.first(t)},flatten:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.nodeType?t.push(r):t.push.apply(t,f.flatten(r))}return t},register:function(e,t,n){return e.unregistered=t,e.parentList=n,n===!0?e.replacements=[]:n?(n.replacements.push(e),e.replacements=[]):f.nestList(e),e},unregisterChildren:function(t){var n=[];return e.each(t,function(e){e.nodeType?(t.replacements||delete r[s(e)],n.push(e)):l.apply(n,f.unregister(e))}),n},unregister:function(e){var t=f.unregisterChildren(e);if(e.unregistered){var n=e.unregistered;delete e.unregistered,delete e.replacements,n()}return t},nodeMap:r};return e.view.nodeLists=f,f}),define("can/view/parser",["can/view"],function(e){function t(e){for(var t={},n=e.split(","),r=0;r<n.length;r++)t[n[r]]=!0;return t}function n(e,t){for(var n=0,r=e.length;r>n;n++){var i=e[n];t[i.tokenType].apply(t,i.args)}return e}var r="-:A-Za-z0-9_",i="[a-zA-Z_:]["+r+":.]*",o="\\s*=\\s*",a='"((?:\\\\.|[^"])*)"',s="'((?:\\\\.|[^'])*)'",u="(?:"+o+"(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?",c="\\{\\{[^\\}]*\\}\\}\\}?",l="\\{\\{([^\\}]*)\\}\\}\\}?",d=new RegExp("^<(["+r+"]+)((?:\\s*(?:(?:(?:"+i+")?"+u+")|(?:"+c+")+))*)\\s*(\\/?)>"),p=new RegExp("^<\\/(["+r+"]+)[^>]*>"),f=new RegExp("(?:(?:("+i+")|"+l+")(?:"+o+"(?:(?:"+a+")|(?:"+s+")|([^>\\s]+)))?)","g"),h=new RegExp(l,"g"),g=/<|\{\{/,m=t("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),v=t("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),b=t("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),y=t("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),_=t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),w=t("script,style"),x="start,end,close,attrStart,attrEnd,attrValue,chars,comment,special,done".split(","),C=function(){},A=function(t,r,i){function o(e,t,n,i){if(t=t.toLowerCase(),v[t])for(;_.last()&&b[_.last()];)a("",_.last());y[t]&&_.last()===t&&a("",t),i=m[t]||!!i,r.start(t,i),i||_.push(t),A.parseAttrs(n,r),r.end(t,i)}function a(e,t){var n;if(t)for(n=_.length-1;n>=0&&_[n]!==t;n--);else n=0;if(n>=0){for(var i=_.length-1;i>=n;i--)r.close&&r.close(_[i]);_.length=n}}function s(e,t){r.special&&r.special(t)}if("object"==typeof t)return n(t,r);var u=[];r=r||{},i&&e.each(x,function(t){var n=r[t]||C;r[t]=function(){n.apply(this,arguments)!==!1&&u.push({tokenType:t,args:e.makeArray(arguments)})}});var c,l,f,_=[],O=t;for(_.last=function(){return this[this.length-1]};t;){if(l=!0,_.last()&&w[_.last()])t=t.replace(new RegExp("([\\s\\S]*?)</"+_.last()+"[^>]*>"),function(e,t){return t=t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),r.chars&&r.chars(t),""}),a("",_.last());else if(0===t.indexOf("<!--")?(c=t.indexOf("-->"),c>=0&&(r.comment&&r.comment(t.substring(4,c)),t=t.substring(c+3),l=!1)):0===t.indexOf("</")?(f=t.match(p),f&&(t=t.substring(f[0].length),f[0].replace(p,a),l=!1)):0===t.indexOf("<")?(f=t.match(d),f&&(t=t.substring(f[0].length),f[0].replace(d,o),l=!1)):0===t.indexOf("{{")&&(f=t.match(h),f&&(t=t.substring(f[0].length),f[0].replace(h,s))),l){c=t.search(g);var E=0>c?t:t.substring(0,c);t=0>c?"":t.substring(c),r.chars&&E&&r.chars(E)}if(t===O)throw"Parse Error: "+t;O=t}return a(),r.done(),u};return A.parseAttrs=function(e,t){(null!=e?e:"").replace(f,function(e,n,r,i,o,a){if(r&&t.special(r),n||i||o||a){var s=arguments[3]?arguments[3]:arguments[4]?arguments[4]:arguments[5]?arguments[5]:_[n.toLowerCase()]?n:"";t.attrStart(n||"");for(var u,c=h.lastIndex=0,l=h.exec(s);l;)u=s.substring(c,h.lastIndex-l[0].length),u.length&&t.attrValue(u),t.special(l[1]),c=h.lastIndex,l=h.exec(s);u=s.substr(c,s.length),u&&t.attrValue(u),t.attrEnd(n||"")}})},e.view.parser=A,A}),define("can/view/live",["can/util/library","can/elements","can/view","can/view/node_lists","can/view/parser"],function(e,t,n,r,i){t=t||e.view.elements,r=r||e.view.NodeLists,i=i||e.view.parser;var o=function(t,n,r){var i=!1,o=function(){return i||(i=!0,r(a),e.unbind.call(t,"removed",o)),!0},a={teardownCheck:function(e){return e?!1:o()}};return e.bind.call(t,"removed",o),n(a),a},a=function(e,t,n){return o(e,function(){t.bind("change",n)},function(e){t.unbind("change",n),e.nodeList&&r.unregister(e.nodeList)})},s=function(e){var t,n={};return i.parseAttrs(e,{attrStart:function(e){n[e]="",t=e},attrValue:function(e){n[t]+=e},attrEnd:function(){}}),n},u=[].splice,c=function(e){return e&&e.nodeType},l=function(e){e.childNodes.length||e.appendChild(document.createTextNode(""))},d={list:function(n,i,a,s,c,l){var p,f=l||[n],h=[],g=!1,m=!1,v=function(n,i,o){if(g){var c=document.createDocumentFragment(),d=[],p=[];e.each(i,function(t,n){var i=[];l&&r.register(i,null,!0);var u=e.compute(n+o),f=a.call(s,t,u,i),h="string"==typeof f,g=e.frag(f);g=h?e.view.hookup(g):g;var m=e.makeArray(g.childNodes);l?(r.update(i,m),d.push(i)):d.push(r.register(m)),c.appendChild(g),p.push(u)});var m=o+1;if(f[m]){var v=r.first(f[m]);e.insertBefore(v.parentNode,c,v)}else t.after(1===m?[_]:[r.last(f[m-1])],c);u.apply(f,[m,0].concat(d)),u.apply(h,[o,0].concat(p));for(var b=o+p.length,y=h.length;y>b;b++)h[b](b)}},b=function(t,n,i,o,a){if(g&&(o||!C.teardownCheck(_.parentNode))){0>i&&(i=h.length+i);var s=f.splice(i+1,n.length),u=[];e.each(s,function(e){var t=r.unregister(e);[].push.apply(u,t)}),h.splice(i,n.length);for(var c=i,l=h.length;l>c;c++)h[c](c);a?r.unregister(f):e.remove(e.$(u))}},y=function(t,n,i,o){if(g){i+=1,o+=1;var a,s=f[i],u=e.frag(r.flatten(f[o]));a=i>o?r.last(s).nextSibling:r.first(s);var c=f[0].parentNode;c.insertBefore(u,a);var l=f[o];[].splice.apply(f,[o,1]),[].splice.apply(f,[i,0,l])}},_=document.createTextNode(""),w=function(e){p&&p.unbind&&p.unbind("add",v).unbind("remove",b).unbind("move",y),b({},{length:f.length-1},0,!0,e)},x=function(t,n,r){m||(w(),p=n||[],p.bind&&p.bind("add",v).bind("remove",b).bind("move",y),g=!0,v({},p,0),g=!1,e.batch.afterPreviousEvents(function(){g=!0}))};c=t.getParentNode(n,c);var C=o(c,function(){e.isFunction(i)&&i.bind("change",x)},function(){e.isFunction(i)&&i.unbind("change",x),w(!0)});l?(t.replace(f,_),r.update(f,[_]),l.unregistered=function(){C.teardownCheck(),m=!0}):d.replace(f,_,C.teardownCheck),x({},e.isFunction(i)?i():i)},html:function(n,i,o,s){var u;o=t.getParentNode(n,o),u=a(o,i,function(e,t,n){var i=r.first(d).parentNode;i&&p(t),u.teardownCheck(r.first(d).parentNode)});var d=s||[n],p=function(n){var i="function"==typeof n,a=c(n),s=e.frag(i?"":n),u=e.makeArray(d);l(s),a||i||(s=e.view.hookup(s,o)),u=r.update(d,s.childNodes),i&&n(s.childNodes[0]),t.replace(u,s)};u.nodeList=d,s?s.unregistered=u.teardownCheck:r.register(d,u.teardownCheck),p(i())},replace:function(n,i,o){var a=n.slice(0),s=e.frag(i);return r.register(n,o),"string"==typeof i&&(s=e.view.hookup(s,n[0].parentNode)),r.update(n,s.childNodes),t.replace(a,s),n},text:function(n,i,o,s){var u=t.getParentNode(n,o),c=a(u,i,function(t,n,r){"unknown"!=typeof l.nodeValue&&(l.nodeValue=e.view.toStr(n)),c.teardownCheck(l.parentNode)}),l=document.createTextNode(e.view.toStr(i()));s?(s.unregistered=c.teardownCheck,c.nodeList=s,r.update(s,[l]),t.replace([n],l)):c.nodeList=d.replace([n],l,c.teardownCheck)},setAttributes:function(t,n){var r=s(n);for(var i in r)e.attr.set(t,i,r[i])},attributes:function(n,r,i){var o={},u=function(r){var i,a=s(r);for(i in a){var u=a[i],c=o[i];u!==c&&e.attr.set(n,i,u),delete o[i]}for(i in o)t.removeAttr(n,i);o=a};a(n,r,function(e,t){u(t)}),arguments.length>=3?o=s(i):u(r())},attributePlaceholder:"__!!__",attributeReplace:/__!!__/g,attribute:function(n,r,i){a(n,i,function(e,i){t.setAttr(n,r,u.render())});var o,s=e.$(n);o=e.data(s,"hooks"),o||e.data(s,"hooks",o={});var u,c=t.getAttr(n,r),l=c.split(d.attributePlaceholder),p=[];p.push(l.shift(),l.join(d.attributePlaceholder)),o[r]?o[r].computes.push(i):o[r]={render:function(){var e=0,n=c?c.replace(d.attributeReplace,function(){return t.contentText(u.computes[e++]())}):t.contentText(u.computes[e++]());return n},computes:[i],batchNum:void 0},u=o[r],p.splice(1,0,i()),t.setAttr(n,r,p.join(""))},specialAttribute:function(e,n,r){a(e,r,function(r,i){t.setAttr(e,n,f(i))}),t.setAttr(e,n,f(r()))},simpleAttribute:function(e,n,r){a(e,r,function(r,i){t.setAttr(e,n,i)}),t.setAttr(e,n,r())}};d.attr=d.simpleAttribute,d.attrs=d.attributes,d.getAttributeParts=s;var p=/(\r|\n)+/g,f=function(e){var n=/^["'].*["']$/;return e=e.replace(t.attrReg,"").replace(p,""),n.test(e)?e.substr(1,e.length-2):e};return e.view.live=d,d}),define("can/render",["can/view","can/elements","can/view/live","can/util/string"],function(e,t,n){var r,i=[],o=function(e){var n=t.tagMap[e]||"span";return"span"===n?"@@!!@@":"<"+n+">"+o(n)+"</"+n+">"},a=function(t,n){if("string"==typeof t)return t;if(!t&&0!==t)return"";var r=t.hookup&&function(e,n){t.hookup.call(t,e,n)}||"function"==typeof t&&t;return r?n?"<"+n+" "+e.view.hook(r)+"></"+n+">":(i.push(r),""):""+t},s=function(t,n){return"string"==typeof t||"number"==typeof t?e.esc(t):a(t,n)},u=!1,c=function(){};return e.extend(e.view,{live:n,setupLists:function(){var t,n=e.view.lists;return e.view.lists=function(e,n){return t={list:e,renderer:n},Math.random()},function(){return e.view.lists=n,t}},getHooks:function(){var e=i.slice(0);return r=e,i=[],e},onlytxt:function(e,t){return s(t.call(e))},txt:function(l,d,p,f,h){var g,m,v,b,y=t.tagMap[d]||"span",_=!1,w=c;if(u)g=h.call(f);else{("string"==typeof p||1===p)&&(u=!0);var x=e.view.setupLists();w=function(){v.unbind("change",c)},v=e.compute(h,f,!1),v.bind("change",c),m=x(),g=v(),u=!1,_=v.computeInstance.hasDependencies}if(m)return w(),"<"+y+e.view.hook(function(e,t){n.list(e,m.list,m.renderer,f,t)})+"></"+y+">";if(!_||"function"==typeof g)return w(),(u||2===l||!l?a:s)(g,0===p&&y);var C=t.tagToContentPropMap[d];return 0!==p||C?1===p?(i.push(function(e){n.attributes(e,v,v()),w()}),v()):2===l?(b=p,i.push(function(e){n.specialAttribute(e,b,v),w()}),v()):(b=0===p?C:p,(0===p?r:i).push(function(e){n.attribute(e,b,v),w()}),n.attributePlaceholder):"<"+y+e.view.hook(l&&"object"!=typeof g?function(e,t){n.text(e,v,t),w()}:function(e,t){n.html(e,v,t),w()})+">"+o(y)+"</"+y+">"}}),e}),define("can/view/utils",["can/util/library"],function(){return{isArrayLike:function(e){return e&&e.splice&&"number"==typeof e.length},isObserveLike:function(e){return e instanceof can.Map||e&&!!e._get},emptyHandler:function(){},jsonParse:function(str){return"'"===str[0]?str.substr(1,str.length-2):"undefined"===str?void 0:can.global.JSON?JSON.parse(str):eval("("+str+")")},mixins:{last:function(){return this.stack[this.stack.length-1]},add:function(e){this.last().add(e)},subSectionDepth:function(){return this.stack.length-1}}}}),define("can/view/mustache_helpers",["can/util/library","can/view/utils","can/view/live"],function(e,t,n){n=n||e.view.live;var r=function(n){return t.isObserveLike(n)&&t.isArrayLike(n)&&n.attr("length")?n:e.isFunction(n)?n():n},i={each:function(i,o){var a,s,u,c=r(i),l=[];if(c instanceof e.List)return function(t){var r=[t];r.expression="live.list",e.view.nodeLists.register(r,null,o.nodeList),e.view.nodeLists.update(o.nodeList,[t]);var a=function(e,t,n){return o.fn(o.scope.add({"@index":t}).add(e),o.options,n)};n.list(t,i,a,o.context,t.parentNode,r)};var d=c;if(d&&t.isArrayLike(d))for(u=0;u<d.length;u++)l.push(o.fn(o.scope.add({"@index":u}).add(d[u])));else if(t.isObserveLike(d))for(a=e.Map.keys(d),u=0;u<a.length;u++)s=a[u],l.push(o.fn(o.scope.add({"@key":s}).add(d[s])));else if(d instanceof Object)for(s in d)l.push(o.fn(o.scope.add({"@key":s}).add(d[s])));return l},"@index":function(t,n){n||(n=t,t=0);var r=n.scope.attr("@index");return""+((e.isFunction(r)?r():r)+t)},"if":function(t,n){var i;return i=e.isFunction(t)?e.compute.truthy(t)():!!r(t),i?n.fn(n.scope||this):n.inverse(n.scope||this)},is:function(){var t,n,i=arguments[arguments.length-1];if(arguments.length-2<=0)return i.inverse();for(var o=0;o<arguments.length-1;o++){if(n=r(arguments[o]),n=e.isFunction(n)?n():n,o>0&&n!==t)return i.inverse();t=n}return i.fn()},eq:function(){return i.is.apply(this,arguments)},unless:function(t,n){return i["if"].apply(this,[e.isFunction(t)?e.compute(function(){return!t()}):!t,n])},"with":function(e,t){var n=e;return e=r(e),e?t.fn(n):void 0},log:function(e,t){"undefined"!=typeof console&&console.log&&(t?console.log(e,t.context):console.log(e.context))},data:function(t){var n=2===arguments.length?this:arguments[1];return function(r){e.data(e.$(r),t,n||this.context)}}};return{registerHelper:function(e,t){i[e]=t},getHelper:function(e,t){var n=t.attr("helpers."+e);return n||(n=i[e]),n?{fn:n}:void 0}}}),define("can/view/mustache_core",["can/util/library","can/view/utils","can/view/mustache_helpers","can/view/live","can/elements","can/view/scope","can/view/node_lists"],function(e,t,n,r,i,o,a){r=r||e.view.live,i=i||e.view.elements,o=o||e.view.Scope,a=a||e.view.nodeLists;var s=/((([^'"\s]+?=)?('.*?'|".*?"))|.*?)\s/g,u=/^(?:(?:('.*?'|".*?")|([0-9]+\.?[0-9]*|true|false|null|undefined))|(?:(.+?)=(?:(?:('.*?'|".*?")|([0-9]+\.?[0-9]*|true|false|null|undefined))|(.+))))$/,c=/(?:(?:^|(\r?)\n)(\s*)(\{\{([^\}]*)\}\}\}?)([^\S\n\r]*)($|\r?\n))|(\{\{([^\}]*)\}\}\}?)/g,l=function(e){return e&&"string"==typeof e.get},d=function(e,t,n,r){for(var i=document.createDocumentFragment(),o=0,a=e.length;a>o;o++)p(i,n.fn(t?e.attr(""+o):e[o],r));return i},p=function(e,t){t&&e.appendChild("string"==typeof t?document.createTextNode(t):t)},f=function(e,t,n,r){for(var i="",o=0,a=e.length;a>o;o++)i+=n.fn(t?e.attr(""+o):e[o],r);return i},h=function(t,n,r){var i=n.computeData(t,{isArgument:r,args:[n.attr("."),n]});return e.compute.temporarilyBind(i.compute),i},g=function(e,t){var n=h(e,t,!0);return n.compute.computeInstance.hasDependencies?n.compute:n.initialValue},m=function(e,t,n,r,i,o){i&&(e.fn=v(i,t,n,r)),o&&(e.inverse=v(o,t,n,r))},v=function(t,n,r,i){var o=function(e,r,i){return t(e||n,r,i)};return e.__notObserve(function(t,a,s){void 0===t||t instanceof e.view.Scope||(t=n.add(t)),void 0===a||a instanceof b.Options||(a=r.add(a));var u=o(t,a||r,s||i);return u})},b={expressionData:function(n){var r=[],i={},o=0;return(e.trim(n)+" ").replace(s,function(e,n){var a;o&&(a=n.match(u))?a[1]||a[2]?r.push(t.jsonParse(a[1]||a[2])):i[a[3]]=a[6]?{get:a[6]}:t.jsonParse(a[4]||a[5]):r.push({get:n}),o++}),{name:r.shift(),args:r,hash:i}},makeEvaluator:function(r,i,o,a,s,u,c,p){for(var v,b,y,_=[],w={},x={fn:function(){},inverse:function(){}},C=r.attr("."),A=s.name,O=s.args.length||!e.isEmptyObject(s.hash),E=0,N=s.args.length;N>E;E++){var j=s.args[E];j&&l(j)?_.push(g(j.get,r,!0)):_.push(j)}for(var R in s.hash)l(s.hash[R])?w[R]=g(s.hash[R].get,r):w[R]=s.hash[R];if(l(A)&&(O&&(v=n.getHelper(A.get,i),v||"function"!=typeof C[A.get]||(v={fn:C[A.get]})),!v)){var T=A.get,k=h(A.get,r,!1),S=k.compute;b=k.initialValue,A=k.compute.computeInstance.hasDependencies?S:b,O||void 0!==b?"function"==typeof b&&(v={fn:b}):v=n.getHelper(T,i)}if("^"===a){var M=u;u=c,c=M}if(v)return m(x,r,i,o,u,c),e.simpleExtend(x,{context:C,scope:r,contexts:r,hash:w,nodeList:o,exprData:s}),_.push(x),y=function(){return v.fn.apply(C,_)||""},y.bindOnce=!1,y;if(!a)return A&&A.isComputed?A:function(){return""+(null!=A?A:"")};if("#"===a||"^"===a){m(x,r,i,o,u,c);var I=function(){var n;if(n=e.isFunction(A)&&A.isComputed?A():A,t.isArrayLike(n)){var o=t.isObserveLike(n);return(o?n.attr("length"):n.length)?(p?f:d)(n,o,x,i):x.inverse(r,i)}return n?x.fn(n||r,i):x.inverse(r,i)};return I.bindOnce=!1,I}},makeLiveBindingPartialRenderer:function(t,n){return t=e.trim(t),function(i,o,s){var u=[this];u.expression=">"+t,a.register(u,null,n.directlyNested?s||!0:!0);var c=e.compute(function(){var n,r=t,a=o.attr("partials."+r);if(a)n=a.render?a.render(i,o):a(i,o);else{var s=i.read(r,{isArgument:!0,returnObserveMethods:!0,proxyMethods:!1}).value;s&&(r=s),n=e.view.render(r,i,o)}return e.frag(n)});r.html(this,c,this.parentNode,u)}},makeStringBranchRenderer:function(e,t){var n=_(t),r=e+t;return function(t,i,o,a){var s=t.__cache[r];(e||!s)&&(s=y(t,i,null,e,n,o,a,!0),e||(t.__cache[r]=s));var u=s();return null==u?"":""+u}},makeLiveBindingBranchRenderer:function(t,n,o){var s=_(n);return function(u,c,l,d,p){var f=[this];f.expression=n,a.register(f,null,o.directlyNested?l||!0:!0);var h=y(u,c,f,t,s,d,p,o.tag),g=e.compute(h,null,!1,h.bindOnce===!1?!1:!0);g.bind("change",e.k);var m=g();if("function"==typeof m){var v=e.__clearObserved();m(this),e.__setObserved(v)}else g.computeInstance.hasDependencies?o.attr?r.simpleAttribute(this,o.attr,g):o.tag?r.attributes(this,g):o.text&&"object"!=typeof m?r.text(this,g,this.parentNode,f):r.html(this,g,this.parentNode,f):o.attr?e.attr.set(this,o.attr,m):o.tag?r.setAttributes(this,m):o.text&&"string"==typeof m?this.nodeValue=m:m&&i.replace([this],e.frag(m));g.unbind("change",e.k)}},splitModeFromExpression:function(t,n){t=e.trim(t);var r=t.charAt(0);return"#/{&^>!".indexOf(r)>=0?t=e.trim(t.substr(1)):r=null,"{"===r&&n.node&&(r=null),{mode:r,expression:t}},cleanLineEndings:function(e){return e.replace(c,function(e,t,n,r,i,o,a,s,u,c){o=o||"",t=t||"",n=n||"";var l=w(i||u,{});return s||">{".indexOf(l.mode)>=0?e:"^#!/".indexOf(l.mode)>=0?r+(0!==c&&a.length?t+"\n":""):n+r+o+(n.length||0!==c?t+"\n":"")})},Options:e.view.Scope.extend({init:function(t,n){t.helpers||t.partials||t.tags||(t={helpers:t}),e.view.Scope.prototype.init.apply(this,arguments)}})},y=b.makeEvaluator,_=b.expressionData,w=b.splitModeFromExpression;return b}),define("can/view/bindings",["can/util/library","can/view/mustache_core","can/view/callbacks","can/control","can/view/scope"],function(e,t){var n=function(){var e={"":!0,"true":!0,"false":!1},t=function(t){if(t&&t.getAttribute){var n=t.getAttribute("contenteditable");return e[n]}};return function(e){var n=t(e);return"boolean"==typeof n?n:!!t(e.parentNode)}}(),r=function(e){return"{"===e[0]&&"}"===e[e.length-1]?e.substr(1,e.length-2):e};e.view.attr("can-value",function(t,i){var c,l,d=e.trim(r(t.getAttribute("can-value"))),p=i.scope.computeData(d,{args:[]}).compute;return"input"===t.nodeName.toLowerCase()&&("checkbox"===t.type&&(c=e.attr.has(t,"can-true-value")?t.getAttribute("can-true-value"):!0,l=e.attr.has(t,"can-false-value")?t.getAttribute("can-false-value"):!1),"checkbox"===t.type||"radio"===t.type)?void new a(t,{value:p,trueValue:c,falseValue:l}):"select"===t.nodeName.toLowerCase()&&t.multiple?void new s(t,{value:p}):n(t)?void new u(t,{value:p}):void new o(t,{value:p})});var i={enter:function(e,t,n){return{event:"keyup",handler:function(e){return 13===e.keyCode?n.call(this,e):void 0}}}};e.view.attr(/can-[\w\.]+/,function(n,o){var a=o.attributeName,s=a.substr("can-".length),u=function(i){var s=n.getAttribute(a);if(s){var u=t.expressionData(r(s)),c=o.scope.read(u.name.get,{returnObserveMethods:!0,isArgument:!0,executeAnonymousFunctions:!0}),l=[],d=e.$(this),p=e.viewModel(d[0]),f=o.scope.add({"@element":d,"@event":i,"@viewModel":p,"@scope":o.scope,"@context":o.scope._context});if(!e.isEmptyObject(u.hash)){var h={};e.each(u.hash,function(e,t){if(e&&e.hasOwnProperty("get")){var n=e.get.indexOf("@")?o.scope:f;h[t]=n.read(e.get,{}).value}else h[t]=e}),l.unshift(h)}if(u.args.length)for(var g,m=u.args.length-1;m>=0;m--)if(g=u.args[m],g&&g.hasOwnProperty("get")){var v=g.get.indexOf("@")?o.scope:f;l.unshift(v.read(g.get,{}).value)}else l.unshift(g);return l.length||(l=[o.scope._context,d].concat(e.makeArray(arguments))),c.value.apply(c.parent,l)}};if(i[s]){var c=i[s](o,n,u);u=c.handler,s=c.event}e.bind.call(n,s,u);var l=function(t){t.attributeName!==a||this.getAttribute(a)||(e.unbind.call(n,s,u),e.unbind.call(n,"attributes",l))};e.bind.call(n,"attributes",l)});var o=e.Control.extend({init:function(){"SELECT"===this.element[0].nodeName.toUpperCase()?setTimeout(e.proxy(this.set,this),1):this.set()},"{value} change":"set",set:function(){if(this.element){var e=this.options.value();null==e&&"SELECT"!==this.element[0].nodeName.toUpperCase()&&(e=""),null!=e&&(this.element[0].value=e)}},change:function(){if(this.element){var e=this.element[0];this.options.value(e.value);var t=this.options.value();e.value!==t&&(e.value=t)}}}),a=e.Control.extend({init:function(){this.isCheckbox="checkbox"===this.element[0].type.toLowerCase(),this.check()},"{value} change":"check",check:function(){if(this.isCheckbox){var t=this.options.value(),n=this.options.trueValue||!0;this.element[0].checked=t==n}else{var r=this.options.value()==this.element[0].value?"set":"remove";e.attr[r](this.element[0],"checked",!0)}},change:function(){this.isCheckbox?this.options.value(this.element[0].checked?this.options.trueValue:this.options.falseValue):this.element[0].checked&&this.options.value(this.element[0].value)}}),s=o.extend({init:function(){this.delimiter=";",setTimeout(e.proxy(this.set,this),1)},set:function(){var t=this.options.value();"string"==typeof t?(t=t.split(this.delimiter),this.isString=!0):t&&(t=e.makeArray(t));var n={};e.each(t,function(e){n[e]=!0}),e.each(this.element[0].childNodes,function(e){e.value&&(e.selected=!!n[e.value])})},get:function(){var t=[],n=this.element[0].childNodes;return e.each(n,function(e){e.selected&&e.value&&t.push(e.value)}),t},change:function(){var t=this.get(),n=this.options.value();this.isString||"string"==typeof n?(this.isString=!0,this.options.value(t.join(this.delimiter))):n instanceof e.List?n.attr(t,!0):this.options.value(t)}}),u=e.Control.extend({init:function(){this.set(),this.on("blur","setValue")},"{value} change":"set",set:function(){var e=this.options.value();this.element[0].innerHTML="undefined"==typeof e?"":e},setValue:function(){this.options.value(this.element[0].innerHTML)}})}),define("can/view/mustache",["can/util/library","can/view/scope","can/view","can/scanner","can/compute","can/render","can/view/bindings"],function(e){e.view.ext=".mustache";var t="scope",n="___h4sh",r="{scope:"+t+",options:options}",i="{scope:"+t+",options:options, special: true}",o=t+",options",a=/((([^'"\s]+?=)?('.*?'|".*?"))|.*?)\s/g,s=/^(('.*?'|".*?"|[0-9]+\.?[0-9]*|true|false|null|undefined)|((.+?)=(('.*?'|".*?"|[0-9]+\.?[0-9]*|true|false)|(.+))))$/,u=function(e){return'{get:"'+e.replace(/"/g,'\\"')+'"}'},c=function(e){return e&&"string"==typeof e.get},l=function(t){return t instanceof e.Map||t&&!!t._get},d=function(e){return e&&e.splice&&"number"==typeof e.length},p=function(t,n,r){var i=function(e,r){return t(e||n,r)};return function(t,o){return void 0===t||t instanceof e.view.Scope||(t=n.add(t)),void 0===o||o instanceof e.view.Options||(o=r.add(o)),i(t,o||r)}},f=function(t,n){if(this.constructor!==f){var r=new f(t);return function(e,t){return r.render(e,t)}}return"function"==typeof t?void(this.template={fn:t}):(e.extend(this,t),void(this.template=this.scanner.scan(this.text,this.name)))};e.Mustache=e.global.Mustache=f,f.prototype.render=function(t,n){return t instanceof e.view.Scope||(t=new e.view.Scope(t||{})),n instanceof e.view.Options||(n=new e.view.Options(n||{})),n=n||{},this.template.fn.call(t,t,n)},e.extend(f.prototype,{scanner:new e.view.Scanner({text:{start:"",scope:t,options:",options: options",argNames:o},tokens:[["returnLeft","{{{","{{[{&]"],["commentFull","{{!}}","^[\\s\\t]*{{!.+?}}\\n"],["commentLeft","{{!","(\\n[\\s\\t]*{{!|{{!)"],["escapeFull","{{}}","(^[\\s\\t]*{{[#/^][^}]+?}}\\n|\\n[\\s\\t]*{{[#/^][^}]+?}}\\n|\\n[\\s\\t]*{{[#/^][^}]+?}}$)",function(e){return{before:/^\n.+?\n$/.test(e)?"\n":"",content:e.match(/\{\{(.+?)\}\}/)[1]||""}}],["escapeLeft","{{"],["returnRight","}}}"],["right","}}"]],helpers:[{name:/^>[\s]*\w*/,fn:function(t,n){var r=e.trim(t.replace(/^>\s?/,"")).replace(/["|']/g,"");return"can.Mustache.renderPartial('"+r+"',"+o+")"}},{name:/^\s*data\s/,fn:function(e,n){var r=e.match(/["|'](.*)["|']/)[1];return"can.proxy(function(__){can.data(can.$(__),'"+r+"', this.attr('.')); }, "+t+")"}},{name:/\s*\(([\$\w]+)\)\s*->([^\n]*)/,fn:function(e){var n=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,r=e.match(n);return"can.proxy(function(__){var "+r[1]+"=can.$(__);with("+t+".attr('.')){"+r[2]+"}}, this);"}},{name:/^.*$/,fn:function(t,c){var l=!1,d={content:"",startTxt:!1,startOnlyTxt:!1,end:!1};if(t=e.trim(t),t.length&&(l=t.match(/^([#^\/]|else$)/))){switch(l=l[0]){case"#":case"^":c.specialAttribute?d.startOnlyTxt=!0:(d.startTxt=!0,d.escaped=0);break;case"/":return d.end=!0,d.content+='return ___v1ew.join("");}}])',d}t=t.substring(1)}if("else"!==l){var p,f=[],h=[],g=0;d.content+="can.Mustache.txt(\n"+(c.specialAttribute?i:r)+",\n"+(l?'"'+l+'"':"null")+",",(e.trim(t)+" ").replace(a,function(e,t){g&&(p=t.match(s))?p[2]?f.push(p[0]):h.push(p[4]+":"+(p[6]?p[6]:u(p[5]))):f.push(u(t)),g++}),d.content+=f.join(","),h.length&&(d.content+=",{"+n+":{"+h.join(",")+"}}")}switch(l&&"else"!==l&&(d.content+=",[\n\n"),l){case"^":case"#":d.content+="{fn:function("+o+"){var ___v1ew = [];";break;case"else":d.content+='return ___v1ew.join("");}},\n{inverse:function('+o+"){\nvar ___v1ew = [];";break;default:d.content+=")"}return l||(d.startTxt=!0,d.end=!0),d}}]})});for(var h=e.view.Scanner.prototype.helpers,g=0;g<h.length;g++)f.prototype.scanner.helpers.unshift(h[g]);return f.txt=function(t,r,i){for(var o,a,s=t.scope,u=t.options,h=[],g={fn:function(){},inverse:function(){}},m=s.attr("."),v=!0,b=3;b<arguments.length;b++){var y=arguments[b];if(r&&e.isArray(y))g=e.extend.apply(e,[g].concat(y));else if(y&&y[n]){o=y[n];for(var _ in o)c(o[_])&&(o[_]=f.get(o[_].get,t,!1,!0))}else y&&c(y)?h.push(f.get(y.get,t,!1,!0,!0)):h.push(y)}if(c(i)){var w=i.get;i=f.get(i.get,t,h.length,!1),v=w===i}if(g.fn=p(g.fn,s,u),g.inverse=p(g.inverse,s,u),"^"===r){var x=g.fn;g.fn=g.inverse,g.inverse=x}return(a=v&&"string"==typeof i&&f.getHelper(i,u)||e.isFunction(i)&&!i.isComputed&&{fn:i})?(e.extend(g,{context:m,scope:s,contexts:s,hash:o}),h.push(g),function(){return a.fn.apply(m,h)||""}):function(){var t;t=e.isFunction(i)&&i.isComputed?i():i;var n,o,a,s=h.length?h:[t],u=!0,c=[];if(r)for(n=0;n<s.length;n++)a=s[n],o="undefined"!=typeof a&&l(a),d(a)?"#"===r?u=u&&!!(o?a.attr("length"):a.length):"^"===r&&(u=u&&!(o?a.attr("length"):a.length)):u="#"===r?u&&!!a:"^"===r?u&&!a:u;if(u){if("#"===r){if(d(t)){var p=l(t);for(n=0;n<t.length;n++)c.push(g.fn(p?t.attr(""+n):t[n]));return c.join("")}return g.fn(t||{})||""}return"^"===r?g.inverse(t||{})||"":""+(null!=t?t:"")}return""}},f.get=function(t,n,r,i,o){var a=n.scope.attr("."),s=n.options||{};if(r){if(f.getHelper(t,s))return t;if(n.scope&&e.isFunction(a[t]))return a[t]}var u=n.scope.computeData(t,{isArgument:i,args:[a,n.scope]}),c=u.compute;e.compute.temporarilyBind(c);var l=u.initialValue;f.getHelper(t,s);return o||void 0!==l&&u.scope===n.scope||!f.getHelper(t,s)?c.computeInstance.hasDependencies?c:l:t},f.resolve=function(t){return l(t)&&d(t)&&t.attr("length")?t:e.isFunction(t)?t():t},e.view.Options=e.view.Scope.extend({init:function(t,n){t.helpers||t.partials||t.tags||(t={helpers:t}),e.view.Scope.prototype.init.apply(this,arguments)}}),f._helpers={},f.registerHelper=function(e,t){this._helpers[e]={name:e,fn:t}},f.getHelper=function(e,t){var n;return t&&(n=t.attr("helpers."+e)),n?{fn:n}:this._helpers[e]},f.render=function(t,n,r){if(!e.view.cached[t]){var i=e.__clearReading(),o=n.attr(t);o&&(t=o),e.__setReading(i)}return e.view.render(t,n,r)},f.safeString=function(e){return{toString:function(){return e}}},f.renderPartial=function(t,n,r){var i=r.attr("partials."+t);return i?i.render?i.render(n,r):i(n,r):e.Mustache.render(t,n,r)},e.each({"if":function(t,n){var r;return r=e.isFunction(t)?e.compute.truthy(t)():!!f.resolve(t),r?n.fn(n.contexts||this):n.inverse(n.contexts||this)},is:function(){var t,n,r=arguments[arguments.length-1];if(arguments.length-2<=0)return r.inverse();for(var i=0;i<arguments.length-1;i++){if(n=f.resolve(arguments[i]),n=e.isFunction(n)?n():n,i>0&&n!==t)return r.inverse();t=n}return r.fn()},eq:function(){return f._helpers.is.fn.apply(this,arguments)},unless:function(t,n){return f._helpers["if"].fn.apply(this,[e.isFunction(t)?e.compute(function(){return!t()}):!t,n])},each:function(t,n){var r,i,o,a=f.resolve(t),s=[];if(e.view.lists&&(a instanceof e.List||t&&t.isComputed&&void 0===a))return e.view.lists(t,function(e,t){return n.fn(n.scope.add({"@index":t}).add(e))});if(t=a,t&&d(t)){for(o=0;o<t.length;o++)s.push(n.fn(n.scope.add({"@index":o}).add(t[o])));return s.join("")}if(l(t)){for(r=e.Map.keys(t),o=0;o<r.length;o++)i=r[o],s.push(n.fn(n.scope.add({"@key":i}).add(t[i])));return s.join("")}if(t instanceof Object){for(i in t)s.push(n.fn(n.scope.add({"@key":i}).add(t[i])));return s.join("")}},"with":function(e,t){var n=e;return e=f.resolve(e),e?t.fn(n):void 0},log:function(e,t){"undefined"!=typeof console&&console.log&&(t?console.log(e,t.context):console.log(e.context))},"@index":function(t,n){n||(n=t,t=0);var r=n.scope.attr("@index");return""+((e.isFunction(r)?r():r)+t)}},function(e,t){f.registerHelper(t,e)}),e.view.register({suffix:"mustache",contentType:"x-mustache-template",script:function(e,t){return"can.Mustache(function("+o+") { "+new f({text:t,name:e}).template.out+" })"},renderer:function(e,t){return f({text:t,name:e})}}),e.mustache.registerHelper=e.proxy(e.Mustache.registerHelper,e.Mustache),e.mustache.safeString=e.Mustache.safeString,e}),define("can/observe",["can/util/library","can/map","can/list","can/compute"],function(e){return e.Observe=e.Map,e.Observe.startBatch=e.batch.start,e.Observe.stopBatch=e.batch.stop,e.Observe.triggerBatch=e.batch.trigger,e}),define("can/component",["can/util/library","can/view/callbacks","can/elements","can/control","can/observe","can/view/mustache","can/view/bindings"],function(e,t,n){var r=/^(dataViewId|class|id)$/i,i=/\{([^\}]+)\}/g,o=e.Component=e.Construct.extend({setup:function(){if(e.Construct.setup.apply(this,arguments),e.Component){var t=this,n=this.prototype.scope||this.prototype.viewModel;if(this.Control=a.extend(this.prototype.events),n&&("object"!=typeof n||n instanceof e.Map)?n.prototype instanceof e.Map&&(this.Map=n):this.Map=e.Map.extend(n||{}),this.attributeScopeMappings={},e.each(this.Map?this.Map.defaults:{},function(e,n){"@"===e&&(t.attributeScopeMappings[n]=n)}),this.prototype.template)if("function"==typeof this.prototype.template){var r=this.prototype.template;this.renderer=function(){return e.view.frag(r.apply(null,arguments))}}else this.renderer=e.view.mustache(this.prototype.template);e.view.tag(this.prototype.tag,function(e,n){new t(e,n)})}}},{setup:function(i,o){var a,s,u={},c=this,l=("undefined"==typeof this.leakScope?!1:!this.leakScope)&&this.template,d={},p=this.scope||this.viewModel,f={},h=[],g=function(){
for(var e=0,t=h.length;t>e;e++)h[e]()};if(e.each(this.constructor.attributeScopeMappings,function(t,n){u[n]=i.getAttribute(e.hyphenate(t))}),e.each(e.makeArray(i.attributes),function(n,i){var s=e.camelize(n.nodeName.toLowerCase()),l=n.value;if(!(c.constructor.attributeScopeMappings[s]||r.test(s)||t.attr(n.nodeName))){if("{"===l[0]&&"}"===l[l.length-1])l=l.substr(1,l.length-2);else if("legacy"!==o.templateType)return void(u[s]=l);var p=o.scope.computeData(l,{args:[]}),g=p.compute,m=function(t,n){f[s]=(f[s]||0)+1,a.attr(s,n),e.batch.afterPreviousEvents(function(){--f[s]})};g.bind("change",m),u[s]=g(),g.computeInstance.hasDependencies?(h.push(function(){g.unbind("change",m)}),d[s]=p):g.unbind("change",m)}}),this.constructor.Map)a=new this.constructor.Map(u);else if(p instanceof e.Map)a=p;else if(e.isFunction(p)){var m=p.call(this,u,o.scope,i);a=m instanceof e.Map?m:m.prototype instanceof e.Map?new m(u):new(e.Map.extend(m))(u)}var v={};e.each(d,function(e,t){v[t]=function(n,r){f[t]||e.compute(r)},a.bind(t,v[t])}),e.isEmptyObject(this.constructor.attributeScopeMappings)&&"legacy"===o.templateType||e.bind.call(i,"attributes",function(t){var n=e.camelize(t.attributeName);d[n]||r.test(n)||a.attr(n,i.getAttribute(t.attributeName))}),this.scope=this.viewModel=a,e.data(e.$(i),"scope",this.scope),e.data(e.$(i),"viewModel",this.scope);var b=l?this.scope:o.scope.add(this.scope),y={helpers:{}};e.each(this.helpers||{},function(t,n){e.isFunction(t)&&(y.helpers[n]=function(){return t.apply(a,arguments)})}),h.push(function(){e.each(v,function(e,t){a.unbind(t,v[t])})}),this._control=new this.constructor.Control(i,{scope:this.scope,viewModel:this.scope,destroy:g});var _=e.view.nodeLists.register([],void 0,!0);h.push(function(){e.view.nodeLists.unregister(_)}),this.constructor.renderer?(y.tags||(y.tags={}),y.tags.content=function w(t,r){var i=o.subtemplate||r.subtemplate;if(i){delete y.tags.content;var a=l&&i===o.subtemplate?o:r;if(r.parentNodeList){var s=i(a.scope,a.options,r.parentNodeList);n.replace([t],s)}else e.view.live.replace([t],i(a.scope,a.options));y.tags.content=w}},s=this.constructor.renderer(b,o.options.add(y),_)):s="legacy"===o.templateType?e.view.frag(o.subtemplate?o.subtemplate(b,o.options.add(y)):""):o.subtemplate?o.subtemplate(b,o.options.add(y),_):document.createDocumentFragment(),e.appendChild(i,s),e.view.nodeLists.update(_,i.childNodes)}}),a=e.Control.extend({_lookup:function(e){return[e.scope,e,window]},_action:function(t,n,r){var o,a;if(i.lastIndex=0,o=i.test(t),r||!o){if(o){a=e.compute(function(){var r,o=t.replace(i,function(t,i){var o;return"scope"===i||"viewModel"===i?(r=n.scope,""):(i=i.replace(/^(scope|^viewModel)\./,""),o=e.compute.read(n.scope,i.split("."),{isArgument:!0}).value,void 0===o&&(o=e.getObject(i)),"string"==typeof o?o:(r=o,""))}),a=o.split(/\s+/g),s=a.pop();return{processor:this.processors[s]||this.processors.click,parts:[o,a.join(" "),s],delegate:r||void 0}},this);var s=function(e,n){r._bindings.control[t](r.element),r._bindings.control[t]=n.processor(n.delegate||r.element,n.parts[2],n.parts[1],t,r)};return a.bind("change",s),r._bindings.readyComputes[t]={compute:a,handler:s},a()}return e.Control._action.apply(this,arguments)}}},{setup:function(t,n){return this.scope=n.scope,this.viewModel=n.viewModel,e.Control.prototype.setup.call(this,t,n)},off:function(){this._bindings&&e.each(this._bindings.readyComputes||{},function(e){e.compute.unbind("change",e.handler)}),e.Control.prototype.off.apply(this,arguments),this._bindings.readyComputes={}},destroy:function(){"function"==typeof this.options.destroy&&this.options.destroy.apply(this,arguments)}}),s=e.$;return s.fn&&(s.fn.scope=s.fn.viewModel=function(){return e.viewModel.apply(e,[this].concat(e.makeArray(arguments)))}),o}),define("can",["can/util/library","can/control/route","can/model","can/view/mustache","can/component"],function(e){return e}),function(e){function t(){}function n(e){a=[e]}function r(e,t,n){return e&&e.apply(t.context||t,n)}function i(e){return/\?/.test(e)?"&":"?"}function o(o){function f(e){K++||(Y(),z&&(E[$]={s:[e]}),V&&(e=V.apply(o,[e])),r(F,o,[e,w,o]),r(U,o,[o,w]))}function k(e){K++||(Y(),z&&e!=x&&(E[$]=e),r(D,o,[o,e]),r(U,o,[o,e]))}o=e.extend({},j,o);var S,M,I,P,L,F=o.success,D=o.error,U=o.complete,V=o.dataFilter,q=o.callbackParameter,H=o.callback,B=o.cache,z=o.pageCache,G=o.charset,$=o.url,Q=o.data,W=o.timeout,K=0,Y=t;return A&&A(function(e){e.done(F).fail(D),F=e.resolve,D=e.reject}).promise(o),o.abort=function(){!K++&&Y()},r(o.beforeSend,o,[o])===!1||K?o:($=$||c,Q=Q?"string"==typeof Q?Q:e.param(Q,o.traditional):c,$+=Q?i($)+Q:c,q&&($+=i($)+encodeURIComponent(q)+"=?"),!B&&!z&&($+=i($)+"_"+(new Date).getTime()+"="),$=$.replace(/=\?(&|$)/,"="+H+"$1"),z&&(S=E[$])?S.s?f(S.s[0]):k(S):(C[H]=n,I=e(_)[0],I.id=p+N++,G&&(I[u]=G),R&&R.version()<11.6?(P=e(_)[0]).text="document.getElementById('"+I.id+"')."+g+"()":I[s]=s,T&&(I.htmlFor=I.id,I.event=h),I[m]=I[g]=I[v]=function(e){if(!I[b]||!/i/.test(I[b])){try{I[h]&&I[h]()}catch(t){}e=a,a=0,e?f(e[0]):k(l)}},I.src=$,Y=function(e){L&&clearTimeout(L),I[v]=I[m]=I[g]=null,O[y](I),P&&O[y](P)},O[d](I,M=O.firstChild),P&&O[d](P,M),L=W>0&&setTimeout(function(){k(x)},W)),o)}var a,s="async",u="charset",c="",l="error",d="insertBefore",p="_jqjsp",f="on",h=f+"click",g=f+l,m=f+"load",v=f+"readystatechange",b="readyState",y="removeChild",_="<script>",w="success",x="timeout",C=window,A=e.Deferred,O=e("head")[0]||document.documentElement,E={},N=0,j={callback:p,url:location.href},R=C.opera,T=!!e("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;o.setup=function(t){e.extend(j,t)},e.jsonp=o}(jQuery),define("lib/jquery-jsonp/src/jquery.jsonp",function(){}),define("scripts/components/price-generator/models/product-offers-model",["jquery","can","lib/jquery-jsonp/src/jquery.jsonp"],function(e,t){var n=t.Model({marketSegment:"COM",countryCode:"US",landscape:"prod",timeout:2e4,rootNode:"productOffering",requestCount:0,findAll:function(t){var n,r=t.countryCode||this.countryCode,i=t.landscape||this.landsscape;if(!t)throw new Error("Params not defined");if(!t.productKeys)throw new Error("ProductKeys not defined in params!");if(!e.isArray(t.productKeys))throw new Error("ProductKeys not an Array!");return n=this.getCountryQueryString(this.getUpperCaseValue(r)),n+="&"+this.getMarketSegmentQueryString(t.marketSegment),n+="&"+this.getProductKeyQueryString(t.productKeys),t.promoCodes&&e.isArray(t.promoCodes)&&t.promoCodes.length&&(n+="&"+this.getPromoCodesQueryString(t.promoCodes)),t.languageCode&&(n+="&language="+t.languageCode),e.jsonp({type:"GET",url:this.getUrl(r,i)+"?callback=?",callback:this.getCallbackName(),data:n,dataType:"jsonp",timeout:this.timeout})},getUpperCaseValue:function(t){return e.isValue(t)?t.toUpperCase():void 0},getUrl:function(e,t){var n="/svcs/offers/products.json",r=this.isNorthAmerica(e)?"//store1.":"//store2.";switch(t){case"stage":r+="stage.";break;case"pre-stage":r+="qa04.";break;case"dev":r+="dev04."}return r+="adobe.com"+n},getCallbackName:function(){return"productOffers"+this.requestCount++},isNorthAmerica:function(e){return"US"===e||"CA"===e||"MX"===e},getProductKeyQueryString:function(e){return"product_key="+e.join("&product_key=")},getCountryQueryString:function(e){return"countryCode="+(e?e:this.countryCode)},getMarketSegmentQueryString:function(e){return"marketSegment="+(e?e:this.marketSegment)},getPromoCodesQueryString:function(e){return"promotion_code="+e.join(",")},models:function(e){return this.model(e[this.rootNode])}},{});return n}),define("scripts/components/common/util/number-util",[],function(){return{formatByMask:function(e,t){if(!e||isNaN(+t))return t;t="-"===e.charAt(0)?-t:+t;var n=0>t?t=-t:0,r=e.match(/[^\d\-\+#]/g),i=r&&r[r.length-1]||".",o=r&&r[1]&&r[0]||",";e=e.split(i),t=t.toFixed(e[1]&&e[1].length),t=+t+"";var a=e[1]&&e[1].lastIndexOf("0"),s=t.split(".");(!s[1]||s[1]&&s[1].length<=a)&&(t=(+t).toFixed(a+1));var u=e[0].split(o);e[0]=u.join("");var c=e[0]&&e[0].indexOf("0");if(c>-1)for(;s[0].length<e[0].length-c;)s[0]="0"+s[0];else 0===+s[0]&&(s[0]="");t=t.split("."),t[0]=s[0];var l=u[1]&&u[u.length-1].length;if(l){for(var d=t[0],p="",f=d.length%l,h=0,g=d.length;g>h;h++)p+=d.charAt(h),(h-f+1)%l===0&&g-l>h&&(p+=o);t[0]=p}return t[1]=e[1]&&t[1]?i+t[1]:"",(n?"-":"")+t[0]+t[1]}}}),define("can-proxy",["can/util/library","can/construct"],function(e,t){var n=(e.isFunction,e.isArray),r=e.makeArray,i=function(e){var t,i=r(arguments);return e=i.shift(),n(e)||(e=[e]),t=this,function(){for(var o,a,s=i.concat(r(arguments)),u=e.length,c=0;u>c;c++)a=e[c],a&&(o="string"==typeof a,s=(o?t[a]:a).apply(t,s||[]),u-1>c&&(s=!n(s)||s._use_call?[s]:s));return s}};e.Construct.proxy=e.Construct.prototype.proxy=i;for(var o=[e.Map,e.Control,e.Model],a=0;a<o.length;a++)o[a]&&(o[a].proxy=i);return e}),define("price-generator",["jquery","can","scripts/components/price-generator/models/product-offers-model","scripts/components/common/util/number-util","can-proxy"],function(e,t,n,r){var i=t.Construct({defaults:{landscape:"prod",countryCode:"US",marketSegment:"COM",promoCodes:[]}},{init:function(t){this.options=e.extend({},this.constructor.defaults,t)},getPrices:function(t){var r=e.extend({},this.options,t),i=new e.Deferred;return n.findAll(r).done(this.proxy("productPriceSuccess",i)).fail(this.proxy("productPriceFailed",i)),i.promise()},productPriceSuccess:function(t,n){var r=this.getPriceObjects(n);e.isEmptyObject(r)?t.reject({errorType:"NO_PRICE_DATA_FOUND"}):t.resolve(r)},productPriceFailed:function(e,t){e.reject({errorType:"INVALID_PRICE_REQUEST"})},getPriceObjects:function(t){var n=t.attr("currency"),r=t.attr("productOffers"),i={},o=this;try{e.each(r,function(e,t){i[t.attr("productKey")]=o.getProductPrices(n,t)})}catch(a){}return i},getProductPrices:function(t,n){var r=this,i={};return e.each(n.attr("priceMap"),function(e,n){i[n.attr("priceTypeKey")]=r.getPriceParts(t,n.attr("price"))}),i},getPriceParts:function(e,t){var n=t.display_price,r=t.priceWithoutTax,i=t.priceWithTax,o=this.getOriginalPrice(t),a=(e.formatString,{price:n,priceWithoutTax:r,priceWithTax:i,formattedPrice:this.getFormattedPrice(e,n),formattedPriceWithoutTax:this.getFormattedPrice(e,r),formattedPriceWithTax:this.getFormattedPrice(e,i),symbol:this.getCurrencySymbol(e),decimalDelim:this.getDecimalDelim(e),thousandDelim:this.getThousandsDelim(e),includesTax:t.attr("includes_tax")});return o&&(a.originalPrice=o,a.formattedOriginalPrice=this.getFormattedPrice(e,o),a.originalPriceWithTax=t.orginalPriceWithTax,a.formattedOriginalPriceWithTax=this.getFormattedPrice(e,t.orginalPriceWithTax),a.originalPriceWithoutTax=t.orginalPriceWithoutTax,a.formattedOriginalPriceWithoutTax=this.getFormattedPrice(e,t.orginalPriceWithoutTax)),a},getOriginalPrice:function(e){return e.includes_tax?e.orginalPriceWithTax:e.orginalPriceWithoutTax},getFormattedPrice:function(e,t){var n=this.getCurrencySymbol(e),i=e.formatString,o=this.getNumberMask(e),a=r.formatByMask(o,t);return i.replace(/'.*'/,"SYMBOL").replace(/#.*0/,a).replace(/SYMBOL/,n)},getCurrencySymbol:function(e){var t=e.formatString;return t.match(/'(.*?)'/)[1]},getNumberMask:function(t){var n,r=t.formatString,i=e.trim(r.replace(/'.*'/,"")),o=t.usePrecision;return o||(n="."===this.getThousandsDelim(t)?",":".",i+=n),i},getDecimalDelim:function(e){var t=e.formatString,n=t.match(/0.(?=0)/);return n?n[0].replace(/0/,""):""},getThousandsDelim:function(e){var t=e.formatString,n=t.match(/#.(?=#)/);return n[0].replace(/#/,"")}});return i}),define("scripts/components/common/util/lang",["jquery"],function(e){return e.extend({type:function(e){var t={undefined:"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"};return t[typeof e]||t[Object.prototype.toString.call(e)]||(e?"object":"null")},isBoolean:function(e){return"boolean"==typeof e},isNull:function(e){return null===e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isString:function(e){return"string"==typeof e},isUndefined:function(e){return"undefined"==typeof e},isValue:function(e){var t=this.type(e);switch(t){case"number":return isFinite(e);case"null":case"undefined":return!1;default:return!!t}},isDate:function(e){return"date"===this.type(e)},timeStampToDate:function(e){var t,n,r=new RegExp("^([\\d]{4})-([\\d]{2})-([\\d]{2})T([\\d]{2}):([\\d]{2}):([\\d]{2}\\.?[\\d]{0,3})([\\+\\-])([\\d]{2}):([\\d]{2})$"),i=r.exec(e);return null!=i?(t=60*parseInt(i[8],10)+parseInt(i[9],10),"-"===i[7]&&(t=-t),n=new Date(Date.UTC(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10),parseInt(i[6],10))-60*t*1e3)):null},ISO8601DateString:function(e){function t(e){return 10>e?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z"},isPrimitive:function(e){var t=this.type(e);switch(t){case"undefined":case"number":case"boolean":case"string":return!0;default:return!1}},hasKey:function(e,t){return t in e},some:Array.prototype.some?function(e,t,n){return Array.prototype.some.call(e,t,n)}:function(e,t,n){var r,i=e.length;for(r=0;i>r;r+=1)if(t.call(n,e[r],r,e))return!0;return!1},hash:function(e,t){var n,r={},i=e.length,o=t&&t.length;for(n=0;i>n;n+=1)r[e[n]]=o&&o>n?t[n]:!0;return r},createNs:function(t){var n,r;return r=t.split("."),n=window[r[0]]=window[r[0]]||{},e.each(r.slice(1),function(e,t){n=n[t]=n[t]||{}}),n},rgb2hex:function(e){function t(e){return isNaN(e)?"00":n[(e-e%16)/16]+n[e%16]}var n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],r=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+t(r[1])+t(r[2])+t(r[3])},localToGlobal:function(e,t,n){var r={},i=e.offset();return r.x=Math.floor(t+i.left),r.y=Math.floor(n+i.top),r},globalToLocal:function(e,t,n){var r={},i=e.offset();return r.x=Math.floor(t-i.left),r.y=Math.floor(n-i.top),r}}),jQuery}),define("scripts/components/common/util/locale-map-util",["jquery","can","scripts/components/common/util/lang"],function(e,t){var n=t.Construct({LOCALE_MAP:{AT:["de_at"],AU:["en_au"],BE:["en_be","fr_be","nl_be"],BG:["en_xeu"],BR:["pt_br"],CA:["en_us","fr_ca"],CH:["de_ch","fr_ch","it_ch"],CY:["en_xeu"],CZ:["cs_cz"],DE:["de_de"],DK:["da_dk"],EE:["en_xeu"],ES:["es_es"],FI:["fi_fi"],FR:["fr_fr"],GB:["en_gb"],GR:["en_xeu"],HU:["en_xeu"],IE:["en_ie"],IT:["it_it"],JP:["ja_jp"],LT:["en_xeu"],LU:["en_lu","fr_lu","de_lu"],LV:["en_xeu"],MT:["en_xeu"],MX:["en_us"],NL:["nl_nl"],NO:["no_no"],NZ:["en_nz"],PL:["pl_pl"],PT:["pt_pt"],RO:["en_xeu"],SE:["sv_se"],SI:["en_xeu"],SK:["en_xeu"],US:["en_us"],ZA:["en_xap"]},getValidLocaleCode:function(t,n){var r=t.toLowerCase()+"_"+n.toLowerCase(),i=e.inArray(r,this.LOCALE_MAP[n]);return-1===i?this.LOCALE_MAP[n][0]:r}},{});return n}),define("scripts/components/common/util/can-string-util",["can"],function(e){var t=/_|-/,n=/\=\=/,r=/([A-Z]+)([A-Z][a-z])/g,i=/([a-z\d])([A-Z])/g,o=/([a-z\d])([A-Z])/g,a=/\{([^\}]+)\}/g,s=/"/g,u=/'/g,c=/(\-|_)+(.)?/g,l=/[a-z][A-Z]/g,d=function(e,t,n){var r=e[t];return void 0===r&&n===!0&&(r=e[t]={}),r},p=function(e){return/^f|^o/.test(typeof e)},f=function(e){var t=null===e||void 0===e||isNaN(e)&&""+e=="NaN";return""+(t?"":e)};return e.extend(e,{esc:function(e){return f(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(s,"&#34;").replace(u,"&#39;")},getObject:function(t,n,r){var i,o,a,s,u=t?t.split("."):[],c=u.length,l=0;if(n=e.isArray(n)?n:[n||window],s=n.length,!c)return n[0];for(l;s>l;l++){for(i=n[l],a=void 0,o=0;c>o&&p(i);o++)a=i,i=d(a,u[o]);if(void 0!==a&&void 0!==i)break}if(r===!1&&void 0!==i&&delete a[u[o-1]],r===!0&&void 0===i)for(i=n[0],o=0;c>o&&p(i);o++)i=d(i,u[o],!0);return i},capitalize:function(e,t){return e.charAt(0).toUpperCase()+e.slice(1)},camelize:function(e){return f(e).replace(c,function(e,t,n){return n?n.toUpperCase():""})},hyphenate:function(e){return f(e).replace(l,function(e,t){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})},underscore:function(e){return e.replace(n,"/").replace(r,"$1_$2").replace(i,"$1_$2").replace(o,"_").toLowerCase()},sub:function(t,n,r){var i=[];return t=t||"",i.push(t.replace(a,function(t,o){var a=e.getObject(o,n,r===!0?!1:void 0);return void 0===a||null===a?(i=null,""):p(a)&&i?(i.push(a),""):""+a})),null===i?i:i.length<=1?i[0]:i},replacer:a,undHash:t}),e}),define("can-super",["can/util/library","can/construct"],function(e,t){var n=e.isFunction,r=/xyz/.test(function(){return this.xyz})?/\b_super\b/:/.*/,i=["get","set"],o=function(e,t,n){return function(){var r,i=this._super;return this._super=e[t],r=n.apply(this,arguments),this._super=i,r}};return e.Construct._defineProperty=function(t,r,a,s){var u=Object.getOwnPropertyDescriptor(r,a);u&&e.each(i,function(e){n(u[e])&&n(s[e])?s[e]=o(u,e,s[e]):n(s[e])||(s[e]=u[e])}),Object.defineProperty(t,a,s)},e.Construct._overwrite=function(e,t,i,a){e[i]=n(a)&&n(t[i])&&r.test(a)?o(t,i,a):a},e}),define("scripts/components/product-configurator/models/product-configuration-model",["jquery","can","scripts/components/common/util/locale-map-util","scripts/components/common/util/lang","scripts/components/common/util/can-string-util","can-super"],function(e,t,n){var r=t.Map({domains:{prod:"store1.adobe.com",stage:"store1.stage.adobe.com","pre-stage":"store1.qa04.adobe.com",dev:"store1.dev04.adobe.com"},rootNode:"InlineConfigurator",findAll:function(t){var n=new e.Deferred,r=this.getServiceUrl(t),i=this;return e.ajax({url:r,type:"GET",dataType:"jsonp",data:this.getRequestParams(t),jsonpCallback:this.getCallbackName(t.productKey)}).then(function(e){var t=i.processData(e[i.rootNode]),r=new i(t);n.resolve(r)}).fail(function(e,t,r){n.reject({errorType:"PRODUCT_DATA_NOT_FOUND"})}),n.promise()},getRequestParams:function(e){var t={marketSegment:e.marketSegment,countryCode:e.countryCode,locale:this.getLocale(e)};return e.promotionCodes&&(t.promotion_code=e.promotionCodes.toString()),t},getServiceUrl:function(e){var t=this.domains[e.landscape||"prod"];return"//"+t+"/svcs/products"+e.productKey+"/configurator.json"},getLocale:function(e){return n.getValidLocaleCode(e.languageCode,e.countryCode)},getCallbackName:function(e){return"config"+e.replace(/\//g,"_")},processData:function(e){var t={productKey:e.productKey,currency:e.currency,configurationType:e.configurationType,skus:this.normalizeResultSet(e.skus),createDate:new Date(e.create_date),priceDisplay:e.price_display};return e.qualifyingProducts&&(t.qualifyingProducts=this.normalizeResultSet(e.qualifyingProducts)),t},normalizeResultSet:function(t){var n=[],r=this.normalizeColumnNames(t.columns),i=t.data;return e.each(i,function(t,i){for(var o in i.data)"null"===i.data[o]&&(i.data[o]=null);n.push(e.hash(r,i.data))}),n},normalizeColumnNames:function(n){var r=[];return e.each(n,function(e,n){r.push(t.camelize(n.toLowerCase()))}),r}},{init:function(){this.attr("filteredSkus",new t.List([])),this.setupFilteredSkuData()},setupFilteredSkuData:function(){this.attr("filteredSkus").replace(this.skus.slice(0)),this.filterHistory=[]},filterProductData:function(e,t){this.filterAppliedPreviously(e)&&this.revertDataToEarlierState(e),this.applyFilter(e,t),this.saveFilter(e,t)},getSkusWithDistinctFieldValues:function(t){for(var n,r,i=[],o={},a=this.attr("filteredSkus"),s=a.length,u=0;s>u;u++)n=a[u],r=n[t],""===r||null===r||e.hasKey(o,r)||(o[r]=1,i.push(n));return i},applyFilter:function(t,n){var r=this.attr("filteredSkus"),i=function(e){return e[t]===n};e.isValue(n)&&(r=e.grep(r,i),this.attr("filteredSkus").replace(r))},saveFilter:function(e,t){var n={fieldName:e,value:t,data:this.filteredSkus.slice(0)};this.filterHistory.push(n)},filterAppliedPreviously:function(t){var n=function(e){return e.fieldName===t};return e.grep(this.filterHistory,n).length>0},revertDataToEarlierState:function(e){var t=this.filterHistory;this.rollbackFilters(e),t.length?this.attr("filteredSkus").replace(t[t.length-1].data):this.attr("filteredSkus").replace(this.skus.slice(0))},rollbackFilters:function(e){var t,n=this.filterHistory;do t=n.pop();while(t.fieldName!==e)},resetAllFilters:function(){this.setupFilteredSkuData()}});return r}),define("text",["module"],function(e){"use strict";var t,n,r,i,o,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,l=c&&location.protocol&&location.protocol.replace(/\:/,""),d=c&&location.hostname,p=c&&(location.port||void 0),f={},h=e.config&&e.config()||{};return t={version:"2.0.14",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=a[t];try{e=new ActiveXObject(n)}catch(r){}if(e){a=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,o=e.lastIndexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!a||o>1)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,r=n||t,o=r.indexOf("!"),-1!==o&&(i="strip"===r.substring(o+1),r=r.substring(0,o),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var o,a,s,u=t.xdRegExp.exec(e);return u?(o=u[2],a=u[3],a=a.split(":"),s=a[1],a=a[0],!(o&&o!==n||a&&a.toLowerCase()!==r.toLowerCase()||(s||a)&&s!==i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,h.isBuild&&(f[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText)return void r();h.isBuild=i&&i.isBuild;var o=t.parseName(e),a=o.moduleName+(o.ext?"."+o.ext:""),s=n.toUrl(a),u=h.useXhr||t.useXhr;return 0===s.indexOf("empty:")?void r():void(!c||u(s,l,d,p)?t.get(s,function(n){t.finishLoad(e,o.strip,n,r)},function(e){r.error&&r.error(e)}):n([a],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,r)}))},write:function(e,n,r,i){if(f.hasOwnProperty(n)){var o=t.jsEscape(f[n]);r.asModule(e+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,n,r,i,o){var a=t.parseName(n),s=a.ext?"."+a.ext:"",u=a.moduleName+s,c=r.toUrl(a.moduleName+s)+".js";t.load(u,r,function(n){var r=function(e){return i(c,e)};r.asModule=function(e,t){return i.asModule(e,c,t)},t.write(e,u,r,o)},o)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");"\ufeff"===i[0]&&(i=i.substring(1)),t(i)}catch(o){r&&r(o)}}):"xhr"===h.env||!h.env&&t.createXhr()?t.get=function(e,n,r,i){var o,a=t.createXhr();if(a.open("GET",e,!0),i)for(o in i)i.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),i[o]);h.onXhr&&h.onXhr(a,e),a.onreadystatechange=function(t){var i,o;4===a.readyState&&(i=a.status||0,i>399&&600>i?(o=new Error(e+" HTTP status: "+i),o.xhr=a,r&&r(o)):n(a.responseText),h.onXhrComplete&&h.onXhrComplete(a,e))},a.send(null)}:"rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,r,i="utf-8",o=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),i)),u="";try{for(n=new java.lang.StringBuffer,r=s.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=s.readLine());)n.append(a),n.append(r);u=String(n.toString())}finally{s.close()}t(u)}:("xpconnect"===h.env||!h.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,a,s,u={};o&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(s,1,0,!1),a=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),a.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),u),a.close(),n.close(),t(u.value)}catch(c){throw new Error((s&&s.path||"")+": "+c)}}),t}),define("text!scripts/components/product-configurator/views/filter-control-view.ejs",[],function(){return'<label class="control-label col-sm-3"><%= displayName %></label>\n<div class="col-sm-9">\n\n<%\n   if( dataProvider.attr( \'length\' ) > 1 ){\n%>\n    <select class="form-control">\n     <% \n\n     list( dataProvider, function( item, index ){ \n         var name = item.attr( labelField ),\n               value = item.attr( fieldName );\n       %>\n        \n      <option value="<%= value %>"<% if( value === defaultValue ){ %> selected="selected" <%}%>><%== name %></option>\n       \n      <% }); %>\n     \n  </select>\n<%\n }\n else {\n%>\n    <p class="form-control-static"><%== dataProvider.attr( \'0.\' + labelField ) %></p>\n<%\n   }\n%>\n</div>'}),define("can-ejs",["can/util/library","can/view","can/util/string","can/compute","can/scanner","can/render"],function(e){var t=e.extend,n=function(e){if(this.constructor!==n){var r=new n(e);return function(e,t){return r.render(e,t)}}return"function"==typeof e?void(this.template={fn:e}):(t(this,e),void(this.template=this.scanner.scan(this.text,this.name)))};return e.EJS=n,n.prototype.render=function(e,t){return e=e||{},this.template.fn.call(e,e,new n.Helpers(e,t||{}))},t(n.prototype,{scanner:new e.view.Scanner({text:{outStart:"with(_VIEW) { with (_CONTEXT) {",outEnd:"}}",argNames:"_CONTEXT,_VIEW",context:"this"},tokens:[["templateLeft","<%%"],["templateRight","%>"],["returnLeft","<%=="],["escapeLeft","<%="],["commentLeft","<%#"],["left","<%"],["right","%>"],["returnRight","%>"]],helpers:[{name:/\s*\(([\$\w]+)\)\s*->([^\n]*)/,fn:function(e){var t=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,n=e.match(t);return"can.proxy(function(__){var "+n[1]+"=can.$(__);"+n[2]+"}, this);"}}],transform:function(e){return e.replace(/<%([\s\S]+?)%>/gm,function(e,t){var n,r,i=[];t.replace(/[{}]/gm,function(e,t){i.push([e,t])});do for(n=!1,r=i.length-2;r>=0;r--)if("{"===i[r][0]&&"}"===i[r+1][0]){i.splice(r,2),n=!0;break}while(n);if(i.length>=2){var o,a=["<%"],s=0;for(r=0;o=i[r];r++)a.push(t.substring(s,s=o[1])),"{"===o[0]&&r<i.length-1||"}"===o[0]&&r>0?a.push("{"===o[0]?"{ %><% ":" %><% }"):a.push(o[0]),++s;return a.push(t.substring(s),"%>"),a.join("")}return"<%"+t+"%>"})}})}),n.Helpers=function(e,n){this._data=e,this._extras=n,t(this,n)},n.Helpers.prototype={list:function(t,n){e.each(t,function(e,r){n(e,r,t)})},each:function(t,n){e.isArray(t)?this.list(t,n):e.view.lists(t,n)}},e.view.register({suffix:"ejs",script:function(e,t){return"can.EJS(function(_CONTEXT,_VIEW) { "+new n({text:t,name:e}).template.out+" })"},renderer:function(e,t){return n({text:t,name:e})}}),e.ejs.Helpers=n.Helpers,e}),define("scripts/components/product-configurator/filter-control",["jquery","can","text!./views/filter-control-view.ejs","scripts/components/common/util/lang","can-proxy","can-ejs"],function(e,t,n){var r=t.Control({},{init:function(){this.name=this.options.name},initialize:function(){this.createViewModel(),this.setDataProvider(),this.renderView()},createViewModel:function(){this.viewModel=new t.Map({displayName:this.options.displayName,fieldName:this.options.fieldName,labelField:this.options.labelField,defaultValue:"",dataProvider:new t.List([])})},setDataProvider:function(){var e=this.options.model,t=this.options.fieldName,n=this.options.sortFunction,r=this.viewModel.attr("dataProvider"),i=e.getSkusWithDistinctFieldValues(t);n&&i.sort(n),this.setDefaultValue(i),r.replace(i),this.setVisible()},setDefaultValue:function(t){var n,r,i=this.options.fieldName,o=this.options.defaultValue,a=function(e){return e[i]===r};if(e.isArray(o)){n=o.length;for(var s=0;n>s&&(r=o[s],!e.some(t,a));s++);}else r=o;this.viewModel.attr("defaultValue",r)},setVisible:function(){var e=this.viewModel.attr("dataProvider"),t=e.length;switch(t){case 0:this.element.hide();break;case 1:this.showSingleValueState();break;default:this.element.show()}},showSingleValueState:function(){var e=this.options.fieldName,t=this.viewModel.attr("dataProvider.0."+e);this.options.hideSingleValue||!this.isValidValue(t)?this.element.hide():this.element.show()},isValidValue:function(e){return"N/A"!==e&&"NONE"!==e&&""!==e&&"null"!==e&&null!==e},renderView:function(){t.view.ejs("viewEJS",n),this.element.html(t.view("viewEJS",this.viewModel))},applyFilter:function(){this.options.configurator.filterProductData(this)},getValue:function(){return this.element.find("select").val()||this.viewModel.dataProvider.attr("0."+this.options.fieldName)},getFieldName:function(){return this.options.fieldName},"select change":function(){this.viewModel.attr("defaultValue",this.getValue()),this.applyFilter()}});return r}),define("scripts/components/product-configurator/filter-control-factory",["jquery","can","./filter-control"],function(e,t,n){var r=t.Construct({DISTRIBUTION:"DISTRIBUTION",UPGRADE:"UPGRADE",VERSION:"VERSION",SERVICE_COMMITMENT:"SERVICE_COMMITMENT",PLATFORM:"PLATFORM",LANGUAGE:"LANGUAGE",FULFILLMENT:"FULFILLMENT",TERM_TYPE:"TERM_TYPE",QUANTITY:"QUANTITY",controllerProps:{DISTRIBUTION:{fieldName:"distributionMethod",labelField:"distributionMethodLabel",displayName:"I want to buy:",sortFunction:function(e,t){return t.price-e.price},hideSingleValue:!1,defaultValue:"FULL",name:"DISTRIBUTION"},UPGRADE:{fieldName:"upgradeGroup",labelField:"name",valueField:"productKey",displayName:"Upgrade from:",truncate:!0,hideSingleValue:!1,defaultValue:null,name:"UPGRADE"},VERSION:{fieldName:"versionString",labelField:"versionString",displayName:"Version:",hideSingleValue:!0,defaultValue:null,name:"VERSION"},SERVICE_COMMITMENT:{fieldName:"serviceCommitment",labelField:"serviceCommitmentLabel",displayName:"Plan:",hideSingleValue:!1,defaultValue:"YEAR",name:"SERVICE_COMMITMENT"},PLATFORM:{fieldName:"platformCode",labelField:"platformLabel",displayName:"Platform:",hideSingleValue:!1,defaultValue:"Windows",name:"PLATFORM"},LANGUAGE:{fieldName:"languageCode",labelField:"language",displayName:"Language:",hideSingleValue:!1,defaultValue:"EN",name:"LANGUAGE"},FULFILLMENT:{fieldName:"fulfillmentMethodType",labelField:"fulfillmentMethodTypeLabel",displayName:"Delivery:",sortFunction:function(e,t){var n=e.fulfillmentMethodTypeLabel.toLowerCase(),r=t.fulfillmentMethodTypeLabel.toLowerCase();return r>n?-1:n>r?1:0},hideSingleValue:!0,defaultValue:"SOFTGOOD",name:"FULFILLMENT"},TERM_TYPE:{fieldName:"termType",labelField:"termTypeLabel",displayName:"Plan:",hideSingleValue:!0,defaultValue:"ANNUAL",name:"TERM_TYPE"},QUANTITY:{fieldName:"quantity",labelField:"quantity",displayName:"Quantity:",hideSingleValue:!1,defaultValue:1,name:"QUANTITY"}},controlMixins:{UPGRADE:{setDataProvider:function(){var e=this.options.model,t=this.options.fieldName,n=this.viewModel.attr("dataProvider"),r=e.getSkusWithDistinctFieldValues(t),i=r.length>1?e.attr("qualifyingProducts"):[];n.replace(i),this.setVisible()}},QUANTITY:{setDataProvider:function(){for(var e=this.options.model,t=this.viewModel.attr("dataProvider"),n=e.getSkusWithDistinctFieldValues("maxCartQty"),r=1===n.length?n[0].maxCartQty:9,i=[],o=1;r>=o;o++)i.push({quantity:String(o)});this.viewModel.attr("defaultValue",this.options.defaultValue),t.replace(i),this.setVisible()},applyFilter:function(){this.options.configurator.skusFiltered()}}}},{init:function(e){this.configurator=e},getFilterControl:function(t,r){var i=this.getFilterControlOptions(t,r),o="form-group configurator-control "+t.toLowerCase(),a=e('<div class="'+o+'">'),s=new n(a,i);return this.addControlMixins(s),s.initialize(),s},getFilterControlOptions:function(t,n){var r=this.constructor.controllerProps[t],i=n[r.fieldName]||{};
return e.extend(r,i),r.model=this.configurator.model,r.configurator=this.configurator,r},addControlMixins:function(t){var n=t.name,r=this.constructor.controlMixins[n];e.extend(t,r)}});return r}),define("lib/canjs/amd/can/control/plugin",["jquery","can/util/library","can/control"],function(e,t){e=e||window.$;var n,r=function(e,t){var r=e.constructor.pluginName||e.constructor._shortName;for(n=0;n<t.length;n++)if("string"==typeof t[n]?r===t[n]:e instanceof t[n])return!0;return!1},i=t.makeArray,o=t.Control.setup;return t.Control.setup=function(){if(this!==t.Control){var e=this.pluginName||this._fullName;"can_control"!==e&&this.plugin(e),o.apply(this,arguments)}},e.fn.extend({controls:function(){var e,n,o=i(arguments),a=[];return this.each(function(){if(e=t.$(this).data("controls"))for(var i=0;i<e.length;i++)n=e[i],(!o.length||r(n,o))&&a.push(n)}),a},control:function(e){return this.controls.apply(this,arguments)[0]}}),t.Control.plugin=function(n){var r=this;e.fn[n]||(e.fn[n]=function(n){var o,a=i(arguments),s="string"==typeof n&&e.isFunction(r.prototype[n]),u=a[0];return this.each(function(){var e=t.$(this).control(r);e?s?o=e[u].apply(e,a.slice(1)):e.update.apply(e,a):r.newInstance.apply(r,[this].concat(a))}),void 0!==o?o:this})},t.Control.prototype.update=function(e){t.extend(this.options,e),this.on()},t}),define("product-configurator",["jquery","can","scripts/components/product-configurator/models/product-configuration-model","scripts/components/product-configurator/filter-control-factory","lib/canjs/amd/can/control/plugin","can-proxy"],function(e,t,n,r){var i=t.Control({pluginName:"anyware_product_configurator",defaults:{countryCode:"US",languageCode:"en",marketSegment:"COM",landscape:"prod",containerClass:"form-horizontal",filterControlOptions:{distributionMethod:{displayName:"I want to buy:",defaultValue:["SUB_NEW","FULL"],hideSingleValue:!0},upgradeGroup:{displayName:"Upgrade from:",defaultValue:null,hideSingleValue:!0},versionString:{displayName:"Version:",defaultValue:null,hideSingleValue:!0},serviceCommitment:{displayName:"Plan:",defaultValue:"YEAR",hideSingleValue:!0},platformCode:{displayName:"Platform:",defaultValue:["Mac/Win","Windows"],hideSingleValue:!0},languageCode:{displayName:"Language:",defaultValue:["MULT","EN"],hideSingleValue:!0},fulfillmentMethod:{displayName:"Delivery:",defaultValue:"SOFTGOOD",hideSingleValue:!0},termType:{displayName:"Plan:",defaultValue:"ANNUAL",hideSingleValue:!0},quantity:{displayName:"Quantity:",defaultValue:1,hideSingleValue:!0}}},MISSING_ARGUMENTS_ERROR:"Configurator: You must provide either a productModel or productKey plugin options"},{init:function(){var e=this.options;if(!e.productKey&&!e.model)throw new Error(this.constructor.MISSING_ARGUMENTS_ERROR);this.element.addClass(this.options.containerClass),this.currentFilterIndex=0,e.model?this.dataLoaded(e.model):this.loadProductData()},loadProductData:function(){n.findAll(this.options).then(this.proxy("dataLoaded")).fail(this.proxy("dataLoadError"))},dataLoaded:function(e){this.model=e,this.setupListeners(),this.setupFilterControls(),this.beginConfigutation()},dataLoadError:function(e){this.element.trigger("errorEvent",e)},beginConfigutation:function(){var e=this.filterControls[0];this.filterProductData(e)},filterProductData:function(e){this.model.filterAppliedPreviously(e.getFieldName())&&this.setCurrentFilterIndex(e.name),this.isCurrentFilter(e.name)&&(this.applyFilter(e),this.resetRemainingFilters())},applyFilter:function(e){this.model.filterProductData(e.getFieldName(),e.getValue()),this.currentFilterIndex++},resetRemainingFilters:function(){for(var e,t=this.filterControls,n=t.length,r=this.currentFilterIndex,i=t[r],o=r;n>o;o++)e=t[o],e.setDataProvider();i&&i.applyFilter()},getSelectedSku:function(){var e,t=this.model.attr("filteredSkus");return 1===t.length&&(e=t.attr("0"),e.attr("quantity",this.getQuantity())),e},getQuantity:function(){return this.filterControls[this.getFilterIndex("QUANTITY")].getValue()},isCurrentFilter:function(e){return this.currentFilterIndex===this.getFilterIndex(e)},setCurrentFilterIndex:function(e){this.currentFilterIndex=this.getFilterIndex(e)},getFilterIndex:function(e){for(var t=this.filterControls,n=t.length,r=0;n>r;r++)if(t[r].name===e)return r;return-1},setupListeners:function(){this.model.attr("filteredSkus").bind("change",this.proxy("skusFiltered"))},skusFiltered:function(){var e,t=this.model.attr("filteredSkus.length");1===t&&(e=this.getSelectedSku()),this.element.trigger("modelChanged",{numberOfSkus:t,model:this.model,selectedSku:e})},setupFilterControls:function(){for(var e,t=this.getFilterControlList(),n=new r(this),i=this.filterControls=[],o=this.options.filterControlOptions,a=0;a<t.length;a++)e=n.getFilterControl(t[a],o),this.element.append(e.element),i.push(e)},getFilterControlList:function(){var e,t=this.dataIncludesQualifyingProducts(),n=this.getConfigurationType(),i=r;switch(n){case"STANDARD":e=t?[i.DISTRIBUTION,i.UPGRADE,i.SERVICE_COMMITMENT,i.PLATFORM,i.LANGUAGE,i.FULFILLMENT,i.QUANTITY]:[i.DISTRIBUTION,i.VERSION,i.SERVICE_COMMITMENT,i.PLATFORM,i.LANGUAGE,i.FULFILLMENT,i.QUANTITY];break;case"SUBSCRIPTION":e=[i.TERM_TYPE,i.QUANTITY]}return e},dataIncludesQualifyingProducts:function(){var e=this.model.attr("qualifyingProducts");return e&&e.length>0},getConfigurationType:function(){var e=this.model.attr("configurationType");return"SSP_SUBSCRIPTION"===e?"SUBSCRIPTION":"STANDARD"}});return i}),define("OpenAjax/hub/hub",[],function(){var e=window.OpenAjax||{};return e.hub||(window.OpenAjax=e,e.hub=function(){var e={},t="org.openajax.hub.";return{implementer:"http://openajax.org",implVersion:"2.0.7",specVersion:"2.0",implExtraData:{},libraries:e,registerLibrary:function(n,r,i,o){e[n]={prefix:n,namespaceURI:r,version:i,extraData:o},this.publish(t+"registerLibrary",e[n])},unregisterLibrary:function(n){this.publish(t+"unregisterLibrary",e[n]),delete e[n]}}}(),e.hub.Error={BadParameters:"OpenAjax.hub.Error.BadParameters",Disconnected:"OpenAjax.hub.Error.Disconnected",Duplicate:"OpenAjax.hub.Error.Duplicate",NoContainer:"OpenAjax.hub.Error.NoContainer",NoSubscription:"OpenAjax.hub.Error.NoSubscription",NotAllowed:"OpenAjax.hub.Error.NotAllowed",WrongProtocol:"OpenAjax.hub.Error.WrongProtocol",IncompatBrowser:"OpenAjax.hub.Error.IncompatBrowser"},e.hub.SecurityAlert={LoadTimeout:"OpenAjax.hub.SecurityAlert.LoadTimeout",FramePhish:"OpenAjax.hub.SecurityAlert.FramePhish",ForgedMsg:"OpenAjax.hub.SecurityAlert.ForgedMsg"},e.hub._debugger=function(){e.hub.enableDebug},e.hub.ManagedHub=function(t){if(!t||!t.onPublish||!t.onSubscribe)throw new Error(e.hub.Error.BadParameters);if(this._p=t,this._onUnsubscribe=t.onUnsubscribe?t.onUnsubscribe:null,this._scope=t.scope||window,t.log){var n=this;this._log=function(r){try{t.log.call(n._scope,"ManagedHub: "+r)}catch(i){e.hub._debugger()}}}else this._log=function(){};this._subscriptions={c:{},s:null},this._containers={},this._seq=0,this._active=!0,this._isPublishing=!1,this._pubQ=[]},e.hub.ManagedHub.prototype.subscribeForClient=function(t,n,r){if(this._assertConn(),this._invokeOnSubscribe(n,t))return this._subscribe(n,this._sendToClient,this,{c:t,sid:r});throw new Error(e.hub.Error.NotAllowed)},e.hub.ManagedHub.prototype.unsubscribeForClient=function(e,t){this._unsubscribe(t),this._invokeOnUnsubscribe(e,t)},e.hub.ManagedHub.prototype.publishForClient=function(e,t,n){this._assertConn(),this._publish(t,n,e)},e.hub.ManagedHub.prototype.disconnect=function(){this._active=!1;for(var e in this._containers)this.removeContainer(this._containers[e])},e.hub.ManagedHub.prototype.getContainer=function(e){var t=this._containers[e];return t?t:null},e.hub.ManagedHub.prototype.listContainers=function(){var e=[];for(var t in this._containers)e.push(this._containers[t]);return e},e.hub.ManagedHub.prototype.addContainer=function(t){this._assertConn();var n=t.getClientID();if(this._containers[n])throw new Error(e.hub.Error.Duplicate);this._containers[n]=t},e.hub.ManagedHub.prototype.removeContainer=function(t){var n=t.getClientID();if(!this._containers[n])throw new Error(e.hub.Error.NoContainer);t.remove(),delete this._containers[n]},e.hub.ManagedHub.prototype.subscribe=function(t,n,r,i,o){function a(t,i,a,u){if(s._invokeOnPublish(t,i,u,null))try{n.call(r,t,i,o)}catch(c){e.hub._debugger(),s._log("caught error from onData callback to Hub.subscribe(): "+c.message)}}if(this._assertConn(),this._assertSubTopic(t),!n)throw new Error(e.hub.Error.BadParameters);if(r=r||window,!this._invokeOnSubscribe(t,null))return void this._invokeOnComplete(i,r,null,!1,e.hub.Error.NotAllowed);var s=this,u=this._subscribe(t,a,r,o);return this._invokeOnComplete(i,r,u,!0),u},e.hub.ManagedHub.prototype.publish=function(e,t){this._assertConn(),this._assertPubTopic(e),this._publish(e,t,null)},e.hub.ManagedHub.prototype.unsubscribe=function(t,n,r){if(this._assertConn(),!t)throw new Error(e.hub.Error.BadParameters);this._unsubscribe(t),this._invokeOnUnsubscribe(null,t),this._invokeOnComplete(n,r,t,!0)},e.hub.ManagedHub.prototype.isConnected=function(){return this._active},e.hub.ManagedHub.prototype.getScope=function(){return this._scope},e.hub.ManagedHub.prototype.getSubscriberData=function(t){this._assertConn();var n=t.split("."),r=n.pop(),i=this._getSubscriptionObject(this._subscriptions,n,0,r);if(i)return i.data;throw new Error(e.hub.Error.NoSubscription)},e.hub.ManagedHub.prototype.getSubscriberScope=function(t){this._assertConn();var n=t.split("."),r=n.pop(),i=this._getSubscriptionObject(this._subscriptions,n,0,r);if(i)return i.scope;throw new Error(e.hub.Error.NoSubscription)},e.hub.ManagedHub.prototype.getParameters=function(){return this._p},e.hub.ManagedHub.prototype._sendToClient=function(e,t,n,r){this.isConnected()&&this._invokeOnPublish(e,t,r,n.c)&&n.c.sendToClient(e,t,n.sid)},e.hub.ManagedHub.prototype._assertConn=function(){if(!this.isConnected())throw new Error(e.hub.Error.Disconnected)},e.hub.ManagedHub.prototype._assertPubTopic=function(t){if(!t||""===t||-1!=t.indexOf("*")||-1!=t.indexOf("..")||"."==t.charAt(0)||"."==t.charAt(t.length-1))throw new Error(e.hub.Error.BadParameters)},e.hub.ManagedHub.prototype._assertSubTopic=function(t){if(!t)throw new Error(e.hub.Error.BadParameters);for(var n=t.split("."),r=n.length,i=0;r>i;i++){var o=n[i];if(""===o||-1!=o.indexOf("*")&&"*"!=o&&"**"!=o)throw new Error(e.hub.Error.BadParameters);if("**"==o&&r-1>i)throw new Error(e.hub.Error.BadParameters)}},e.hub.ManagedHub.prototype._invokeOnComplete=function(t,n,r,i,o){if(t)try{n=n||window,t.call(n,r,i,o)}catch(a){e.hub._debugger(),this._log("caught error from onComplete callback: "+a.message)}},e.hub.ManagedHub.prototype._invokeOnPublish=function(t,n,r,i){try{return this._p.onPublish.call(this._scope,t,n,r,i)}catch(o){e.hub._debugger(),this._log("caught error from onPublish callback to constructor: "+o.message)}return!1},e.hub.ManagedHub.prototype._invokeOnSubscribe=function(t,n){try{return this._p.onSubscribe.call(this._scope,t,n)}catch(r){e.hub._debugger(),this._log("caught error from onSubscribe callback to constructor: "+r.message)}return!1},e.hub.ManagedHub.prototype._invokeOnUnsubscribe=function(t,n){if(this._onUnsubscribe){var r=n.slice(0,n.lastIndexOf("."));try{this._onUnsubscribe.call(this._scope,r,t)}catch(i){e.hub._debugger(),this._log("caught error from onUnsubscribe callback to constructor: "+i.message)}}},e.hub.ManagedHub.prototype._subscribe=function(e,t,n,r){var i=e+"."+this._seq,o={scope:n,cb:t,data:r,sid:this._seq++},a=e.split(".");return this._recursiveSubscribe(this._subscriptions,a,0,o),i},e.hub.ManagedHub.prototype._recursiveSubscribe=function(e,t,n,r){var i=t[n];n==t.length?(r.next=e.s,e.s=r):("undefined"==typeof e.c&&(e.c={}),"undefined"==typeof e.c[i]?(e.c[i]={c:{},s:null},this._recursiveSubscribe(e.c[i],t,n+1,r)):this._recursiveSubscribe(e.c[i],t,n+1,r))},e.hub.ManagedHub.prototype._publish=function(e,t,n){if(this._isPublishing)return void this._pubQ.push({t:e,d:t,p:n});for(this._safePublish(e,t,n);this._pubQ.length>0;){var r=this._pubQ.shift();this._safePublish(r.t,r.d,r.p)}},e.hub.ManagedHub.prototype._safePublish=function(e,t,n){this._isPublishing=!0;var r=e.split(".");this._recursivePublish(this._subscriptions,r,0,e,t,n),this._isPublishing=!1},e.hub.ManagedHub.prototype._recursivePublish=function(e,t,n,r,i,o){if("undefined"!=typeof e){var a;if(n==t.length?a=e:(this._recursivePublish(e.c[t[n]],t,n+1,r,i,o),this._recursivePublish(e.c["*"],t,n+1,r,i,o),a=e.c["**"]),"undefined"!=typeof a)for(var s=a.s;s;){var u=s.scope,c=s.cb,l=s.data;"string"==typeof c&&(c=u[c]),c.call(u,r,i,l,o),s=s.next}}},e.hub.ManagedHub.prototype._unsubscribe=function(t){var n=t.split("."),r=n.pop();if(!this._recursiveUnsubscribe(this._subscriptions,n,0,r))throw new Error(e.hub.Error.NoSubscription)},e.hub.ManagedHub.prototype._recursiveUnsubscribe=function(e,t,n,r){if("undefined"==typeof e)return!1;if(n<t.length){var i=e.c[t[n]];if(!i)return!1;if(this._recursiveUnsubscribe(i,t,n+1,r),!i.s){for(var o in i.c)return!0;delete e.c[t[n]]}}else{for(var a=e.s,s=null,u=!1;a;){if(r==a.sid){u=!0,a==e.s?e.s=a.next:s.next=a.next;break}s=a,a=a.next}if(!u)return!1}return!0},e.hub.ManagedHub.prototype._getSubscriptionObject=function(e,t,n,r){if("undefined"!=typeof e){if(n<t.length){var i=e.c[t[n]];return this._getSubscriptionObject(i,t,n+1,r)}for(var o=e.s;o;){if(r==o.sid)return o;o=o.next}}return null},e.hub._hub=new e.hub.ManagedHub({onSubscribe:function(e,t){return!0},onPublish:function(e,t,n,r){return!0}}),e.hub.subscribe=function(t,n,r,i){return"string"==typeof n&&(r=r||window,n=r[n]||null),e.hub._hub.subscribe(t,n,r,null,i)},e.hub.unsubscribe=function(t){return e.hub._hub.unsubscribe(t)},e.hub.publish=function(t,n){e.hub._hub.publish(t,n)},e.hub.registerLibrary("OpenAjax","http://openajax.org/hub","2.0",{})),e}),define("OpenAjax/containers/inline/inline",["OpenAjax/hub/hub"],function(e){return e.hub.InlineContainer=function(t,n,r){function i(t,n,r,i,o){if(t)try{n=n||window,t.call(n,r,i,o)}catch(a){e.hub._debugger(),h._log("caught error from onComplete callback: "+a.message)}}function o(){for(var e in p)t.unsubscribeForClient(this,p[e].h);p=[],f=0,d=!1}function a(){if(!d)throw new Error(e.hub.Error.Disconnected)}function s(t){if(null==t||""===t||-1!=t.indexOf("*")||-1!=t.indexOf("..")||"."==t.charAt(0)||"."==t.charAt(t.length-1))throw new Error(e.hub.Error.BadParameters)}function u(t){if(!t)throw new Error(e.hub.Error.BadParameters);for(var n=t.split("."),r=n.length,i=0;r>i;i++){var o=n[i];if(""===o||-1!=o.indexOf("*")&&"*"!=o&&"**"!=o)throw new Error(e.hub.Error.BadParameters);if("**"==o&&r-1>i)throw new Error(e.hub.Error.BadParameters)}}function c(t){var n=p[t];if(n)return n;throw new Error(e.hub.Error.NoSubscription)}if(!(t&&n&&r&&r.Container&&r.Container.onSecurityAlert))throw new Error(e.hub.Error.BadParameters);var l=r.Container.scope||window,d=!1,p=[],f=0,h=null;if(r.Container.log)var g=function(t){try{r.Container.log.call(l,"InlineContainer::"+n+": "+t)}catch(i){e.hub._debugger()}};else g=function(){};this._init=function(){t.addContainer(this)},this.getHub=function(){return t},this.sendToClient=function(t,n,r){if(d){var i=p[r];try{i.cb.call(i.sc,t,n,i.d)}catch(o){e.hub._debugger(),h._log("caught error from onData callback to HubClient.subscribe(): "+o.message)}}},this.remove=function(){d&&o()},this.isConnected=function(){return d},this.getClientID=function(){return n},this.getPartnerOrigin=function(){return d?window.location.protocol+"//"+window.location.hostname:null},this.getParameters=function(){return r},this.connect=function(t,n,o){if(d)throw new Error(e.hub.Error.Duplicate);if(d=!0,h=t,r.Container.onConnect)try{r.Container.onConnect.call(l,this)}catch(a){e.hub._debugger(),g("caught error from onConnect callback to constructor: "+a.message)}i(n,o,t,!0)},this.disconnect=function(t,n,a){if(!d)throw new Error(e.hub.Error.Disconnected);if(o(),r.Container.onDisconnect)try{r.Container.onDisconnect.call(l,this)}catch(s){e.hub._debugger(),g("caught error from onDisconnect callback to constructor: "+s.message)}i(n,a,t,!0)},this.subscribe=function(n,r,o,s,c){if(a(),u(n),!r)throw new Error(e.hub.Error.BadParameters);var l=""+f++,d=!1,h=null;try{var g=t.subscribeForClient(this,n,l);d=!0}catch(m){l=null,h=m.message}return o=o||window,d&&(p[l]={h:g,cb:r,sc:o,d:c}),i(s,o,l,d,h),l},this.publish=function(e,n){a(),s(e),t.publishForClient(this,e,n)},this.unsubscribe=function(n,r,o){if(a(),"undefined"==typeof n||null===n)throw new Error(e.hub.Error.BadParameters);var s=p[n];if(!s)throw new Error(e.hub.Error.NoSubscription);t.unsubscribeForClient(this,s.h),delete p[n],i(r,o,n,!0)},this.getSubscriberData=function(e){return a(),c(e).d},this.getSubscriberScope=function(e){return a(),c(e).sc},this._init()},e.hub.InlineHubClient=function(t){if(!(t&&t.HubClient&&t.HubClient.onSecurityAlert&&t.InlineHubClient&&t.InlineHubClient.container))throw new Error(e.hub.Error.BadParameters);var n=t.InlineHubClient.container,r=t.HubClient.scope||window;if(t.HubClient.log)var i=function(i){try{t.HubClient.log.call(r,"InlineHubClient::"+n.getClientID()+": "+i)}catch(o){e.hub._debugger()}};else i=function(){};this._log=i,this.connect=function(e,t){n.connect(this,e,t)},this.disconnect=function(e,t){n.disconnect(this,e,t)},this.getPartnerOrigin=function(){return n.getPartnerOrigin()},this.getClientID=function(){return n.getClientID()},this.subscribe=function(e,t,r,i,o){return n.subscribe(e,t,r,i,o)},this.publish=function(e,t){n.publish(e,t)},this.unsubscribe=function(e,t,r){n.unsubscribe(e,t,r)},this.isConnected=function(){return n.isConnected()},this.getScope=function(){return r},this.getSubscriberData=function(e){return n.getSubscriberData(e)},this.getSubscriberScope=function(e){return n.getSubscriberScope(e)},this.getParameters=function(){return t}},e}),define("OpenAjax/containers/iframe/iframe",["OpenAjax/hub/hub"],function(OpenAjax){var OpenAjax=OpenAjax||{};return OpenAjax.hub=OpenAjax.hub||{},OpenAjax.gadgets="object"==typeof OpenAjax.gadgets?OpenAjax.gadgets:"object"==typeof gadgets?gadgets:{},OpenAjax.gadgets.rpctx=OpenAjax.gadgets.rpctx||{},function(){if("undefined"==typeof gadgets){if("undefined"==typeof oaaConfig)for(var scripts=document.getElementsByTagName("script"),reHub=/openajax(?:managedhub-(?:all|core).*|-mashup)\.js$/i,i=scripts.length-1;i>=0;i--){var src=scripts[i].getAttribute("src");if(src){var m=src.match(reHub);if(m){var config=scripts[i].getAttribute("oaaConfig");if(config)try{oaaConfig=eval("({ "+config+" })")}catch(e){}break}}}"undefined"!=typeof oaaConfig&&oaaConfig.gadgetsGlobal&&(gadgets=OpenAjax.gadgets)}}(),OpenAjax.hub.IframeContainer||!function(){function e(e,t,n){if(!OpenAjax.hub.IframeContainer._prng){var r=(new Date).getTime()+Math.random()+document.cookie;OpenAjax.hub.IframeContainer._prng=OpenAjax._smash.crypto.newPRNG(r)}var i=e.IframeContainer||e.IframeHubClient;if(i&&i.seed)try{var o=i.seed.call(t);OpenAjax.hub.IframeContainer._prng.addSeed(o)}catch(a){OpenAjax.hub._debugger(),n("caught error from 'seed' callback: "+a.message)}var s=i&&i.tokenLength||6;return OpenAjax.hub.IframeContainer._prng.nextRandomB64Str(s)}OpenAjax.hub.IframeContainer=function(n,r,i){function o(e){var t=e[0],n=e[1],r=e[2];if(!(t&&n&&r&&r.Container&&r.Container.onSecurityAlert&&r.IframeContainer&&r.IframeContainer.parent&&r.IframeContainer.uri))throw new Error(OpenAjax.hub.Error.BadParameters)}function a(){var e=document.createElement("span");i.IframeContainer.parent.appendChild(e);var t='<iframe id="'+p+'" name="'+p+'" src="javascript:\'<html></html>\'"',n="",o=i.IframeContainer.iframeAttrs;if(o)for(var a in o)switch(a){case"style":for(var s in o.style)n+=s+":"+o.style[s]+";";break;case"className":t+=' class="'+o[a]+'"';break;default:t+=" "+a+'="'+o[a]+'"'}n+="visibility:hidden;",t+=' style="'+n+'"></iframe>',e.innerHTML=t;var u;u=i.IframeContainer.tunnelURI?"&parent="+encodeURIComponent(i.IframeContainer.tunnelURI)+"&forcesecure=true":"&oahParent="+encodeURIComponent(OpenAjax.gadgets.rpc.getOrigin(window.location.href));var c="";p!==r&&(c="&oahId="+p.substring(p.lastIndexOf("_")+1)),document.getElementById(p).src=i.IframeContainer.uri+"#rpctoken="+d+u+c}function s(){function e(e){if(e&&(m=!0,clearTimeout(f),document.getElementById(p).style.visibility="visible",i.Container.onConnect))try{i.Container.onConnect.call(g,h)}catch(t){OpenAjax.hub._debugger(),y("caught error from onConnect callback to constructor: "+t.message)}}OpenAjax.gadgets.rpc.call(p,"openajax.pubsub",e,"cmd","con")}function u(){if(m){m=!1,document.getElementById(p).style.visibility="hidden";for(var e in v)n.unsubscribeForClient(h,v[e]);v={}}}function c(e){try{i.Container.onSecurityAlert.call(g,h,e)}catch(t){OpenAjax.hub._debugger(),y("caught error from onSecurityAlert callback to constructor: "+t.message)}}function l(){f=setTimeout(function(){c(OpenAjax.hub.SecurityAlert.LoadTimeout),h._handleIncomingRPC=function(){}},b)}o(arguments);var d,p,f,h=this,g=i.Container.scope||window,m=!1,v={},b=i.IframeContainer.timeout||15e3;if(i.Container.log)var y=function(e){try{i.Container.log.call(g,"IframeContainer::"+r+": "+e)}catch(t){OpenAjax.hub._debugger()}};else y=function(){};this._init=function(){n.addContainer(this),p=OpenAjax.hub.IframeContainer._rpcRouter.add(r,this),d=e(i,g,y);var t=i.IframeContainer.clientRelay,o=OpenAjax.gadgets.rpc.getRelayChannel();if(i.IframeContainer.tunnelURI){if("wpm"!==o&&"ifpc"!==o)throw new Error(OpenAjax.hub.Error.IncompatBrowser)}else y("WARNING: Parameter 'IframeContaienr.tunnelURI' not specified. Connection will not be fully secure."),"rmr"!==o||t||(t=OpenAjax.gadgets.rpc.getOrigin(i.IframeContainer.uri)+"/robots.txt");a(),OpenAjax.gadgets.rpc.setupReceiver(p,t),l()},this.sendToClient=function(e,t,n){OpenAjax.gadgets.rpc.call(p,"openajax.pubsub",null,"pub",e,t,n)},this.remove=function(){u(),clearTimeout(f),OpenAjax.gadgets.rpc.removeReceiver(p);var e=document.getElementById(p);e.parentNode.removeChild(e),OpenAjax.hub.IframeContainer._rpcRouter.remove(p)},this.isConnected=function(){return m},this.getClientID=function(){return r},this.getPartnerOrigin=function(){if(m){var e=OpenAjax.gadgets.rpc.getReceiverOrigin(p);if(e)return/^([a-zA-Z]+:\/\/[^:]+).*/.exec(e)[1]}return null},this.getParameters=function(){return i},this.getHub=function(){return n},this.getIframe=function(){return document.getElementById(p)},this._handleIncomingRPC=function(e,t,r){switch(e){case"pub":n.publishForClient(h,t,r);break;case"sub":var o="";try{v[r]=n.subscribeForClient(h,t,r)}catch(a){o=a.message}return o;case"uns":var c=v[r];return n.unsubscribeForClient(h,c),delete v[r],r;case"con":return s(),!0;case"dis":if(l(),u(),i.Container.onDisconnect)try{i.Container.onDisconnect.call(g,h)}catch(a){OpenAjax.hub._debugger(),y("caught error from onDisconnect callback to constructor: "+a.message)}return!0}},this._onSecurityAlert=function(e){c(t[e])},this._init()},OpenAjax.hub.IframeHubClient=function(e){function t(){if(!s)throw new Error(OpenAjax.hub.Error.Disconnected)}function n(e){if(!e)throw new Error(OpenAjax.hub.Error.BadParameters);for(var t=e.split("."),n=t.length,r=0;n>r;r++){var i=t[r];if(""===i||-1!=i.indexOf("*")&&"*"!=i&&"**"!=i)throw new Error(OpenAjax.hub.Error.BadParameters);if("**"==i&&n-1>r)throw new Error(OpenAjax.hub.Error.BadParameters)}}function r(e){if(!e||""===e||-1!=e.indexOf("*")||-1!=e.indexOf("..")||"."==e.charAt(0)||"."==e.charAt(e.length-1))throw new Error(OpenAjax.hub.Error.BadParameters)}if(!e||!e.HubClient||!e.HubClient.onSecurityAlert)throw new Error(OpenAjax.hub.Error.BadParameters);var i,o=this,a=e.HubClient.scope||window,s=!1,u={},c=0;if(e.HubClient.log)var l=function(t){try{e.HubClient.log.call(a,"IframeHubClient::"+i+": "+t)}catch(n){OpenAjax.hub._debugger()}};else l=function(){};this._init=function(){var t=OpenAjax.gadgets.util.getUrlParameters();if(!t.parent){var n=t.oahParent+"/robots.txt";OpenAjax.gadgets.rpc.setupReceiver("..",n)}if(e.IframeHubClient&&e.IframeHubClient.requireParentVerifiable&&null===OpenAjax.gadgets.rpc.getReceiverOrigin(".."))throw OpenAjax.gadgets.rpc.removeReceiver(".."),new Error(OpenAjax.hub.Error.IncompatBrowser);OpenAjax.hub.IframeContainer._rpcRouter.add("..",this),i=OpenAjax.gadgets.rpc.RPC_ID,t.oahId&&(i=i.substring(0,i.lastIndexOf("_")))},this.connect=function(e,t){function n(n){if(n&&(s=!0,e))try{e.call(t||window,o,!0)}catch(r){OpenAjax.hub._debugger(),l("caught error from onComplete callback to connect(): "+r.message)}}if(s)throw new Error(OpenAjax.hub.Error.Duplicate);OpenAjax.gadgets.rpc.call("..","openajax.pubsub",n,"con")},this.disconnect=function(e,t){if(!s)throw new Error(OpenAjax.hub.Error.Disconnected);s=!1;var n=null;e&&(n=function(n){try{e.call(t||window,o,!0)}catch(r){OpenAjax.hub._debugger(),l("caught error from onComplete callback to disconnect(): "+r.message)}}),OpenAjax.gadgets.rpc.call("..","openajax.pubsub",n,"dis")},this.getPartnerOrigin=function(){if(s){var e=OpenAjax.gadgets.rpc.getReceiverOrigin("..");if(e)return/^([a-zA-Z]+:\/\/[^:]+).*/.exec(e)[1]}return null},this.getClientID=function(){return i},this.subscribe=function(e,r,i,o,a){function s(e){if(""!==e&&delete u[d],o)try{o.call(i,d,""===e,e)}catch(t){OpenAjax.hub._debugger(),l("caught error from onComplete callback to subscribe(): "+t.message)}}if(t(),n(e),!r)throw new Error(OpenAjax.hub.Error.BadParameters);i=i||window;var d=""+c++;return u[d]={cb:r,sc:i,d:a},OpenAjax.gadgets.rpc.call("..","openajax.pubsub",s,"sub",e,d),d},this.publish=function(e,n){t(),r(e),OpenAjax.gadgets.rpc.call("..","openajax.pubsub",null,"pub",e,n)},this.unsubscribe=function(e,n,r){function i(t){if(delete u[e],n)try{n.call(r||window,e,!0)}catch(i){OpenAjax.hub._debugger(),l("caught error from onComplete callback to unsubscribe(): "+i.message)}}if(t(),!e)throw new Error(OpenAjax.hub.Error.BadParameters);if(!u[e]||u[e].uns)throw new Error(OpenAjax.hub.Error.NoSubscription);u[e].uns=!0,OpenAjax.gadgets.rpc.call("..","openajax.pubsub",i,"uns",null,e)},this.isConnected=function(){return s},this.getScope=function(){return a},this.getSubscriberData=function(e){if(t(),u[e])return u[e].d;throw new Error(OpenAjax.hub.Error.NoSubscription)},this.getSubscriberScope=function(e){if(t(),u[e])return u[e].sc;throw new Error(OpenAjax.hub.Error.NoSubscription)},this.getParameters=function(){return e},this._handleIncomingRPC=function(e,t,n,r){if("pub"===e&&u[r]&&!u[r].uns)try{u[r].cb.call(u[r].sc,t,n,u[r].d)}catch(i){OpenAjax.hub._debugger(),l("caught error from onData callback to subscribe(): "+i.message)}return"con"===t?!0:!1},this._init()},OpenAjax.hub.IframeContainer._rpcRouter=function(){function e(){var e=r[this.f];return e?e._handleIncomingRPC.apply(e,arguments):void 0}function n(e,t){var n=r[e];n&&n._onSecurityAlert.call(n,t)}var r={};return{add:function(i,o){function a(e,t){if(".."===e)return void(r[".."]||(r[".."]=t));for(var n=e;document.getElementById(n);)n=e+"_"+(32767*Math.random()|0).toString(16);return r[n]=t,n}return OpenAjax.gadgets.rpc.register("openajax.pubsub",e),OpenAjax.gadgets.rpc.config({securityCallback:n}),t[OpenAjax.gadgets.rpc.SEC_ERROR_LOAD_TIMEOUT]=OpenAjax.hub.SecurityAlert.LoadTimeout,t[OpenAjax.gadgets.rpc.SEC_ERROR_FRAME_PHISH]=OpenAjax.hub.SecurityAlert.FramePhish,t[OpenAjax.gadgets.rpc.SEC_ERROR_FORGED_MSG]=OpenAjax.hub.SecurityAlert.ForgedMsg,this.add=a,a(i,o)},remove:function(e){delete r[e]}}}();var t={}}(),OpenAjax}),define("OpenAjax/containers/iframe/crypto",["OpenAjax/hub/hub"],function(e){return"undefined"==typeof e._smash&&(e._smash={}),e._smash.crypto={strToWA:function(e,t){for(var n=Array(),r=(1<<t)-1,i=0;i<e.length*t;i+=t)n[i>>5]|=(e.charCodeAt(i/t)&r)<<32-t-i%32;return n},hmac_sha1:function(e,t,n){for(var r=Array(16),i=Array(16),o=0;16>o;o++)r[o]=909522486^e[o],i[o]=1549556828^e[o];var a=this.sha1(r.concat(this.strToWA(t,n)),512+t.length*n);return this.sha1(i.concat(a),672)},newPRNG:function(e){function t(e){return r.hmac_sha1(o,e,8)}function n(e){for(var n=t(e),r=0;5>r;r++)a[r]^=n[r]}var r=this;("string"!=typeof e||e.length<12)&&alert("WARNING: Seed length too short ...");var o=[43417,15926,18182,33130,9585,30800,49772,40144,47678,55453,4659,38181,65340,6787,54417,65301],a=[],s=0;return n(e),{addSeed:function(e){n(e)},nextRandomOctets:function(e){for(var t=[];e>0;){s+=1;var n=r.hmac_sha1(a,s.toString(16),8);for(i=0;i<20&e>0;i++,e--)t.push((n[i>>2]>>i%4)%256)}return t},nextRandomB64Str:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",n=this.nextRandomOctets(e),r="",i=0;e>i;i++)r+=t.charAt(63&n[i]);return r}}},sha1:function(){function e(e,t,n,r){return 20>e?t&n|~t&r:40>e?t^n^r:60>e?t&n|t&r|n&r:t^n^r}function t(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}var n=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n},r=function(e,t){return e<<t|e>>>32-t};return function(i,o){i[o>>5]|=128<<24-o%32,i[(o+64>>9<<4)+15]=o;for(var a=Array(80),s=1732584193,u=-271733879,c=-1732584194,l=271733878,d=-1009589776,p=0;p<i.length;p+=16){for(var f=s,h=u,g=c,m=l,v=d,b=0;80>b;b++){a[b]=16>b?i[p+b]:r(a[b-3]^a[b-8]^a[b-14]^a[b-16],1);var y=n(n(r(f,5),e(b,h,g,m)),n(n(v,a[b]),t(b)));v=m,m=g,g=r(h,30),h=f,f=y}s=n(f,s),u=n(h,u),c=n(g,c),l=n(m,l),d=n(v,d)}return Array(s,u,c,l,d)}}()},e}),this.JSON||(JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,o,a,s=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;o>n;n+=1)a[n]=str(n,u)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)r=rep[n],"string"==typeof r&&(i=str(r,u),i&&a.push(quote(r)+(gap?": ":":")+i));else for(r in u)Object.hasOwnProperty.call(u,r)&&(i=str(r,u),i&&a.push(quote(r)+(gap?": ":":")+i));return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","    ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),
"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("OpenAjax/containers/iframe/json2",function(){}),define("OpenAjax/containers/iframe/rpc/rpc-dependencies",["OpenAjax/hub/hub","OpenAjax/containers/inline/inline","OpenAjax/containers/iframe/iframe","OpenAjax/containers/iframe/crypto","OpenAjax/containers/iframe/json2"],function(e){return e.gadgets.util=function(){function e(e){var t,n=e.indexOf("?"),r=e.indexOf("#");return t=-1===r?e.substr(n+1):[e.substr(n+1,r-n-1),"&",e.substr(r+1)].join(""),t.split("&")}var t=null,n=[];return{getUrlParameters:function(n){if(null!==t&&"undefined"==typeof n)return t;for(var r={},i=e(n||document.location.href),o=window.decodeURIComponent?decodeURIComponent:unescape,a=0,s=i.length;s>a;++a){var u=i[a].indexOf("=");if(-1!==u){var c=i[a].substring(0,u),l=i[a].substring(u+1);l=l.replace(/\+/g," "),r[c]=o(l)}}return"undefined"==typeof n&&(t=r),r},registerOnLoadHandler:function(e){n.push(e)},runOnLoadHandlers:function(){for(var e=0,t=n.length;t>e;++e)n[e]()},attachBrowserEvent:function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n)},removeBrowserEvent:function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n)}}}(),e.gadgets.util.getUrlParameters(),e.gadgets.json=e.gadgets.json||{},e.gadgets.json.stringify||(e.gadgets.json={parse:function(e){try{return window.JSON.parse(e)}catch(t){return!1}},stringify:function(e){try{return window.JSON.stringify(e)}catch(t){return null}}}),e.gadgets.log=function(t){e.gadgets.log.logAtLevel(e.gadgets.log.INFO,t)},e.gadgets.warn=function(t){e.gadgets.log.logAtLevel(e.gadgets.log.WARNING,t)},e.gadgets.error=function(t){e.gadgets.log.logAtLevel(e.gadgets.log.ERROR,t)},e.gadgets.setLogLevel=function(t){e.gadgets.log.logLevelThreshold_=t},e.gadgets.log.logAtLevel=function(t,n){if(!(t<e.gadgets.log.logLevelThreshold_)&&e.gadgets.log._console){var r=e.gadgets.log._console;t==e.gadgets.log.WARNING&&r.warn?r.warn(n):t==e.gadgets.log.ERROR&&r.error?r.error(n):r.log&&r.log(n)}},e.gadgets.log.INFO=1,e.gadgets.log.WARNING=2,e.gadgets.log.ERROR=3,e.gadgets.log.NONE=4,e.gadgets.log.logLevelThreshold_=e.gadgets.log.INFO,e.gadgets.log._console=window.console?window.console:window.opera?window.opera.postError:void 0,function(){function t(){n||(n=!0,e.gadgets.util.runOnLoadHandlers(),e.gadgets.util.registerOnLoadHandler=function(e){setTimeout(e,0)},window.detachEvent&&window.detachEvent("onload",t))}if(!window.__isgadget){var n=!1;window.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):window.attachEvent&&window.attachEvent("onload",t)}}(),e}),define("OpenAjax/containers/iframe/rpc/fe.transport",["OpenAjax/hub/hub","OpenAjax/containers/inline/inline","OpenAjax/containers/iframe/iframe","OpenAjax/containers/iframe/crypto","OpenAjax/containers/iframe/json2","OpenAjax/containers/iframe/rpc/rpc-dependencies"],function(e){return e.gadgets.rpctx=e.gadgets.rpctx||{},e.gadgets.rpctx.frameElement||(e.gadgets.rpctx.frameElement=function(){function t(t,r,a){try{if(".."!==r){var s=window.frameElement;if("function"==typeof s[i])return"function"!=typeof s[i][o]&&(s[i][o]=function(t){n(e.gadgets.json.parse(t))}),void s[i](e.gadgets.json.stringify(a))}else{var u=document.getElementById(t);if("function"==typeof u[i]&&"function"==typeof u[i][o])return void u[i][o](e.gadgets.json.stringify(a))}}catch(c){}return!0}var n,r,i="__g2c_rpc",o="__c2g_rpc";return{getCode:function(){return"fe"},isParentVerifiable:function(){return!1},init:function(e,t){return n=e,r=t,!0},setup:function(t,o){if(".."!==t)try{var a=document.getElementById(t);a[i]=function(t){n(e.gadgets.json.parse(t))}}catch(s){return!1}if(".."===t){r("..",!0);var u=function(){window.setTimeout(function(){e.gadgets.rpc.call(t,e.gadgets.rpc.ACK)},500)};e.gadgets.util.registerOnLoadHandler(u)}return!0},call:function(e,n,r){t(e,n,r)}}}()),e}),define("OpenAjax/containers/iframe/rpc/ifpc.transport",["OpenAjax/hub/hub","OpenAjax/containers/inline/inline","OpenAjax/containers/iframe/iframe","OpenAjax/containers/iframe/crypto","OpenAjax/containers/iframe/json2","OpenAjax/containers/iframe/rpc/rpc-dependencies","OpenAjax/containers/iframe/rpc/fe.transport"],function(e){return e.gadgets.rpctx=e.gadgets.rpctx||{},e.gadgets.rpctx.ifpc||(e.gadgets.rpctx.ifpc=function(){function t(t){for(var n=[],r=0,i=t.length;i>r;++r)n.push(encodeURIComponent(e.gadgets.json.stringify(t[r])));return n.join("&")}function n(e){for(var t,n=o.length-1;n>=0;--n){var r=o[n];try{if(r&&(r.recyclable||"complete"===r.readyState)){if(r.parentNode.removeChild(r),!window.ActiveXObject){r.recyclable=!1,t=r;break}o[n]=r=null,o.splice(n,1)}}catch(i){}}t||(t=document.createElement("iframe"),t.style.border=t.style.width=t.style.height="0px",t.style.visibility="hidden",t.style.position="absolute",t.onload=function(){this.recyclable=!0},o.push(t)),t.src=e,window.setTimeout(function(){document.body.appendChild(t)},0)}function r(e,t){for(var n=t-1;n>=0;--n)if("undefined"==typeof e[n])return!1;return!0}var i,o=[],a=0,s=2e3,u={};return{getCode:function(){return"ifpc"},isParentVerifiable:function(){return!0},init:function(e,t){return i=t,i("..",!0),!0},setup:function(e,t){return i(e,!0),!0},call:function(r,i,o){var u=e.gadgets.rpc.getRelayUrl(r);if(++a,!u)return void e.gadgets.warn("No relay file assigned for IFPC");var c=null,l=[];if(o.l){var d=o.a;c=[u,"#",t([i,a,1,0,t([i,o.s,"","",i].concat(d))])].join(""),l.push(c)}else{c=[u,"#",r,"&",i,"@",a,"&"].join("");for(var p,f=encodeURIComponent(e.gadgets.json.stringify(o)),h=s-c.length,g=Math.ceil(f.length/h),m=0;f.length>0;)p=f.substring(0,h),f=f.substring(h),l.push([c,g,"&",m,"&",p].join("")),m+=1}do n(l.shift());while(l.length>0);return!0},_receiveMessage:function(t,n){var i=t[1],o=parseInt(t[2],10),a=parseInt(t[3],10),s=t[t.length-1],c=1===o;o>1&&(u[i]||(u[i]=[]),u[i][a]=s,r(u[i],o)&&(s=u[i].join(""),delete u[i],c=!0)),c&&n(e.gadgets.json.parse(decodeURIComponent(s)))}}}()),e}),define("OpenAjax/containers/iframe/rpc/rmr.transport",["OpenAjax/hub/hub","OpenAjax/containers/inline/inline","OpenAjax/containers/iframe/iframe","OpenAjax/containers/iframe/crypto","OpenAjax/containers/iframe/json2","OpenAjax/containers/iframe/rpc/rpc-dependencies","OpenAjax/containers/iframe/rpc/fe.transport","OpenAjax/containers/iframe/rpc/ifpc.transport"],function(e){return e.gadgets.rpctx=e.gadgets.rpctx||{},e.gadgets.rpctx.rmr||(e.gadgets.rpctx.rmr=function(){function t(t,n,r,i){var o=function(){document.body.appendChild(t),t.src="about:blank",i&&(t.onload=function(){a(i)}),t.src=n+"#"+r};document.body?o():e.gadgets.util.registerOnLoadHandler(function(){o()})}function n(n){if("object"!=typeof p[n]){var i=document.createElement("iframe"),a=i.style;a.position="absolute",a.top="0px",a.border="0",a.opacity="0",a.width="10px",a.height="1px",i.id="rmrtransport-"+n,i.name=i.id;var s=e.gadgets.rpc.getRelayUrl(n);s||(s=e.gadgets.rpc.getOrigin(e.gadgets.util.getUrlParameters().parent)+"/robots.txt"),p[n]={frame:i,receiveWindow:null,relayUri:s,searchCounter:0,width:10,waiting:!0,queue:[],sendId:0,recvId:0},".."!==n&&t(i,s,o(n)),r(n)}}function r(t){var n=null;p[t].searchCounter++;try{var i=e.gadgets.rpc._getTargetWin(t);n=".."===t?i.frames["rmrtransport-"+e.gadgets.rpc.RPC_ID]:i.frames["rmrtransport-.."]}catch(o){}var a=!1;if(n&&(a=s(t,n)),!a){if(p[t].searchCounter>d)return;window.setTimeout(function(){r(t)},l)}}function i(t,n,r,i){var a=null;if(a=".."!==r?p[".."]:p[t]){if(n!==e.gadgets.rpc.ACK&&a.queue.push(i),a.waiting||0===a.queue.length&&(n!==e.gadgets.rpc.ACK||!i||i.ackAlone!==!0))return!0;a.queue.length>0&&(a.waiting=!0);var s=a.relayUri+"#"+o(t);try{a.frame.contentWindow.location=s;var u=10==a.width?20:10;a.frame.style.width=u+"px",a.width=u}catch(c){return!1}}return!0}function o(t){var n=p[t],r={id:n.sendId};return n&&(r.d=Array.prototype.slice.call(n.queue,0),r.d.push({s:e.gadgets.rpc.ACK,id:n.recvId})),e.gadgets.json.stringify(r)}function a(t){for(var n=p[t],r=n.receiveWindow.location.hash.substring(1),o=e.gadgets.json.parse(decodeURIComponent(r))||{},a=o.d||[],s=!1,l=!1,d=0,f=n.recvId-o.id,h=0;h<a.length;++h){var g=a[h];if(g.s!==e.gadgets.rpc.ACK)s=!0,++d<=f||(++n.recvId,u(g));else{c(t,!0),n.waiting&&(l=!0),n.waiting=!1;var m=Math.max(0,g.id-n.sendId);n.queue.splice(0,m),n.sendId=Math.max(n.sendId,g.id||0)}}if(s||l&&n.queue.length>0){var v=".."===t?e.gadgets.rpc.RPC_ID:"..";i(t,e.gadgets.rpc.ACK,v,{ackAlone:s})}}function s(e,n){function r(){a(e)}var i=p[e];try{var s=!1;if(s="document"in n,!s)return!1;if(s="object"==typeof n.document,!s)return!1;var u=n.location.href;if("about:blank"===u)return!1}catch(c){return!1}return i.receiveWindow=n,"undefined"==typeof n.attachEvent?n.onresize=r:n.attachEvent("onresize",r),".."===e?t(i.frame,i.relayUri,o(e),e):a(e),!0}var u,c,l=500,d=10,p={};return{getCode:function(){return"rmr"},isParentVerifiable:function(){return!0},init:function(e,t){return u=e,c=t,!0},setup:function(t,r){try{n(t)}catch(i){return e.gadgets.warn("Caught exception setting up RMR: "+i),!1}return!0},call:function(e,t,n){return i(e,n.s,t,n)}}}()),e}),define("OpenAjax/containers/iframe/rpc/wpm.transport",["OpenAjax/hub/hub","OpenAjax/containers/inline/inline","OpenAjax/containers/iframe/iframe","OpenAjax/containers/iframe/crypto","OpenAjax/containers/iframe/json2","OpenAjax/containers/iframe/rpc/rpc-dependencies","OpenAjax/containers/iframe/rpc/fe.transport","OpenAjax/containers/iframe/rpc/ifpc.transport","OpenAjax/containers/iframe/rpc/rmr.transport"],function(e){return e.gadgets.rpctx=e.gadgets.rpctx||{},e.gadgets.rpctx.wpm||(e.gadgets.rpctx.wpm=function(){function t(){function t(e){"postmessage.test"==e.data&&(n=!0,"undefined"==typeof e.origin&&(s=!0))}var n=!1;e.gadgets.util.attachBrowserEvent(window,"message",t,!1),window.postMessage("postmessage.test","*"),n&&(a=!0),e.gadgets.util.removeBrowserEvent(window,"message",t,!1)}function n(t){var n=e.gadgets.json.parse(t.data);if(n&&n.f){var i=e.gadgets.rpc.getRelayUrl(n.f)||e.gadgets.util.getUrlParameters().parent,o=e.gadgets.rpc.getOrigin(i);(s?t.domain===/^.+:\/\/([^:]+).*/.exec(o)[1]:t.origin===o)&&r(n)}}var r,i,o,a=!1,s=!1;return{getCode:function(){return"wpm"},isParentVerifiable:function(){return!0},init:function(s,u){return r=s,i=u,t(),o=a?function(e,t,n){window.setTimeout(function(){e.postMessage(t,n)},0)}:function(e,t,n){e.postMessage(t,n)},e.gadgets.util.attachBrowserEvent(window,"message",n,!1),i("..",!0),!0},setup:function(t,n,r){return".."===t&&(r?e.gadgets.rpc._createRelayIframe(n):e.gadgets.rpc.call(t,e.gadgets.rpc.ACK)),!0},call:function(t,n,r){var i=e.gadgets.rpc._getTargetWin(t),a=e.gadgets.rpc.getRelayUrl(t)||e.gadgets.util.getUrlParameters().parent,s=e.gadgets.rpc.getOrigin(a);return s?o(i,e.gadgets.json.stringify(r),s):e.gadgets.error("No relay set (used as window.postMessage targetOrigin), cannot send cross-domain message"),!0},relayOnload:function(e,t){i(e,!0)}}}()),e}),define("OpenAjax/containers/iframe/rpc/rpc",["OpenAjax/hub/hub","OpenAjax/containers/inline/inline","OpenAjax/containers/iframe/iframe","OpenAjax/containers/iframe/crypto","OpenAjax/containers/iframe/json2","OpenAjax/containers/iframe/rpc/rpc-dependencies","OpenAjax/containers/iframe/rpc/fe.transport","OpenAjax/containers/iframe/rpc/ifpc.transport","OpenAjax/containers/iframe/rpc/rmr.transport","OpenAjax/containers/iframe/rpc/wpm.transport"],function(e){return e.gadgets.rpc||(e.gadgets.rpc=function(){function t(){return"function"==typeof window.postMessage?e.gadgets.rpctx.wpm:"object"==typeof window.postMessage?e.gadgets.rpctx.wpm:navigator.userAgent.indexOf("WebKit")>0?e.gadgets.rpctx.rmr:"Gecko"===navigator.product?e.gadgets.rpctx.frameElement:e.gadgets.rpctx.ifpc}function n(e,t){var n=H;t||(n=U),k[e]=n;for(var r=S[e]||[],i=0;i<r.length;++i){var o=r[i];o.t=d(e),n.call(e,o.f,o)}S[e]=[]}function r(){function t(){V=!0}q||(e.gadgets.util.attachBrowserEvent(window,"unload",t,!1),q=!0)}function i(t,n,i,o,a){O[n]&&O[n]===i||(e.gadgets.error("Invalid auth token. "+O[n]+" vs "+i),P(n,D)),a.onunload=function(){j[n]&&!V&&(P(n,F),e.gadgets.rpc.removeReceiver(n))},r(),o=e.gadgets.json.parse(decodeURIComponent(o)),H.relayOnload(n,o)}function o(t){if(t&&"string"==typeof t.s&&"string"==typeof t.f&&t.a instanceof Array){if(O[t.f]&&O[t.f]!==t.t&&(e.gadgets.error("Invalid auth token. "+O[t.f]+" vs "+t.t),P(t.f,D)),t.s===y)return void window.setTimeout(function(){n(t.f,!0)},0);t.c&&(t.callback=function(n){e.gadgets.rpc.call(t.f,v,null,t.c,n)});var r=(x[t.s]||x[b]).apply(t,t.a);t.c&&"undefined"!=typeof r&&e.gadgets.rpc.call(t.f,v,null,t.c,r)}}function a(e){if(!e)return"";e=e.toLowerCase(),0==e.indexOf("//")&&(e=window.location.protocol+e),-1==e.indexOf("://")&&(e=window.location.protocol+"//"+e);var t=e.substring(e.indexOf("://")+3),n=t.indexOf("/");-1!=n&&(t=t.substring(0,n));var r=e.substring(0,e.indexOf("://")),i="",o=t.indexOf(":");if(-1!=o){var a=t.substring(o+1);t=t.substring(0,o),("http"===r&&"80"!==a||"https"===r&&"443"!==a)&&(i=":"+a)}return r+"://"+t+i}function s(e){if("undefined"==typeof e||".."===e)return window.parent;e=String(e);var t=window.frames[e];return t?t:(t=document.getElementById(e),t&&t.contentWindow?t.contentWindow:null)}function u(e,t,n){if(j[e]!==!0){"undefined"==typeof j[e]&&(j[e]=0);var r=document.getElementById(e);return".."!==e&&null==r||H.setup(e,t,n)!==!0?void(j[e]!==!0&&j[e]++<w?window.setTimeout(function(){u(e,t,n)},_):(k[e]=U,j[e]=!0)):void(j[e]=!0)}}function c(t,n){if("undefined"==typeof R[t]){R[t]=!1;var r=e.gadgets.rpc.getRelayUrl(t);if(a(r)!==a(window.location.href))return!1;var i=s(t);try{R[t]=i.OpenAjax.gadgets.rpc.receiveSameDomain}catch(o){e.gadgets.error("Same domain call failed: parent= incorrectly set.")}}return"function"==typeof R[t]?(R[t](n),!0):!1}function l(e,t,n){/http(s)?:\/\/.+/.test(t)||(0==t.indexOf("//")?t=window.location.protocol+t:"/"==t.charAt(0)?t=window.location.protocol+"//"+window.location.host+t:-1==t.indexOf("://")&&(t=window.location.protocol+"//"+t)),C[e]=t,A[e]=!!n}function d(e){return O[e]}function p(e,t,n){t=t||"",O[e]=String(t),u(e,t,n)}function f(t,r){function i(i){var s=i?i.rpc:{},u=s.parentRelayUrl;if("http://"!==u.substring(0,7)&&"https://"!==u.substring(0,8)&&"//"!==u.substring(0,2)&&"string"==typeof T.parent&&""!==T.parent)if("/"!==u.substring(0,1)){var c=T.parent.lastIndexOf("/");u=T.parent.substring(0,c+1)+u}else u=a(T.parent)+u;var d=!!s.useLegacyProtocol;l("..",u,d),d&&(H=e.gadgets.rpctx.ifpc,H.init(o,n));var f=r||T.forcesecure||!1;p("..",t,f)}var s={parentRelayUrl:e.gadgets.config.NonEmptyStringValidator};e.gadgets.config.register("rpc",s,i)}function h(e,t,n){var r=n||T.forcesecure||!1,i=t||T.parent;i&&(l("..",i),p("..",e,r))}function g(t,n,r,i){if(e.gadgets.util){var o=document.getElementById(t);if(!o)throw new Error("Cannot set up gadgets.rpc receiver with ID: "+t+", element not found.");var a=n||o.src;l(t,a);var s=e.gadgets.util.getUrlParameters(o.src),u=r||s.rpctoken,c=i||s.forcesecure;p(t,u,c)}}function m(e,t,n,r){if(".."===e){var i=n||T.rpctoken||T.ifpctok||"";window.__isgadget===!0?f(i,r):h(i,t,r)}else g(e,t,n,r)}var v="__cb",b="",y="__ack",_=500,w=10,x={},C={},A={},O={},E=0,N={},j={},R={},T={},k={},S={},M=window.top!==window.self,I=window.name,P=function(){},L=0,F=1,D=2,U=function(){function t(t){return function(){e.gadgets.log("gadgets.rpc."+t+"("+e.gadgets.json.stringify(Array.prototype.slice.call(arguments))+"): call ignored. [caller: "+document.location+", isChild: "+M+"]")}}return{getCode:function(){return"noop"},isParentVerifiable:function(){return!0},init:t("init"),setup:t("setup"),call:t("call")}}();e.gadgets.util&&(T=e.gadgets.util.getUrlParameters());var V=!1,q=!1,H=t();return x[b]=function(){e.gadgets.warn("Unknown RPC service: "+this.s)},x[v]=function(e,t){var n=N[e];n&&(delete N[e],n(t))},{config:function(e){"function"==typeof e.securityCallback&&(P=e.securityCallback)},register:function(e,t){if(e===v||e===y)throw new Error("Cannot overwrite callback/ack service");if(e===b)throw new Error("Cannot overwrite default service: use registerDefault");x[e]=t},unregister:function(e){if(e===v||e===y)throw new Error("Cannot delete callback/ack service");if(e===b)throw new Error("Cannot delete default service: use unregisterDefault");delete x[e]},registerDefault:function(e){x[b]=e},unregisterDefault:function(){delete x[b]},forceParentVerifiable:function(){H.isParentVerifiable()||(H=e.gadgets.rpctx.ifpc)},call:function(t,n,r,i){t=t||"..";var o="..";".."===t&&(o=I),++E,r&&(N[E]=r);var a={s:n,f:o,c:r?E:0,a:Array.prototype.slice.call(arguments,3),t:O[t],l:A[t]};if(".."!==t&&!document.getElementById(t))return void e.gadgets.log("WARNING: attempted send to nonexistent frame: "+t);if(!c(t,a)){var s=k[t];if(!s)return void(S[t]?S[t].push(a):S[t]=[a]);A[t]&&(s=e.gadgets.rpctx.ifpc),s.call(t,o,a)===!1&&(k[t]=U,H.call(t,o,a))}},getRelayUrl:function(e){var t=C[e];return t&&"/"===t.substring(0,1)&&(t="/"===t.substring(1,2)?document.location.protocol+t:document.location.protocol+"//"+document.location.host+t),t},setRelayUrl:l,setAuthToken:p,setupReceiver:m,getAuthToken:d,removeReceiver:function(e){delete C[e],delete A[e],delete O[e],delete j[e],delete R[e],delete k[e]},getRelayChannel:function(){return H.getCode()},receive:function(e,t){e.length>4?H._receiveMessage(e,o):i.apply(null,e.concat(t))},receiveSameDomain:function(e){e.a=Array.prototype.slice.call(e.a),window.setTimeout(function(){o(e)},0)},getOrigin:a,getReceiverOrigin:function(t){var n=k[t];if(!n)return null;if(!n.isParentVerifiable(t))return null;var r=e.gadgets.rpc.getRelayUrl(t)||e.gadgets.util.getUrlParameters().parent;return e.gadgets.rpc.getOrigin(r)},init:function(){H.init(o,n)===!1&&(H=U),M&&m("..")},_getTargetWin:s,_createRelayIframe:function(t,n){function r(){document.body.appendChild(a),a.src='javascript:"<html></html>"',a.src=o}var i=e.gadgets.rpc.getRelayUrl("..");if(i){var o=i+"#..&"+I+"&"+t+"&"+encodeURIComponent(e.gadgets.json.stringify(n)),a=document.createElement("iframe");return a.style.border=a.style.width=a.style.height="0px",a.style.visibility="hidden",a.style.position="absolute",document.body?r():e.gadgets.util.registerOnLoadHandler(function(){r()}),a}},ACK:y,RPC_ID:I,SEC_ERROR_LOAD_TIMEOUT:L,SEC_ERROR_FRAME_PHISH:F,SEC_ERROR_FORGED_MSG:D}}(),e.gadgets.rpc.init()),e}),define("OpenAjax",["OpenAjax/hub/hub","OpenAjax/containers/inline/inline","OpenAjax/containers/iframe/iframe","OpenAjax/containers/iframe/crypto","OpenAjax/containers/iframe/json2","OpenAjax/containers/iframe/rpc/rpc-dependencies","OpenAjax/containers/iframe/rpc/fe.transport","OpenAjax/containers/iframe/rpc/ifpc.transport","OpenAjax/containers/iframe/rpc/rmr.transport","OpenAjax/containers/iframe/rpc/wpm.transport","OpenAjax/containers/iframe/rpc/rpc"],function(e){return e}),define("scripts/core/open-ajax/open-ajax",["OpenAjax"],function(e){return e}),define("scripts/core/hub/hub",["scripts/core/open-ajax/open-ajax"],function(){var e=function(){function e(){var e="anyware",t=function(t){return e+"."+t},n=function(){return!0},r=function(){},i=new OpenAjax.hub.ManagedHub({onPublish:n,onSubscribe:n,onUnsubscribe:n,onSecurityAlert:r});return{subscribe:function(e,n){return i.subscribe(t(e),n)},unsubscribe:function(e){return i.unsubscribe(e)},publish:function(e,n){return i.publish(t(e),n)},getMessageHub:function(){return i},removeContainer:function(e){return i.removeContainer(e)}}}var t;return{getInstance:function(){return t||(t=e()),window.Adobe=window.Adobe||{},window.Adobe.Anyware=window.Adobe.Anyware||{},window.Adobe.Anyware.Hub=t,t}}}();return e}),define("scripts/core/container/container",["jquery","scripts/core/hub/hub"],function(e,t){var n=function(e,t,n,r,i,o){this.init(e,t,n,r,i,o)};return n.prototype={hub:t.getInstance(),container:null,init:function(t,n,r,i,o,a){var s;this.checkRequiredParams(t,n,r),s={"class":"anyware-iframe",style:{border:"none",width:"100%",height:"100%",overflow:"hidden",scroll:"no"},allowTransparency:!0,frameborder:0},e.extend(!0,s,o),this.componentName=t,this.componentId=this.createComponentId(t),this.element=n,this.clientUrl=r,this.tunnelUrl=this.getTunnelUrl(i),this.iframeAttrs=s,this.timeout=a||15e3},checkRequiredParams:function(e,t,n){if(!e||!t||!n)throw new Error("Expect element, clientUrl and handlers to be passed to constructor.")},loadComponent:function(t){var n=this.hub.getMessageHub(),r=this;this.container=new OpenAjax.hub.IframeContainer(n,this.componentId,{Container:{onSecurityAlert:function(t,n){t===r.container&&e(r.element).trigger("errorEvent",{errorType:r.getSecurityErrorType(n),errors:n})},onConnect:function(){r.readyHandler=r.setUpReadyHandler(t)},onDisconnect:function(){}},IframeContainer:{parent:this.element,iframeAttrs:this.iframeAttrs,uri:this.clientUrl,tunnelURI:this.tunnelUrl,timeout:this.timeout}})},unloadComponent:function(){this.hub.removeContainer(this.container),this.container=null},isConnected:function(){var e=!1;return this.container&&(e=this.container.isConnected()),e},subscribe:function(e,t){return this.hub.subscribe(this.getTopic(e),t)},unsubscribe:function(e){this.hub.unsubscribe(e)},publish:function(e,t){this.hub.publish(this.getTopic(e),t)},getComponentId:function(){return this.container.getClientID()},getComponentName:function(){return this.componentName},createComponentId:function(e){var t=Math.floor(1e4*Math.random());return e+"."+t},getSecurityErrorType:function(e){switch(e){case OpenAjax.hub.SecurityAlert.LoadTimeout:e="APPLICATION_LOAD_FAILURE";break;default:e="CROSS_DOMAIN_SECURITY_ERROR"}return e},setUpReadyHandler:function(e){var t=this;return this.subscribe("applicationReady",function(n){e.apply(),t.removeReadyHandler()})},removeReadyHandler:function(){this.readyHandler&&(this.unsubscribe(this.readyHandler),this.readyHandler=null)},getTopic:function(e){return this.componentId+"."+e},getTunnelUrl:function(e){var t,n,r="rpc_relay.html",i=location.host,o=location.protocol;return e?t=e:(n=window.location.pathname,t=n.substring(0,n.lastIndexOf("/")+1)+r),o+"//"+i+t}},n}),define("scripts/components/common/models/configuration-model",["jquery","can","can-proxy","scripts/components/common/util/lang"],function(e,t){var n=t.Model.extend({domains:{dev:"store1.dev04.adobe.com","pre-stage":"store1.qa04.adobe.com",stage:"store1.stage.adobe.com",prod:"store1.adobe.com"},requiredAttrs:["appId","clientId","countryCode","marketSegment"],MISSING_REQUIRED_ATTRIBUTES:"Missing required attributes: ",CONFIGURATION_ERROR:"CONFIGURATION_ERROR",CLIENT_URL_UNAVAILABLE:"CLIENT_URL_UNAVAILABLE"},{init:function(){for(var e,t=this.constructor.requiredAttrs,n=0;n<t.length;n++)if(e=t[n],!this.attr(e))throw new Error(this.constructor.MISSING_REQUIRED_ATTRIBUTES+e)},load:function(t,n,r){var i=this.attr();return this.callbackScope=t,this.successCallback=n,this.errorCallback=r,e.ajax({url:this.getRequestUrl(i),dataType:"jsonp",jsonpCallback:this.getCallbackName(i),success:this.proxy("handleLoadSuccess"),error:this.proxy("handleLoadError")})},handleLoadSuccess:function(e){if(this.isClientUrlAvailable(e)){var t=this.updateData(e);this.doSuccessCallback(t)}else{var n={errorType:this.constructor.CLIENT_URL_UNAVAILABLE};this.doErrorCallback(n)}},handleLoadError:function(e){var t={errorType:this.constructor.CONFIGURATION_ERROR};this.doErrorCallback(t)},doSuccessCallback:function(e){this.successCallback.call(this.callbackScope,e)},doErrorCallback:function(e){this.errorCallback.call(this.callbackScope,e)},isClientUrlAvailable:function(e){return this.isMarketSegmentSupported(e)&&!this.is404Response(e)},isMarketSegmentSupported:function(t){var n=!0;return e.isValue(t.supportedMarketSegments)&&(n=t.supportedMarketSegments.indexOf(this.attr("marketSegment"))>-1),n},is404Response:function(t){var n=!1;return e.isValue(t.errorCode)&&(n=404===t.errorCode),n},updateData:function(e){if(e.appPath){var t=this.attr(),n=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),r=t.isLocal?n:e.baseUrl[this.attr("landscape")],i=t.isLocal?e.appPath.replace("/anyware/latest/","/app/"):e.appPath;t.debug&&(i+=i.indexOf("?")>0?"&compress=false":"?compress=false"),e.appUrl=r+i}return this.attr(e)},getRequestUrl:function(){var e=this.attr(),t=this.getBaseUrl(),n=e.isLocal?"/app":"/anyware/latest",r=n+"/resources/config/";return t+r+e.appId+"/"+e.clientId+"/"+e.countryCode.toUpperCase()+"/config.json"},getBaseUrl:function(){var t=this.attr(),n=document.location.protocol,r="";return e.isValue(t.landscape)&&!t.isLocal&&(r=n+"//"+this.getConfigDomain(t.landscape)),r},getConfigDomain:function(e){var t=this.constructor.domains;return t[e]||t.prod},getCallbackName:function(e){return e.appId+"Config"},getConfigBaseUrl:function(e){var t=this.attr().baseUrl[e];return t}});return n}),define("scripts/components/common/util/options-validator-util",["jquery","can","scripts/components/common/util/lang"],function(e,t){var n=t.Construct.extend({validateOptions:function(e,t){if(t.validationRules){var n,r,i=t.validationRules;for(r in i)n=i[r],e[r]=this.processValidationRule(n,r,e)}return e},processValidationRule:function(e,t,n){var r=n[t],i=new RegExp(e.pattern,e.flags),o=r;return i.test(r)||(o=this.getDefaultValue(e,n)),o},getDefaultValue:function(e,t){var n;return e.defaultValue&&(n=this.getDepthValue(0,e.defaultValue,e,t)),n},getDepthValue:function(e,t,n,r){var i,o,a=n.defaultValueDepth||0;return a===e?t:(i=this.getOptionName(t),o=this.getNextDepthValue(t[i],i,r),this.getDepthValue(++e,o,n,r))},getOptionName:function(e){var t;for(var n in e)t=n;return t},getNextDepthValue:function(e,t,n){var r=n[t];return e[r]||e.fallbackValue}},{});return n}),function(){var e=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(n){function r(){!e&&this.init&&this.init.apply(this,arguments)}var i=this.prototype;e=!0;var o=new this;e=!1;for(var a in n)o[a]="function"==typeof n[a]&&"function"==typeof i[a]&&t.test(n[a])?function(e,t){return function(){var n=this._super;this._super=i[e];var r=t.apply(this,arguments);return this._super=n,r}}(a,n[a]):n[a];return r.prototype=o,r.constructor=r,r.extend=arguments.callee,r}}(),define("lib/jquery-encoder/libs/Class.create",function(){}),function(e){var t={attr:[",",".","-","_"],css:["(",",","'",'"',")"," "],js:[",",".","_"," "]},n={attr:[],css:["behavior","-moz-behavior","-ms-behavior"]};e.encoder={encodeForHTML:function(t){var n=document.createElement("div");return e(n).text(t),e(n).html()},encodeForHTMLAttribute:function(n,r){r||(r=t.attr);for(var i="",o=0;o<n.length;o++){var a=n.charAt(o),s=n.charCodeAt(o);if(!a.match(/[a-zA-Z0-9]/)&&e.inArray(a,r)<0){var u=s.toString(16);i+="&#x"+u+";"}else i+=a}return i},encodeForCSS:function(n,r){r||(r=t.css);for(var i="",o=0;o<n.length;o++){var a=n.charAt(o),s=n.charCodeAt(o);if(!a.match(/[a-zA-Z0-9]/)&&e.inArray(a,r)<0){var u=s.toString(16);i+="\\"+u+" "}else i+=a}return i},encodeForURL:function(e){return encodeURIComponent(e)},encodeForJavascript:function(n,i){i||(i=t.js);for(var o="",a=0;a<n.length;a++){var s=n.charAt(a),u=n.charCodeAt(a);if(e.inArray(s,i)>=0||null==r[u])o+=s;else{var c,l=u.toString(16);256>u?(c="00".substr(l.length),o+="\\x"+c+l.toUpperCase()):(c="0000".substr(l.length),o+="\\u"+c+l.toUpperCase())}}return o},canonicalize:function(e,t){if(null===e)return null;for(var n=e,r=e,i=0,o=0,a=[new u,new c,new l];;){r=n;for(var s=0;s<a.length;s++){var d=a[s].decode(n);d!=n&&(i++,n=d)}if(r==n)break;o++}if(t&&i>1)throw"Attack Detected - Multiple/Double Encodings used in input";return n}};for(var r=[],i=0;255>i;i++)i>=48&&57>=i||i>=65&&90>=i||i>=97&&122>=i?r[i]=null:r[i]=i.toString(16);var o={html:function(t){return e.encoder.encodeForHTML(t.unsafe)},css:function(t){var r=[],i=[];t.map?r=t.map:r[t.name]=t.unsafe;for(var o in r)if("function"!=typeof r[o]&&r.hasOwnProperty(o)){var a=e.encoder.canonicalize(o,t.strict);e.inArray(a,n[t.context])<0&&(i[o]=e.encoder.encodeForCSS(r[o]))}return i},attr:function(t){var r=[],i=[];t.map?r=t.map:r[t.name]=t.unsafe;for(var o in r)if("function"!=typeof r[o]&&r.hasOwnProperty(o)){var a=e.encoder.canonicalize(o,t.strict);e.inArray(a,n[t.context])<0&&(i[o]=e.encoder.encodeForHTMLAttribute(r[o]))}return i}};e.fn.encode=function(){var t=arguments.length,n={context:"html",unsafe:null,name:null,map:null,setter:null,strict:!0};return 1==t&&"object"==typeof arguments[0]?e.extend(n,arguments[0]):(n.context=arguments[0],2==arguments.length?"html"==n.context?n.unsafe=arguments[1]:("attr"==n.content||"css"==n.content)&&(n.map=arguments[1]):(n.name=arguments[1],n.unsafe=arguments[2])),"html"==n.context?n.setter=this.html:"css"==n.context?n.setter=this.css:"attr"==n.context&&(n.setter=this.attr),n.setter.call(this,o[n.context].call(this,n))};var a=Class.extend({_input:null,_pushback:null,_temp:null,_index:0,_mark:0,_hasNext:function(){return null==this._input?!1:0==this._input.length?!1:this._index<this._input.length},init:function(e){this._input=e},pushback:function(e){this._pushback=e},index:function(){return this._index},hasNext:function(){return null!=this._pushback?!0:this._hasNext()},next:function(){if(null!=this._pushback){var e=this._pushback;return this._pushback=null,e}return this._hasNext()?this._input.charAt(this._index++):null},nextHex:function(){var e=this.next();return null==e?null:e.match(/[0-9A-Fa-f]/)?e:null},peek:function(e){return e?this._pushback&&this._pushback==e?!0:this._hasNext()?this._input.charAt(this._index)==e:!1:this._pushback?this._pushback:this._hasNext()?this._input.charAt(this._index):null},mark:function(){this._temp=this._pushback,this._mark=this._index},reset:function(){this._pushback=this._temp,this._index=this._mark},remainder:function(){var e=this._input.substr(this._index);return null!=this._pushback&&(e=this._pushback+e),e}}),s=Class.extend({decode:function(e){for(var t="",n=new a(e);n.hasNext();){var r=this.decodeCharacter(n);t+=null!=r?r:n.next()}return t},decodeCharacter:function(e){return e.next()}}),u=s.extend({decodeCharacter:function(e){e.mark();var t=e.next();if(null==t||"&"!=t)return e.reset(),null;var n=e.next();if(null==n)return e.reset(),null;var r;if("#"==n){if(r=this._getNumericEntity(e),null!=r)return r}else if(n.match(/[A-Za-z]/)&&(e.pushback(n),r=this._getNamedEntity(e),null!=r))return r;return e.reset(),null},_getNamedEntity:function(e){var t,n,r="";n=Math.min(e.remainder().length,m.getMaxKeyLength());for(var i=0;n>i;i++)r+=e.next().toLowerCase();if(t=m.getLongestMatch(r),null==t)return null;e.reset(),e.next(),n=t.getKey().length;for(var o=0;n>o;o++)e.next();return e.peek(";")&&e.next(),t.getValue()},_getNumericEntity:function(e){var t=e.peek();return null==t?null:"x"==t||"X"==t?(e.next(),this._parseHex(e)):this._parseNumber(e)},_parseHex:function(e){for(var t="";e.hasNext();){var n=e.peek();if(isNaN(parseInt(n,16))){if(";"==n){e.next();break}break}t+=n,e.next()}var r=parseInt(t,16);return!isNaN(r)&&p(r)?String.fromCharCode(r):null},_parseNumber:function(e){for(var t="";e.hasNext();){var n=e.peek();if(isNaN(parseInt(n,10))){if(";"==n){e.next();break}break}t+=n,e.next()}var r=parseInt(t,10);return!isNaN(r)&&p(r)?String.fromCharCode(r):null}}),c=s.extend({decodeCharacter:function(e){e.mark();var t=e.next();if(null==t)return e.reset(),null;if("%"!=t)return e.reset(),null;for(var n="",r=0;2>r;r++){var i=e.nextHex();null!=i&&(n+=i)}if(2==n.length){var o=parseInt(n,16);if(p(o))return String.fromCharCode(o)}return e.reset(),null}}),l=s.extend({decodeCharacter:function(e){e.mark();var t=e.next();if(null==t||"\\"!=t)return e.reset(),null;var n=e.next();if(null==n)return e.reset(),null;switch(n){case"\r":e.peek("\n")&&e.next();case"\n":case"\f":case"\x00":return this.decodeCharacter(e)}if("NaN"==parseInt(n,16))return n;for(var r=n,i=0;5>i;i++){var o=e.next();if(null==o||f(o))break;if("NaN"==parseInt(o,16)){e.pushback(o);break}r+=o}var a=parseInt(r,16);return p(a)?String.fromCharCode(a):""}}),d=Class.extend({root:null,maxKeyLen:0,
size:0,init:function(){this.clear()},getLongestMatch:function(e){return null==this.root&&null==e?null:this.root.getLongestMatch(e,0)},getMaxKeyLength:function(){return this.maxKeyLen},clear:function(){this.root=null,this.maxKeyLen=0,this.size=0},put:function(e,t){var n,r;return null==this.root&&(this.root=new d.Node),null!=(r=this.root.put(e,0,t))?r:((n=e.length)>this.maxKeyLen&&(this.maxKeyLen=e.length),this.size++,null)}});d.Entry=Class.extend({_key:null,_value:null,init:function(e,t){this._key=e,this._value=t},getKey:function(){return this._key},getValue:function(){return this._value},equals:function(e){return e instanceof d.Entry?this._key==e._key&&this._value==e._value:!1}}),d.Node=Class.extend({_value:null,_nextMap:null,setValue:function(e){this._value=e},getNextNode:function(e){return this._nextMap?this._nextMap[e]:null},put:function(e,t,n){var r,i,o;return e.length==t?(o=this._value,this.setValue(n),o):(i=e.charAt(t),null==this._nextMap?(this._nextMap=d.Node.newNodeMap(),r=new d.Node,this._nextMap[i]=r):null==(r=this._nextMap[i])&&(r=new d.Node,this._nextMap[i]=r),r.put(e,t+1,n))},get:function(e,t){var n;return e.length<=t?this._value:null==(n=this.getNextNode(e.charAt(t)))?null:n.get(e,t+1)},getLongestMatch:function(e,t){var n,r;return e.length<=t?d.Entry.newInstanceIfNeeded(e,this._value):null==(n=this.getNextNode(e.charAt(t)))?d.Entry.newInstanceIfNeeded(e,t,this._value):null!=(r=n.getLongestMatch(e,t+1))?r:d.Entry.newInstanceIfNeeded(e,t,this._value)}}),d.Entry.newInstanceIfNeeded=function(){var e,t,n=arguments[0];return"string"==typeof arguments[1]?(e=arguments[1],t=n.length):(t=arguments[1],e=arguments[2]),null==e||null==n?null:(n.length>t&&(n=n.substr(0,t)),new d.Entry(n,e))},d.Node.newNodeMap=function(){return{}};var p=function(e){return e>=0&&1114111>=e},f=function(e){return e.match(/[\s]/)},h=[],g=[],m=new d;!function(){h["&quot"]="34",h["&amp"]="38",h["&lt"]="60",h["&gt"]="62",h["&nbsp"]="160",h["&iexcl"]="161",h["&cent"]="162",h["&pound"]="163",h["&curren"]="164",h["&yen"]="165",h["&brvbar"]="166",h["&sect"]="167",h["&uml"]="168",h["&copy"]="169",h["&ordf"]="170",h["&laquo"]="171",h["&not"]="172",h["&shy"]="173",h["&reg"]="174",h["&macr"]="175",h["&deg"]="176",h["&plusmn"]="177",h["&sup2"]="178",h["&sup3"]="179",h["&acute"]="180",h["&micro"]="181",h["&para"]="182",h["&middot"]="183",h["&cedil"]="184",h["&sup1"]="185",h["&ordm"]="186",h["&raquo"]="187",h["&frac14"]="188",h["&frac12"]="189",h["&frac34"]="190",h["&iquest"]="191",h["&Agrave"]="192",h["&Aacute"]="193",h["&Acirc"]="194",h["&Atilde"]="195",h["&Auml"]="196",h["&Aring"]="197",h["&AElig"]="198",h["&Ccedil"]="199",h["&Egrave"]="200",h["&Eacute"]="201",h["&Ecirc"]="202",h["&Euml"]="203",h["&Igrave"]="204",h["&Iacute"]="205",h["&Icirc"]="206",h["&Iuml"]="207",h["&ETH"]="208",h["&Ntilde"]="209",h["&Ograve"]="210",h["&Oacute"]="211",h["&Ocirc"]="212",h["&Otilde"]="213",h["&Ouml"]="214",h["&times"]="215",h["&Oslash"]="216",h["&Ugrave"]="217",h["&Uacute"]="218",h["&Ucirc"]="219",h["&Uuml"]="220",h["&Yacute"]="221",h["&THORN"]="222",h["&szlig"]="223",h["&agrave"]="224",h["&aacute"]="225",h["&acirc"]="226",h["&atilde"]="227",h["&auml"]="228",h["&aring"]="229",h["&aelig"]="230",h["&ccedil"]="231",h["&egrave"]="232",h["&eacute"]="233",h["&ecirc"]="234",h["&euml"]="235",h["&igrave"]="236",h["&iacute"]="237",h["&icirc"]="238",h["&iuml"]="239",h["&eth"]="240",h["&ntilde"]="241",h["&ograve"]="242",h["&oacute"]="243",h["&ocirc"]="244",h["&otilde"]="245",h["&ouml"]="246",h["&divide"]="247",h["&oslash"]="248",h["&ugrave"]="249",h["&uacute"]="250",h["&ucirc"]="251",h["&uuml"]="252",h["&yacute"]="253",h["&thorn"]="254",h["&yuml"]="255",h["&OElig"]="338",h["&oelig"]="339",h["&Scaron"]="352",h["&scaron"]="353",h["&Yuml"]="376",h["&fnof"]="402",h["&circ"]="710",h["&tilde"]="732",h["&Alpha"]="913",h["&Beta"]="914",h["&Gamma"]="915",h["&Delta"]="916",h["&Epsilon"]="917",h["&Zeta"]="918",h["&Eta"]="919",h["&Theta"]="920",h["&Iota"]="921",h["&Kappa"]="922",h["&Lambda"]="923",h["&Mu"]="924",h["&Nu"]="925",h["&Xi"]="926",h["&Omicron"]="927",h["&Pi"]="928",h["&Rho"]="929",h["&Sigma"]="931",h["&Tau"]="932",h["&Upsilon"]="933",h["&Phi"]="934",h["&Chi"]="935",h["&Psi"]="936",h["&Omega"]="937",h["&alpha"]="945",h["&beta"]="946",h["&gamma"]="947",h["&delta"]="948",h["&epsilon"]="949",h["&zeta"]="950",h["&eta"]="951",h["&theta"]="952",h["&iota"]="953",h["&kappa"]="954",h["&lambda"]="955",h["&mu"]="956",h["&nu"]="957",h["&xi"]="958",h["&omicron"]="959",h["&pi"]="960",h["&rho"]="961",h["&sigmaf"]="962",h["&sigma"]="963",h["&tau"]="964",h["&upsilon"]="965",h["&phi"]="966",h["&chi"]="967",h["&psi"]="968",h["&omega"]="969",h["&thetasym"]="977",h["&upsih"]="978",h["&piv"]="982",h["&ensp"]="8194",h["&emsp"]="8195",h["&thinsp"]="8201",h["&zwnj"]="8204",h["&zwj"]="8205",h["&lrm"]="8206",h["&rlm"]="8207",h["&ndash"]="8211",h["&mdash"]="8212",h["&lsquo"]="8216",h["&rsquo"]="8217",h["&sbquo"]="8218",h["&ldquo"]="8220",h["&rdquo"]="8221",h["&bdquo"]="8222",h["&dagger"]="8224",h["&Dagger"]="8225",h["&bull"]="8226",h["&hellip"]="8230",h["&permil"]="8240",h["&prime"]="8242",h["&Prime"]="8243",h["&lsaquo"]="8249",h["&rsaquo"]="8250",h["&oline"]="8254",h["&frasl"]="8260",h["&euro"]="8364",h["&image"]="8365",h["&weierp"]="8472",h["&real"]="8476",h["&trade"]="8482",h["&alefsym"]="8501",h["&larr"]="8592",h["&uarr"]="8593",h["&rarr"]="8594",h["&darr"]="8595",h["&harr"]="8596",h["&crarr"]="8629",h["&lArr"]="8656",h["&uArr"]="8657",h["&rArr"]="8658",h["&dArr"]="8659",h["&hArr"]="8660",h["&forall"]="8704",h["&part"]="8706",h["&exist"]="8707",h["&empty"]="8709",h["&nabla"]="8711",h["&isin"]="8712",h["&notin"]="8713",h["&ni"]="8715",h["&prod"]="8719",h["&sum"]="8721",h["&minus"]="8722",h["&lowast"]="8727",h["&radic"]="8730",h["&prop"]="8733",h["&infin"]="8734",h["&ang"]="8736",h["&and"]="8743",h["&or"]="8744",h["&cap"]="8745",h["&cup"]="8746",h["&int"]="8747",h["&there4"]="8756",h["&sim"]="8764",h["&cong"]="8773",h["&asymp"]="8776",h["&ne"]="8800",h["&equiv"]="8801",h["&le"]="8804",h["&ge"]="8805",h["&sub"]="8834",h["&sup"]="8835",h["&nsub"]="8836",h["&sube"]="8838",h["&supe"]="8839",h["&oplus"]="8853",h["&otimes"]="8855",h["&perp"]="8869",h["&sdot"]="8901",h["&lceil"]="8968",h["&rceil"]="8969",h["&lfloor"]="8970",h["&rfloor"]="8971",h["&lang"]="9001",h["&rang"]="9002",h["&loz"]="9674",h["&spades"]="9824",h["&clubs"]="9827",h["&hearts"]="9829",h["&diams"]="9830";for(var e in h)"function"!=typeof h[e]&&h.hasOwnProperty(e)&&(g[h[e]]=e);for(var t in g)if("function"!=typeof g[t]&&g.hasOwnProperty(t)){var n=g[t].toLowerCase().substr(1);m.put(n,String.fromCharCode(t))}}(),Object.freeze?(e.encoder=Object.freeze(e.encoder),e.fn.encode=Object.freeze(e.fn.encode)):Object.seal?(e.encoder=Object.seal(e.encoder),e.fn.encode=Object.seal(e.fn.encode)):Object.preventExtensions&&(e.encoder=Object.preventExtensions(e.encoder),e.fn.encode=Object.preventExtensions(e.fn.encode))}(jQuery),define("lib/jquery-encoder/jquery-encoder-0.1.0",["lib/jquery-encoder/libs/Class.create"],function(){}),define("scripts/components/common/util/jquery-encoder",["can","jquery","lib/jquery-encoder/jquery-encoder-0.1.0","scripts/components/common/util/lang"],function(e,t){var n=e.Construct.extend({encode:function(e){return t.isArray(e)?this.encodeArray(e):t.isPlainObject(e)?this.encodeObject(e):this.encodeSimpleValue(e)},doesNotRequireEncoding:function(e){return t.isBoolean(e)||t.isNumber(e)},isUrlValid:function(e){return/^https?:\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},encodeArray:function(e){var n=[],r=this;return t.each(e,function(e,t){n.push(r.encode(t))}),n},encodeObject:function(e){var n={},r=this;return t.each(e,function(e,t){n[e]=r.encode(t)}),n},encodeSimpleValue:function(e){return this.doesNotRequireEncoding(e)?e:this.isUrlValid(e)?encodeURI(e):t.encoder.encodeForHTML(e)}},{});return n}),define("scripts/anyware-widgets/base-widget/base-widget",["jquery","can","scripts/core/container/container","scripts/components/common/models/configuration-model","scripts/components/common/util/options-validator-util","scripts/components/common/util/jquery-encoder","lib/canjs/amd/can/control/plugin","can-proxy"],function(e,t,n,r,i,o){var a=t.Control.extend({pluginName:"",appId:"",defaults:{clientId:"",countryCode:"",acceptedCreditCardTypes:[],languageCode:"",landscape:"prod",marketSegment:"COM",autoLoad:!0,autoRun:!0,tunnelPath:"",debug:!1,timeout:15e3,requiredOptions:["clientId","countryCode"]}},{eventObj:{},init:function(){this.initStateFlags(),this.processOptions(),this.loadConfig()},initStateFlags:function(){this.isConfigLoaded=!1,this.isComponentRunning=!1},processOptions:function(){this.setAdditionalOptions(),this.encodeOptions(),this.checkRequiredOptions(),this.enforceOptionFormatting()},encodeOptions:function(){this.options=o.encode(this.options)},checkRequiredOptions:function(){for(var e=0;e<this.options.requiredOptions.length;e++){var t=this.options.requiredOptions[e];if(this.options[t].length<1)throw new Error("Missing Required Option: "+t)}},enforceOptionFormatting:function(){this.options.countryCode=this.options.countryCode.toUpperCase(),this.options.languageCode=this.options.languageCode.toLowerCase()},setAdditionalOptions:function(){},loadConfig:function(){var e={landscape:this.options.landscape,appId:this.constructor.appId,clientId:this.options.clientId,countryCode:this.options.countryCode,marketSegment:this.options.marketSegment,isLocal:this.options.isLocal,debug:this.options.debug};this.configurationModel=new r(e),this.configurationModel.load(this,this.proxy("onConfigLoaded"),this.proxy("onConfigError"))},onConfigLoaded:function(){var e=this.configurationModel.attr();this.isConfigLoaded=!0,this.triggerEvent("configured",{configurationData:e}),this.options=i.validateOptions(this.options,e),this.options.autoLoad&&this.load()},onConfigError:function(e){this.configErrorOccurred=!0,this.triggerEvent("errorEvent",e)},isConfigured:function(){return this.isConfigLoaded},load:function(){if(this.container)throw new Error("Load requested, but component is already loaded.");this.container=this.createContainer(),this.container.loadComponent(this.proxy("onComponentLoaded")),this.container.subscribe("**",this.proxy("globalHandler"))},loaded:function(){return this.isLoaded()},isLoaded:function(){var e=!1;return this.container&&(e=this.container.isConnected()),e},onComponentLoaded:function(){this.triggerEvent("loaded"),this.subscribeToHubEvents(),this.options.autoRun&&this.run()},createContainer:function(){var e=this.constructor.appId,t=this.element[0],r=this.configurationModel.attr("appUrl"),i=this.options.tunnelPath,o=this.options.iframeAttrs,a=this.options.timeout,s=new n(e,t,r,i,o,a);return this.setContainerListeners(),s},subscribe:function(e,t){this.eventObj[e]=this.eventObj[e]||[],this.eventObj[e].push(t)},globalHandler:function(t,n){var r=t.split("."),i=r[r.length-1];e.isArray(this.eventObj[i])?this.triggerSubscribe(i,n):this.triggerDefault(i,n)},triggerSubscribe:function(e,t){for(var n=this.eventObj[e],r=0;r<n.length;r++)"function"==typeof n[r]?n[r](e,t):this.triggerDefault(e,t)},triggerDefault:function(e,t){this.triggerEvent(e,t)},run:function(){if(this.isComponentRunning)throw new Error("Run requested, but component is already running.");this.isLoaded()&&this.initializeComponent()},isRunning:function(){return this.isComponentRunning},initializeComponent:function(){if(this.isLoaded()){var e=this.getComponentData();this.container.publish("initialize",e),this.isComponentRunning=!0}},getComponentData:function(){return{initOptions:this.options,configuration:this.configurationModel.attr()}},destroy:function(){this.isLoaded()&&this.container.unloadComponent(),t.Control.prototype.destroy.call(this)},unload:function(){this.isLoaded()&&(this.container.unloadComponent(),this.element.empty().trigger("unloaded"))},reload:function(){this.isLoaded()&&(this.container.unloadComponent(),this.container.loadComponent(this.proxy("componentReloaded")))},componentReloaded:function(){this.isComponentRunning&&(this.isComponentRunning=!1,this.run())},subscribeToHubEvents:function(){},setContainerListeners:function(){this.subscribe("formError",this.proxy("onFormError")),this.subscribe("validationError",this.proxy("onValidationError"))},onFormError:function(e,t){var n="FORM_ERROR";this.triggerEvent("errorEvent",{errorType:n,errors:t})},onValidationError:function(e,t){var n="VALIDATION_ERROR";this.triggerEvent("errorEvent",{errorType:n,errors:t})},triggerEvent:function(e,t){this.element&&this.element.trigger(e,t)},__getAppUrl:function(){return this.configurationModel.attr("appUrl")},__setAppUrl:function(e){this.configurationModel.attr("appUrl",e)}});return a}),define("tokenizer",["jquery","scripts/anyware-widgets/base-widget/base-widget","lib/canjs/amd/can/control/plugin","can-super"],function(e,t){var n=t.extend({pluginName:"anyware_payment_tokenizer",appId:"tokenizer"},{checkRequiredOptions:function(){this.options.requiredOptions.push("acceptedCreditCardTypes"),this._super()},setAddress:function(e){this.container.publish("setAddress",e)},getToken:function(){this.container.publish("getToken")},clearData:function(){this.container.publish("clearData")},subscribeToHubEvents:function(){var e=this;this.subscribe("tokenErrorReceived",function(t,n){e.onTokenErrorReceived(t,n)})},onTokenErrorReceived:function(t,n){n.errorType="TOKENIZATION_ERROR",e(this.element).trigger("errorEvent",n)}});return n}),define("can/util/string/deparam",["can/util/library","can/util/string"],function(e){var t=/^\d+$/,n=/([^\[\]]+)|(\[\])/g,r=/([^?#]*)(#.*)?$/,i=function(e){return decodeURIComponent(e.replace(/\+/g," "))};return e.extend(e,{deparam:function(o){var a,s,u={};return o&&r.test(o)&&(a=o.split("&"),e.each(a,function(e){var r=e.split("="),o=i(r.shift()),a=i(r.join("=")),c=u;if(o){r=o.match(n);for(var l=0,d=r.length-1;d>l;l++)c[r[l]]||(c[r[l]]=t.test(r[l+1])||"[]"===r[l+1]?[]:{}),c=c[r[l]];s=r.pop(),"[]"===s?c.push(a):c[s]=a}})),u}}),e}),define("scripts/components/common/util/page-util",["jquery","can","can/util/string/deparam"],function(e,t){var n={getUrlParameter:function(e){for(var t,n=window.location.search.substring(1),r=n.split("&"),i=0;i<r.length;i++)if(t=r[i].split("="),t[0]===e)return t[1]},getUrlParameters:function(){var e=window.location.search.substring(1);return t.deparam(e)},addParamToUrl:function(e,t,n){var r,i,o,a;return e.indexOf(t+"=")>=0?(r=e.substring(0,e.indexOf(t)),i=e.substring(e.indexOf(t)),i=i.substring(i.indexOf("=")+1),i=i.indexOf("&")>=0?i.substring(i.indexOf("&")):"",e=r+t+"="+n+i):(o=e.split("#"),e=o[0],a=o[1]?"#"+o[1]:"",e+=e.indexOf("?")<0?"?":"&",e+=t+"="+n,e+=a),e},removeParamFromUrl:function(e,t){var n=this.getParamIndex(e,t);if(n>-1){var r,i,o=e.substring(0,n-1),a=e.substring(n),s=a.indexOf("&"),u=a.indexOf("#");s>-1?(r=e.charAt(n-1),i=s+1):u>-1&&(r="#",i=u+1),a=i?r+a.substring(i):"",e=o+a}return e},getParamIndex:function(e,t){var n=-1,r=["?","&","#"],i=e.indexOf(t+"="),o=(e.substring(i),e.charAt(i-1)),a=r.indexOf(o);return i>-1&&a>-1&&(n=i),n}};return n}),define("checkout",["jquery","can","scripts/anyware-widgets/base-widget/base-widget","scripts/components/common/util/page-util","scripts/components/common/util/jquery-encoder","lib/canjs/amd/can/control/plugin","scripts/components/common/util/lang","can-proxy","can-super"],function(e,t,n,r,i){var o=n.extend({pluginName:"anyware_checkout",appId:"checkout",ORDER_VALIDATED_EVENT:"orderValidated",ORDER_COMPLETED_EVENT:"orderCompleted",ORDER_STATUS_CHANGE_EVENT:"orderStatusChanged",PAYMENT_METHOD_SELECTED_EVENT:"paymentMethodSelected",SIGN_OUT_REQUESTED:"signOutRequested",CANCEL_PAGE_REQUESTED:"cancelPageRequested",READY_EVENT:"ready",ERROR_ORDER_NOT_VALIDATED:"Error! : Order Not In VALIDATED State!",UNIVERSAL_APP_PATH:"/anyware/latest/universal/checkout/index.html",UNIVERSAL_APP_PATH_LOCAL:"/app/universal/checkout/index.html",ORDER_STATUS_VALIDATED:"VALIDATED"},{order:{},setAdditionalOptions:function(){var t,n;e.isValue(this.options.payPalReturnUrl)||(this.options.payPalReturnUrl=window.location.href),e.isValue(this.options.cartId)||(t=r.getUrlParameter("cartId"),e.isValue(t)&&(this.options.cartId=t)),n=r.getUrlParameter("paypal"),e.isValue(n)&&(this.options.paypal=n)},orderValid:function(){return void 0!==this.order&&this.order.status===this.constructor.ORDER_STATUS_VALIDATED},validateOrder:function(){this.orderValid()?this.orderValidated({},{order:this.order}):this.container.publish("validateOrder")},placeOrder:function(){if(!this.orderValid())throw new Error(this.constructor.ERROR_ORDER_NOT_VALIDATED);this.container.publish("placeOrder")},requiresRedirect:function(){var e=this.configurationModel.attr();return!!e.redirectRequired},getRedirectUrl:function(){return this.redirectUrl},setItems:function(e){this.options.items=e,this.options.cartId=null,this.isComponentRunning&&this.reload()},updatePayPalReturnUrl:function(e){this.options.payPalReturnUrl=e||window.location.href},subscribeToHubEvents:function(){this.subscribe("orderStatusChange",this.proxy("orderStatusChange")),this.subscribe("orderValidated",this.proxy("orderValidated")),this.subscribe("orderCompleted",this.proxy("orderCompleted")),this.subscribe("paymentMethodSelected",this.proxy("paymentMethodSelected")),this.subscribe("uiReady",this.proxy("uiReady")),this.subscribe("payPalFlowRequested",this.proxy("payPalFlowRequested")),this.subscribe("signOutRequested",this.proxy("signOutRequested")),this.subscribe("cancelPageRequested",this.proxy("cancelPageRequested"))},orderStatusChange:function(e,t){this.order=t.order,this.triggerEvent(this.constructor.ORDER_STATUS_CHANGE_EVENT,t)},orderValidated:function(e,t){this.order=t.order,this.triggerEvent(this.constructor.ORDER_VALIDATED_EVENT,t)},orderCompleted:function(e,t){this.order=t.order,this.triggerEvent(this.constructor.ORDER_COMPLETED_EVENT,t),this.unload()},paymentMethodSelected:function(e,t){this.order=t.order,this.triggerEvent(this.constructor.PAYMENT_METHOD_SELECTED_EVENT,t)},uiReady:function(e){this.triggerEvent(this.constructor.READY_EVENT)},payPalFlowRequested:function(e,t){var n=t.redirectUrl;window.location.href=n},signOutRequested:function(e,t){this.triggerEvent(this.constructor.SIGN_OUT_REQUESTED,t)},cancelPageRequested:function(e,t){this.triggerEvent(this.constructor.CANCEL_PAGE_REQUESTED,t)},onConfigLoaded:function(){this.checkForRedirect(),this._super(),this.checkForPendingUniversalRequest()},load:function(){this.isEmbedded()?this._super():!this.isUniversalMode()&&this.options.autoRun&&this.run()},run:function(){this.requiresRedirect()?this.performRedirect():this._super()},isEmbedded:function(){return!this.requiresRedirect()&&!this.isUniversalMode()},checkForRedirect:function(){this.requiresRedirect()&&this.setRedirectUrl()},setRedirectUrl:function(){this.redirectOptions={marketSegment:this.getRedirectMarketSegment(),languageCode:this.getRedirectLanguageCode()};var e=this.configurationModel.attr(),t=e.redirectUrl,n=this.parseRedirectUrl(t);this.redirectUrl=this.processRedirectUrl(n)},parseRedirectUrl:function(t){if(e.isString(t))return t;for(var n in t)return this.parseRedirectUrl(t[n][this.redirectOptions[n]])},processRedirectUrl:function(e){var t=this.configurationModel.attr(),n=t.redirectVendor,r=this.options.items,i=e;if("DIGITAL_RIVER"===n){if(!r||1!==r.length)throw new Error("Item Not Found or More than One Item Found");var o=r[0].productKey;i=e.replace("<product_key>",o)}return i},getRedirectMarketSegment:function(){return this.options.marketSegment},getRedirectLanguageCode:function(){var e=this.configurationModel.attr(),t=this.options.languageCode,n=e.supportedLanguages,r=e.defaultLanguage;return this.isSupportedLanguage(t,n)||(t=r),t},isSupportedLanguage:function(n,r){var i=t.makeArray(r);return e.inArray(n,i)>-1},performRedirect:function(){var e=this.getRedirectUrl();this.options.autoRedirect?this.redirectToUrl(e):this.triggerEvent("redirectToCheckout",e)},redirectToUrl:function(e){window.location=e},isUniversalMode:function(){return!!this.options.universalMode},startUniversalCheckout:function(e){this.configErrorOccurred||(this.isConfigured()?this.performUniversalRedirect(e):this.savePendingUniversalRequest(e))},performUniversalRedirect:function(e){var t;this.requiresRedirect()?this.performRedirect():(t=this.assembleUniversalUrl(e),this.redirectToUrl(t))},checkForPendingUniversalRequest:function(){e.isValue(this.pendingUniversalRequest)&&this.startUniversalCheckout(this.pendingUniversalRequest.options)},savePendingUniversalRequest:function(e){this.pendingUniversalRequest={options:e}},assembleUniversalUrl:function(e){var t=this.getUrlParams(e),n=this.getBaseUrl()+this.getAppPath()+"?"+t;return n},getUrlParams:function(t){var n=this.getUniversalParams(t),r=["debug","autoLoad","autoRun","requiredOptions","autoRedirect","payPalReturnUrl","paypal","tunnelPath"];e.isValue(n.debug)&&n.debug&&(n.compress=!1);for(var i=0;i<r.length;i++){var o=r[i];e.isValue(n[o])&&delete n[o]}return e.param(n)},getUniversalParams:function(t){var n=e.extend(!0,{},this.options,t),r=this.getRedirectLanguageCode();return n.languageCode=r,n},getBaseUrl:function(){var e="",t=this.configurationModel.attr();return this.options.isLocal||(e=t.baseUrl[this.options.landscape]),e},getAppPath:function(){return this.options.isLocal?this.constructor.UNIVERSAL_APP_PATH_LOCAL:this.constructor.UNIVERSAL_APP_PATH}});return o}),define("scripts/anyware-widgets/price-display/price-display-controller",["jquery","can","scripts/anyware-widgets/base-widget/base-widget"],function(e,t,n){var r=n.extend({pluginName:"price_display_controller",appId:"priceDisplay",requiredOptions:[]},{getPrices:function(e){this.container.publish("getPrices",e)}});return r}),define("price-display",["jquery","can","scripts/anyware-widgets/price-display/price-display-controller","lib/canjs/amd/can/control/plugin","can-super","can-proxy"],function(e,t,n){var r=t.Control.extend({pluginName:"anyware_price_display",appId:"priceDisplay",defaults:{styles:{PRICE_TYPE_LABEL:"",FORMATTED_PRICE_CONTAINER:"",SUBSCRIPTION_TERM_LABEL:"",TAX_LABEL:"",ORIGINAL_PRICE:"EcommPrice_originalPrice",CURRENCY_SYMBOL:"cart-price-currency-symbol",INTEGER_PRICE_VALUE:"cart-price-dollar",DECIMAL_PRICE_VALUE:"cart-price-cent",INT_DELIMITER:"cart-price-integer-delimiter",DECIMAL_DELIMITER:"cart-price-decimal-delimiter",PRICE_STYLE:"CartCostWeak"}},widgetCount:0,numberOfWidgets:0,widgetsByMarketSegment:{COM:[],EDU:[]},mainControl:null,onConfigured:function(e,t){},onApplicationReady:function(e,t){var n=this.getPriceData();n.options=this.options,this.mainControl.getPrices(n)},onPriceLabelsReady:function(e,t){for(var n=this.widgetsByMarketSegment[t.marketSegment],r=t.priceLabelDivs,i=0;i<n.length;i++)n[i].element.append(r[i])},registerWidget:function(t,n){var r,i;this.numberOfWidgets||(this.numberOfWidgets=e(n).length),i=t.element.data().marketSegment||"COM",this.widgetsByMarketSegment[i.toUpperCase()].push(t),this.widgetCount++,this.mainControl||this.widgetCount!==this.numberOfWidgets||(r=t.options,this.createMainControl(r))},getPriceData:function(){var t,n,r={COM:[],EDU:[]},i=this;return e.each(this.widgetsByMarketSegment,function(o,a){for(var s=0;s<a.length;s++){var u=a[s];n=u.options,t=i.getWidgetData(u),r[o].push(e.extend(!0,{},n,t))}}),r},getWidgetData:function(t){var n=e.extend(!0,{},t.element.data());return n.controls=null,n},createMainControl:function(t){var r=e('<div id="price-display-controller" style="height:0px;width:0px"></div>');e("body").append(r),r.on("configured",e.proxy(this,"onConfigured")),r.on("applicationReady",e.proxy(this,"onApplicationReady")),r.on("priceLabelsReady",e.proxy(this,"onPriceLabelsReady")),this.mainControl=new n(r,t)},destroyMainController:function(){e("#price-display-controller").remove(),this.mainControl=null},unregisterWidget:function(e){var t=e.element.data().marketSegment||"COM",n=this.widgetsByMarketSegment[t.toUpperCase()];this.widgetCount--,this.numberOfWidgets--,n.splice(n.indexOf(e),1),0===this.numberOfWidgets&&this.destroyMainController()}},{init:function(){this.constructor.registerWidget(this,this.options.selector)},destroy:function(){this.constructor.unregisterWidget(this),this._super()}});return r}),define("live-person-chat",["jquery","scripts/anyware-widgets/base-widget/base-widget","lib/canjs/amd/can/control/plugin","can-super"],function(e,t){var n=t.extend({pluginName:"anyware_live_person_chat",appId:"lpchat",IFRAME_ANIMATION_TIME:400},{setAdditionalOptions:function(){this.options.iframeAttrs={style:{width:"450px",height:"400px",display:"none"}}},chatEventHandler:function(e){try{this.container.publish("chatEventHandler",e)}catch(t){}},subscribeToHubEvents:function(){this.subscribe("iframeDisplay",this.proxy("onIframeDisplay"))},onIframeDisplay:function(t,n){var r=e(".anyware-iframe");n.display?r.show(this.constructor.IFRAME_ANIMATION_TIME):r.hide(this.constructor.IFRAME_ANIMATION_TIME)}});return n}),define("quote-generator",["jquery","can","scripts/anyware-widgets/base-widget/base-widget","scripts/components/common/util/page-util","scripts/components/common/util/jquery-encoder","lib/canjs/amd/can/control/plugin","scripts/components/common/util/lang","can-proxy","can-super"],function(e,t,n,r,i){var o=n.extend({pluginName:"anyware_quote_generator",appId:"quoteGenerator",READY_EVENT:"ready",QUOTE_GENERATOR_APP_PATH:"/anyware/latest/universal/quote-generator/index.html",QUOTE_GENERATOR_APP_PATH_LOCAL:"/app/universal/quote-generator/index.html"},{setAdditionalOptions:function(){},setItems:function(e){this.options.items=e,this.isComponentRunning&&this.reload()},subscribeToHubEvents:function(){},uiReady:function(e){this.triggerEvent(this.constructor.READY_EVENT)},onConfigLoaded:function(){this._super(),this.checkForPendingQuoteGeneratorRequest()},load:function(){},run:function(){this._super()},getRedirectLanguageCode:function(){var e=this.configurationModel.attr(),t=this.options.languageCode,n=e.supportedLanguages,r=e.defaultLanguage;return this.isSupportedLanguage(t,n)||(t=r),t},isSupportedLanguage:function(n,r){var i=t.makeArray(r);return e.inArray(n,i)>-1},redirectToUrl:function(e){window.location=e},startQuoteGenerator:function(e){this.configErrorOccurred||(this.isConfigured()?this.performQuoteGeneratorRedirect(e):this.savePendingQuoteGeneratorRequest(e))},performQuoteGeneratorRedirect:function(e){var t;t=this.assembleQuoteGeneratorUrl(e),this.redirectToUrl(t)},checkForPendingQuoteGeneratorRequest:function(){e.isValue(this.pendingQuoteGeneratorRequest)&&this.startQuoteGenerator(this.pendingQuoteGeneratorRequest.options)},savePendingQuoteGeneratorRequest:function(e){this.pendingQuoteGeneratorRequest={options:e}},assembleQuoteGeneratorUrl:function(e){var t=this.getUrlParams(e),n=this.getBaseUrl()+this.getAppPath()+"?"+t;return n},getUrlParams:function(t){var n=this.getQuoteGeneratorParams(t),r=["debug","autoLoad","autoRun","requiredOptions","autoRedirect","tunnelPath"];e.isValue(n.debug)&&n.debug&&(n.compress=!1);for(var i=0;i<r.length;i++){var o=r[i];e.isValue(n[o])&&delete n[o]}return e.param(n)},getQuoteGeneratorParams:function(t){var n=e.extend(!0,{},this.options,t),r=this.getRedirectLanguageCode();return n.languageCode=r,n},getBaseUrl:function(){var e="",t=this.configurationModel.attr();return this.options.isLocal||(e=t.baseUrl[this.options.landscape]),e},getAppPath:function(){return this.options.isLocal?this.constructor.QUOTE_GENERATOR_APP_PATH_LOCAL:this.constructor.QUOTE_GENERATOR_APP_PATH}});return o}),require(["jquery","price-generator","product-configurator","tokenizer","checkout","price-display","live-person-chat","quote-generator"],function(e,t){e.createNs("Adobe.Anyware"),Adobe.Anyware.PriceGenerator=t,e(document).trigger("anywareReady")}),define("scripts/anyware-widgets/anyware-widgets",function(){})}();
