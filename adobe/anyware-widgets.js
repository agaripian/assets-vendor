/**
 * AnywareComponents - 2.40.0-jenkins-AWC_AnywareComponents_master-74 (2015-07-28)
 * Collection of resusable Adobe Anyware Widgets
 * Copyright (c) 2015 Adobe Systems Inc
 */

/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*!
* CanJS - 1.1.5 (2013-03-27)
* http://canjs.us/
* Copyright (c) 2013 Bitovi
* Licensed MIT
*/

/*
 * jQuery JSONP Core Plugin 2.4.0 (2012-08-21)
 *
 * https://github.com/jaubourg/jquery-jsonp
 *
 * Copyright (c) 2012 Julian Aubourg
 *
 * This document is licensed as free software under the terms of the
 * MIT License: http://www.opensource.org/licenses/mit-license.php
 */

/**
 * @license RequireJS text 2.0.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*******************************************************************************
 * OpenAjax-mashup.js
 *
 * Reference implementation of the OpenAjax Hub, as specified by OpenAjax Alliance.
 * Specification is under development at:
 *
 *   http://www.openajax.org/member/wiki/OpenAjax_Hub_Specification
 *
 * Copyright 2006-2009 OpenAjax Alliance
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at http://www.apache.org/licenses/LICENSE-2.0 . Unless
 * required by applicable law or agreed to in writing, software distributed
 * under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations under the License.
 *
 ******************************************************************************/

/*

        Copyright 2006-2009 OpenAjax Alliance

        Licensed under the Apache License, Version 2.0 (the "License");
        you may not use this file except in compliance with the License.
        You may obtain a copy of the License at

                http://www.apache.org/licenses/LICENSE-2.0

        Unless required by applicable law or agreed to in writing, software
        distributed under the License is distributed on an "AS IS" BASIS,
        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
        See the License for the specific language governing permissions and
        limitations under the License.
*/

/*

        Copyright 2006-2009 OpenAjax Alliance

        Licensed under the Apache License, Version 2.0 (the "License");
        you may not use this file except in compliance with the License.
        You may obtain a copy of the License at

                http://www.apache.org/licenses/LICENSE-2.0

        Unless required by applicable law or agreed to in writing, software
        distributed under the License is distributed on an "AS IS" BASIS,
        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
        See the License for the specific language governing permissions and
        limitations under the License.
*/

/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */

/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements. See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership. The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations under the License.
 */

/*
 * Copyright (c) 2010 - The OWASP Foundation
 *
 * The jquery-encoder is published by OWASP under the MIT license. You should read and accept the
 * LICENSE before you use, modify, and/or redistribute this software.
 */

!function(){var requirejs,require,define;!function(e){function t(e,t){return b.call(e,t)}function n(e,t){var n,r,i,o,a,s,u,c,l,d,f,p=t&&t.split("/"),h=g.map,m=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(p=p.slice(0,p.length-1),e=e.split("/"),a=e.length-1,g.nodeIdCompat&&y.test(e[a])&&(e[a]=e[a].replace(y,"")),e=p.concat(e),l=0;l<e.length;l+=1)if(f=e[l],"."===f)e.splice(l,1),l-=1;else if(".."===f){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||m)&&h){for(n=e.split("/"),l=n.length;l>0;l-=1){if(r=n.slice(0,l).join("/"),p)for(d=p.length;d>0;d-=1)if(i=h[p.slice(0,d).join("/")],i&&(i=i[r])){o=i,s=l;break}if(o)break;!u&&m&&m[r]&&(u=m[r],c=l)}!o&&u&&(o=u,s=c),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function r(t,n){return function(){return l.apply(e,v.call(arguments,0).concat([t,n]))}}function i(e){return function(t){return n(t,e)}}function o(e){return function(t){p[e]=t}}function a(n){if(t(h,n)){var r=h[n];delete h[n],m[n]=!0,c.apply(e,r)}if(!t(p,n)&&!t(m,n))throw new Error("No "+n);return p[n]}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function u(e){return function(){return g&&g.config&&g.config[e]||{}}}var c,l,d,f,p={},h={},g={},m={},b=Object.prototype.hasOwnProperty,v=[].slice,y=/\.js$/;d=function(e,t){var r,o=s(e),u=o[0];return e=o[1],u&&(u=n(u,t),r=a(u)),u?e=r&&r.normalize?r.normalize(e,i(t)):n(e,t):(e=n(e,t),o=s(e),u=o[0],e=o[1],u&&(r=a(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:r}},f={require:function(e){return r(e)},exports:function(e){var t=p[e];return"undefined"!=typeof t?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:u(e)}}},c=function(n,i,s,u){var c,l,g,b,v,y,_=[],x=typeof s;if(u=u||n,"undefined"===x||"function"===x){for(i=!i.length&&s.length?["require","exports","module"]:i,v=0;v<i.length;v+=1)if(b=d(i[v],u),l=b.f,"require"===l)_[v]=f.require(n);else if("exports"===l)_[v]=f.exports(n),y=!0;else if("module"===l)c=_[v]=f.module(n);else if(t(p,l)||t(h,l)||t(m,l))_[v]=a(l);else{if(!b.p)throw new Error(n+" missing "+l);b.p.load(b.n,r(u,!0),o(l),{}),_[v]=p[l]}g=s?s.apply(p[n],_):void 0,n&&(c&&c.exports!==e&&c.exports!==p[n]?p[n]=c.exports:g===e&&y||(p[n]=g))}else n&&(p[n]=s)},requirejs=require=l=function(t,n,r,i,o){if("string"==typeof t)return f[t]?f[t](n):a(d(t,n).f);if(!t.splice){if(g=t,g.deps&&l(g.deps,g.callback),!n)return;n.splice?(t=n,n=r,r=null):t=e}return n=n||function(){},"function"==typeof r&&(r=i,i=o),i?c(e,t,n,r):setTimeout(function(){c(e,t,n,r)},4),l},l.config=function(e){return l(e)},requirejs._defined=p,define=function(e,n,r){n.splice||(r=n,n=[]),t(p,e)||t(h,e)||(h[e]=[e,n,r])},define.amd={jQuery:!0}}(),define("lib/almond/almond",function(){}),define("jquery",[],function(){return window.$}),define("can/util/can",[],function(){var e=window.can||{};("undefined"==typeof GLOBALCAN||GLOBALCAN!==!1)&&(window.can=e),e.isDeferred=function(e){var t=this.isFunction;return e&&t(e.then)&&t(e.pipe)};var t=0;return e.cid=function(e,n){return e._cid?e._cid:e._cid=(n||"")+ ++t},e}),define("can/util/array/each",["can/util/can"],function(e){return e.each=function(e,t,n){var r,i=0;if(e)if("number"==typeof e.length&&e.pop)for(e.attr&&e.attr("length"),r=e.length;r>i&&t.call(n||e[i],e[i],i,e)!==!1;i++);else if(e.hasOwnProperty)for(r in e)if(e.hasOwnProperty(r)&&t.call(n||e[r],e[r],r,e)===!1)break;return e},e}),define("can/util/jquery",["jquery","can/util/can","can/util/array/each"],function(e,t){e.extend(t,e,{trigger:function(t,n,r){t.trigger?t.trigger(n,r):e.event.trigger(n,r,t,!0)},addEvent:function(t,n){return e([this]).bind(t,n),this},removeEvent:function(t,n){return e([this]).unbind(t,n),this},buildFragment:function(t,n){var r,i=e.buildFragment;return t=[t],n=n||document,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,r=i.call(jQuery,t,n),r.cacheable?e.clone(r.fragment):r.fragment||r},$:e,each:t.each}),e.each(["bind","unbind","undelegate","delegate"],function(n,r){t[r]=function(){var t=this[r]?this:e([this]);return t[r].apply(t,arguments),this}}),e.each(["append","filter","addClass","remove","data","get"],function(e,n){t[n]=function(e){return e[n].apply(e,t.makeArray(arguments).slice(1))}});var n=e.cleanData;return e.cleanData=function(r){e.each(r,function(e,n){n&&t.trigger(n,"destroyed",[],!1)}),n(r)},t}),define("can/util/library",["can/util/jquery"],function(e){return e}),define("can/util/string",["can/util/library"],function(e){var t=/_|-/,n=/\=\=/,r=/([A-Z]+)([A-Z][a-z])/g,i=/([a-z\d])([A-Z])/g,o=/([a-z\d])([A-Z])/g,a=/\{([^\}]+)\}/g,s=/"/g,u=/'/g,c=function(e,t,n){return t in e?e[t]:n&&(e[t]={})},l=function(e){return/^f|^o/.test(typeof e)};return e.extend(e,{esc:function(e){var t=null===e||void 0===e||isNaN(e)&&""+e=="NaN";return(""+(t?"":e)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(s,"&#34;").replace(u,"&#39;")},getObject:function(t,n,r){var i,o,a,s=t?t.split("."):[],u=s.length,d=0;if(n=e.isArray(n)?n:[n||window],!u)return n[0];for(;n[d];){for(i=n[d],a=0;u-1>a&&l(i);a++)i=c(i,s[a],r);if(l(i)&&(o=c(i,s[a],r),void 0!==o))return r===!1&&delete i[s[a]],o;d++}},capitalize:function(e,t){return e.charAt(0).toUpperCase()+e.slice(1)},underscore:function(e){return e.replace(n,"/").replace(r,"$1_$2").replace(i,"$1_$2").replace(o,"_").toLowerCase()},sub:function(t,n,r){var i=[];return i.push(t.replace(a,function(t,o){var a=e.getObject(o,n,void 0===r?r:!r);return void 0===a?(i=null,""):l(a)&&i?(i.push(a),""):""+a})),null===i?i:i.length<=1?i[0]:i},replacer:a,undHash:t}),e}),define("can/construct",["can/util/string"],function(e){var t=0;return e.Construct=function(){return arguments.length?e.Construct.extend.apply(e.Construct,arguments):void 0},e.extend(e.Construct,{newInstance:function(){var e,t=this.instance();arguments;return t.setup&&(e=t.setup.apply(t,arguments)),t.init&&t.init.apply(t,e||arguments),t},_inherit:function(t,n,r){e.extend(r||t,t||{})},_overwrite:function(e,t,n,r){e[n]=r},setup:function(t,n){this.defaults=e.extend(!0,{},t.defaults,this.defaults)},instance:function(){t=1;var e=new this;return t=0,e},extend:function(n,r,i){function o(){return t?void 0:this.constructor!==o&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.constructor.newInstance.apply(this.constructor,arguments)}"string"!=typeof n&&(i=r,r=n,n=null),i||(i=r,r=null),i=i||{};var a,s,u,c,l=this,d=this.prototype;c=this.instance(),e.Construct._inherit(i,d,c);for(a in l)l.hasOwnProperty(a)&&(o[a]=l[a]);if(e.Construct._inherit(r,l,o),n){var f=n.split("."),s=f.pop(),p=e.getObject(f.join("."),window,!0),u=p,h=e.underscore(n.replace(/\./g,"_")),g=e.underscore(s);p[s]=o}e.extend(o,{constructor:o,prototype:c,namespace:u,shortName:s,_shortName:g,fullName:n,_fullName:h}),o.prototype.constructor=o;var m=[l].concat(e.makeArray(arguments)),b=o.setup.apply(o,m);return o.init&&o.init.apply(o,b||m),o}}),e.Construct}),define("can/control",["can/util/library","can/construct"],function(e){var t,n=function(t,n,r){return e.bind.call(t,n,r),function(){e.unbind.call(t,n,r)}},r=e.isFunction,i=e.extend,o=e.each,a=[].slice,s=/\{([^\}]+)\}/g,u=e.getObject("$.event.special",[e])||{},c=function(t,n,r,i){return e.delegate.call(t,n,r,i),function(){e.undelegate.call(t,n,r,i)}},l=function(t,r,i,o){return o?c(t,e.trim(o),r,i):n(t,r,i)},d=e.Control=e.Construct({setup:function(){if(e.Construct.setup.apply(this,arguments),e.Control){var t,n=this;n.actions={};for(t in n.prototype)n._isAction(t)&&(n.actions[t]=n._action(t))}},_shifter:function(t,n){var i="string"==typeof n?t[n]:n;return r(i)||(i=t[i]),function(){return t.called=n,i.apply(t,[this.nodeName?e.$(this):this].concat(a.call(arguments,0)))}},_isAction:function(e){var t=this.prototype[e],n=typeof t;return"constructor"!==e&&("function"==n||"string"==n&&r(this.prototype[t]))&&!!(u[e]||f[e]||/[^\w]/.test(e))},_action:function(n,r){if(s.lastIndex=0,r||!s.test(n)){var i=r?e.sub(n,[r,window]):n;if(!i)return null;var o=e.isArray(i),a=o?i[1]:i,u=a.split(/\s+/g),c=u.pop();return{processor:f[c]||t,parts:[a,u.join(" "),c],delegate:o?i[0]:void 0}}},processors:{},defaults:{}},{setup:function(t,n){var r,o=this.constructor,a=o.pluginName||o._fullName;return this.element=e.$(t),a&&"can_control"!==a&&this.element.addClass(a),(r=e.data(this.element,"controls"))||e.data(this.element,"controls",r=[]),r.push(this),this.options=i({},o.defaults,n),this.on(),[this.element,this.options]},on:function(t,n,r,i){if(!t){this.off();var o,a,s=this.constructor,u=this._bindings,c=s.actions,d=this.element,f=e.Control._shifter(this,"destroy");for(o in c)c.hasOwnProperty(o)&&(a=c[o]||s._action(o,this.options))&&u.push(a.processor(a.delegate||d,a.parts[2],a.parts[1],o,this));return e.bind.call(d,"destroyed",f),u.push(function(t){e.unbind.call(t,"destroyed",f)}),u.length}return"string"==typeof t&&(i=r,r=n,n=t,t=this.element),void 0===i&&(i=r,r=n,n=null),"string"==typeof i&&(i=e.Control._shifter(this,i)),this._bindings.push(l(t,r,i,n)),this._bindings.length},off:function(){var e=this.element[0];o(this._bindings||[],function(t){t(e)}),this._bindings=[]},destroy:function(){var t,n=this.constructor,r=n.pluginName||n._fullName;this.off(),r&&"can_control"!==r&&this.element.removeClass(r),t=e.data(this.element,"controls"),t.splice(e.inArray(this,t),1),e.trigger(this,"destroyed"),this.element=null}}),f=e.Control.processors,t=function(t,n,r,i,o){return l(t,n,e.Control._shifter(o,i),r)};return o(["change","click","contextmenu","dblclick","keydown","keyup","keypress","mousedown","mousemove","mouseout","mouseover","mouseup","reset","resize","scroll","select","submit","focusin","focusout","mouseenter","mouseleave","touchstart","touchmove","touchcancel","touchend","touchleave"],function(e){f[e]=t}),d}),define("can/control/route",["can/control"],function(){}),define("can/observe",["can/util/library","can/construct"],function(e){var t=function(t){return t&&(e.isArray(t)||e.isPlainObject(t)||t instanceof e.Observe)},n=function(t,n){return e.each(t,function(e){e&&e.unbind&&e.unbind("change"+n)})},r=function(t,r,i,o,a){return o=o||p,a=a||p.List,t instanceof p?n([t],i._cid):t=e.isArray(t)?new a(t):new o(t),t.bind("change"+i._cid,function(){var n=e.makeArray(arguments),o=n.shift();n[0]=("*"===r?[i.indexOf(t),n[0]]:[r,n[0]]).join("."),o.triggeredNS=o.triggeredNS||{},o.triggeredNS[i._cid]||(o.triggeredNS[i._cid]=!0,e.trigger(i,o,n))}),t},i=function(n,r,i){return n.each(function(n,o){i[o]=t(n)&&e.isFunction(n[r])?n[r]():n}),i},o=function(t){return function(){return e[t].apply(this,arguments)}},a=o("addEvent"),s=o("removeEvent"),u=function(t,n){return n?[t]:e.isArray(t)?t:(""+t).split(".")},c=1,l=0,d=[],f=[],p=e.Observe=e.Construct({bind:a,unbind:s,id:"id",canMakeObserve:t,startBatch:function(e){l++,e&&f.push(e)},stopBatch:function(t,n){if(t?l=0:l--,0==l){var r=d.slice(0),i=f.slice(0);d=[],f=[],c++,n&&this.startBatch(),e.each(r,function(t){e.trigger.apply(e,t)}),e.each(i,function(e){e()})}},triggerBatch:function(t,n,r){if(!t._init){if(0==l)return e.trigger(t,n,r);n="string"==typeof n?{type:n}:n,n.batchNum=c,d.push([t,n,r])}},keys:function(e){var t=[];p.__reading&&p.__reading(e,"__keys");for(var n in e._data)t.push(n);return t}},{setup:function(t){this._data={},e.cid(this,".observe"),this._init=1,this.attr(t),this.bind("change"+this._cid,e.proxy(this._changes,this)),delete this._init},_changes:function(e,t,n,r,i){p.triggerBatch(this,{type:t,batchNum:e.batchNum},[r,i])},_triggerChange:function(t,n,r,i){p.triggerBatch(this,"change",e.makeArray(arguments))},attr:function(e,t){var n=typeof e;return"string"!==n&&"number"!==n?this._attrs(e,t):void 0===t?(p.__reading&&p.__reading(this,e),this._get(e)):(this._set(e,t),this)},each:function(){return p.__reading&&p.__reading(this,"__keys"),e.each.apply(void 0,[this.__get()].concat(e.makeArray(arguments)))},removeAttr:function(t){var n=this instanceof e.Observe.List,r=u(t),i=r.shift(),o=n?this[i]:this._data[i];return r.length?o.removeAttr(r):(n?this.splice(i,1):i in this._data&&(delete this._data[i],i in this.constructor.prototype||delete this[i],p.triggerBatch(this,"__keys"),this._triggerChange(i,"remove",void 0,o)),o)},_get:function(e){var t="string"==typeof e&&!!~e.indexOf(".")&&this.__get(e);if(t)return t;var n=u(e),r=this.__get(n.shift());return n.length?r?r._get(n):void 0:r},__get:function(e){return e?this._data[e]:this._data},_set:function(e,n,r){var i=u(e,r),o=i.shift(),a=this.__get(o);if(t(a)&&i.length)a._set(i,n);else{if(i.length)throw"can.Observe: Object does not exist";this.__convert&&(n=this.__convert(o,n)),this.__set(o,n,a)}},__set:function(e,i,o){if(i!==o){var a=this.__get().hasOwnProperty(e)?"set":"add";this.___set(e,t(i)?r(i,e,this):i),"add"==a&&p.triggerBatch(this,"__keys",void 0),this._triggerChange(e,a,i,o),o&&n([o],this._cid)}},___set:function(e,t){this._data[e]=t,e in this.constructor.prototype||(this[e]=t)},bind:a,unbind:s,serialize:function(){return i(this,"serialize",{})},_attrs:function(n,r){if(void 0===n)return i(this,"attr",{});n=e.extend({},n);var o,a,s=this;p.startBatch(),this.each(function(i,o){return a=n[o],void 0===a?void(r&&s.removeAttr(o)):(s.__convert&&(a=s.__convert(o,a)),a instanceof e.Observe?s.__set(o,a,i):t(i)&&t(a)&&i.attr?i.attr(a,r):i!=a&&s.__set(o,a,i),void delete n[o])});for(var o in n)a=n[o],this._set(o,a,!0);return p.stopBatch(),this},compute:function(t){var n=this,r=function(e){return n.attr(t,e)};return e.compute?e.compute(r):r}}),h=[].splice,g=p({setup:function(t,n){this.length=0,e.cid(this,".observe"),this._init=1,e.isDeferred(t)?this.replace(t):this.push.apply(this,e.makeArray(t||[])),this.bind("change"+this._cid,e.proxy(this._changes,this)),e.extend(this,n),delete this._init},_triggerChange:function(e,t,n,r){p.prototype._triggerChange.apply(this,arguments),~e.indexOf(".")||("add"===t?(p.triggerBatch(this,t,[n,+e]),p.triggerBatch(this,"length",[this.length])):"remove"===t?(p.triggerBatch(this,t,[r,+e]),p.triggerBatch(this,"length",[this.length])):p.triggerBatch(this,t,[n,+e]))},__get:function(e){return e?this[e]:this},___set:function(e,t){this[e]=t,+e>=this.length&&(this.length=+e+1)},serialize:function(){return i(this,"serialize",[])},splice:function(i,o){var a,s=e.makeArray(arguments);for(a=2;a<s.length;a++){var u=s[a];t(u)&&(s[a]=r(u,"*",this,this.constructor.Observe,this.constructor))}void 0===o&&(o=s[1]=this.length-i);var c=h.apply(this,s);return e.Observe.startBatch(),o>0&&(this._triggerChange(""+i,"remove",void 0,c),n(c,this._cid)),s.length>2&&this._triggerChange(""+i,"add",s.slice(2),c),e.Observe.stopBatch(),c},_attrs:function(t,n){return void 0===t?i(this,"attr",[]):(t=e.makeArray(t),p.startBatch(),this._updateAttrs(t,n),void p.stopBatch())},_updateAttrs:function(e,n){for(var r=Math.min(e.length,this.length),i=0;r>i;i++){var o=this[i],a=e[i];t(o)&&t(a)?o.attr(a,n):o!=a&&this._set(i,a)}e.length>this.length?this.push.apply(this,e.slice(this.length)):e.length<this.length&&n&&this.splice(e.length)}}),m=function(t){return t[0]&&e.isArray(t[0])?t[0]:e.makeArray(t)};return e.each({push:"length",unshift:0},function(e,n){var i=[][n];g.prototype[n]=function(){var n,o,a=[],s=e?this.length:0,u=arguments.length;for(this.constructor;u--;)o=arguments[u],a[u]=t(o)?r(o,"*",this,this.constructor.Observe,this.constructor):o;return n=i.apply(this,a),(!this.comparator||a.length)&&this._triggerChange(""+s,"add",a,void 0),n}}),e.each({pop:"length",shift:0},function(e,t){g.prototype[t]=function(){var n=m(arguments),r=e&&this.length?this.length-1:0,i=[][t].apply(this,n);return this._triggerChange(""+r,"remove",void 0,[i]),i&&i.unbind&&i.unbind("change"+this._cid),i}}),e.extend(g.prototype,{indexOf:function(t){return this.attr("length"),e.inArray(t,this)},join:[].join,reverse:[].reverse,slice:function(){var e=Array.prototype.slice.apply(this,arguments);return new this.constructor(e)},concat:function(){var t=[];return e.each(e.makeArray(arguments),function(n,r){t[r]=n instanceof e.Observe.List?n.serialize():n}),new this.constructor(Array.prototype.concat.apply(this.serialize(),t))},forEach:function(t,n){e.each(this,t,n||this)},replace:function(t){return e.isDeferred(t)?t.then(e.proxy(this.replace,this)):this.splice.apply(this,[0,this.length].concat(e.makeArray(t||[]))),this}}),p.List=g,p.setup=function(){e.Construct.setup.apply(this,arguments),this.List=p.List({Observe:this},{})},p}),define("can/model",["can/util/library","can/observe"],function(e){var t=function(t,n,r){var i=new e.Deferred;return t.then(function(){var t=e.makeArray(arguments);t[0]=n[r](t[0]),i.resolveWith(i,t)},function(){i.rejectWith(this,arguments)}),"function"==typeof t.abort&&(i.abort=function(){return t.abort()}),i},n=0,r=/change.observe\d+/,i=function(t){return e.Observe.__reading&&e.Observe.__reading(t,t.constructor.id),t.__get(t.constructor.id)},o=function(t,n,r,i,o,a){var s={};if("string"==typeof t){var u=t.split(/\s+/);s.url=u.pop(),u.length&&(s.type=u.pop())}else e.extend(s,t);return s.data="object"!=typeof n||e.isArray(n)?n:e.extend(s.data||{},n),s.url=e.sub(s.url,s.data,!0),e.ajax(e.extend({type:r||"post",dataType:i||"json",success:o,error:a},s))},a=function(t,n,r,o,a){var s;e.isArray(t)?(s=t[1],t=t[0]):s=t.serialize(),s=[s];var u,c,l=t.constructor;return"destroy"==n&&s.shift(),"create"!==n&&s.unshift(i(t)),c=l[n].apply(l,s),u=c.pipe(function(e){return t[a||n+"d"](e,c),t}),c.abort&&(u.abort=function(){c.abort()}),u.then(r,o),u},s={create:{url:"_shortName",type:"post"},update:{data:function(t,n){n=n||{};var r=this.id;return n[r]&&n[r]!==t&&(n["new"+e.capitalize(t)]=n[r],delete n[r]),n[r]=t,n},type:"put"},destroy:{type:"delete",data:function(e){var t={};return t.id=t[this.id]=e,t}},findAll:{url:"_shortName"},findOne:{}},u=function(e,t){return function(n){return n=e.data?e.data.apply(this,arguments):n,o(t||this[e.url||"_url"],n,e.type||"get")}};e.Model=e.Observe({fullName:"can.Model",setup:function(t){if(this.store={},e.Observe.setup.apply(this,arguments),e.Model){this.List=c({Observe:this},{});var r=this,i=e.proxy(this._clean,r);e.each(s,function(n,o){if(e.isFunction(r[o])||(r[o]=u(n,r[o])),r["make"+e.capitalize(o)]){var a=r["make"+e.capitalize(o)](r[o]);e.Construct._overwrite(r,t,o,function(){this._reqs++;var e=a.apply(this,arguments),t=e.then(i,i);return t.abort=e.abort,t})}}),"can.Model"!=r.fullName&&r.fullName||(r.fullName="Model"+ ++n),this._reqs=0,this._url=this._shortName+"/{"+this.id+"}"}},_ajax:u,_makeRequest:a,_clean:function(){if(this._reqs--,!this._reqs)for(var e in this.store)this.store[e]._bindings||delete this.store[e];return arguments[0]},models:function(t,n){if(t){if(t instanceof this.List)return t;var r=this,i=[],o=n instanceof e.Observe.List?n:new(r.List||c),a=e.isArray(t),s=t instanceof c,u=a?t:s?t.serialize():t.data;return o.length&&o.splice(0),e.each(u,function(e){i.push(r.model(e))}),o.push.apply(o,i),a||e.each(t,function(e,t){"data"!==t&&o.attr(t,e)}),o}},model:function(e){if(e){e instanceof this&&(e=e.serialize());var t=e[this.id],n=(t||0===t)&&this.store[t]?this.store[t].attr(e,this.removeAttr||!1):new this(e);return this._reqs&&(this.store[e[this.id]]=n),n}}},{isNew:function(){var e=i(this);return!(e||0===e)},save:function(e,t){return a(this,this.isNew()?"create":"update",e,t)},destroy:function(t,n){if(this.isNew()){var r=this;return e.Deferred().done(function(e){r.destroyed(e)}).resolve(r)}return a(this,"destroy",t,n,"destroyed")},bind:function(t){return r.test(t)||(this._bindings||(this.constructor.store[this.__get(this.constructor.id)]=this,this._bindings=0),this._bindings++),e.Observe.prototype.bind.apply(this,arguments)},unbind:function(t){return r.test(t)||(this._bindings--,this._bindings||delete this.constructor.store[i(this)]),e.Observe.prototype.unbind.apply(this,arguments)},___set:function(t,n){e.Observe.prototype.___set.call(this,t,n),t===this.constructor.id&&this._bindings&&(this.constructor.store[i(this)]=this)}}),e.each({makeFindAll:"models",makeFindOne:"model"},function(n,r){e.Model[r]=function(e){return function(r,i,o){var a=t(e.call(this,r),this,n);return a.then(i,o),a}}}),e.each(["created","updated","destroyed"],function(t){e.Model.prototype[t]=function(n){var r,i=this.constructor;r=n&&"object"==typeof n&&this.attr(n.attr?n.attr():n),e.trigger(this,t),e.trigger(this,"change",t),e.trigger(i,t,this)}});var c=e.Model.List=e.Observe.List({setup:function(){e.Observe.List.prototype.setup.apply(this,arguments);var t=this;this.bind("change",function(e,n){if(/\w+\.destroyed/.test(n)){var r=t.indexOf(e.target);-1!=r&&t.splice(r,1)}})}});return e.Model}),define("can/view",["can/util/library"],function(e){var t=e.isFunction,n=e.makeArray,r=1,i=e.view=function(n,r,o,a){t(o)&&(a=o,o=void 0);var s=function(e){return i.frag(e)},u=t(a)?function(e){a(s(e))}:null,c=i.render(n,r,o,u),l=e.Deferred();return t(c)?c:e.isDeferred(c)?(c.then(function(e,t){l.resolve.call(l,s(e),t)},function(){l.fail.apply(l,arguments)}),l):s(c)};e.extend(i,{frag:function(e,t){return i.hookup(i.fragment(e),t)},fragment:function(t){var n=e.buildFragment(t,document.body);return n.childNodes.length||n.appendChild(document.createTextNode("")),n},toId:function(t){return e.map(t.toString().split(/\/|\./g),function(e){return e?e:void 0}).join("_")},hookup:function(t,n){var r,o,a=[];return e.each(t.childNodes?e.makeArray(t.childNodes):t,function(t){1===t.nodeType&&(a.push(t),a.push.apply(a,e.makeArray(t.getElementsByTagName("*"))))}),e.each(a,function(e){e.getAttribute&&(r=e.getAttribute("data-view-id"))&&(o=i.hookups[r])&&(o(e,n,r),delete i.hookups[r],e.removeAttribute("data-view-id"))}),t},hookups:{},hook:function(e){return i.hookups[++r]=e," data-view-id='"+r+"'"},cached:{},cachedRenderers:{},cache:!0,register:function(e){this.types["."+e.suffix]=e},types:{},ext:".ejs",registerScript:function(){},preload:function(){},render:function(r,o,c,l){t(c)&&(l=c,c=void 0);var d=s(o);if(d.length){var f=new e.Deferred,p=e.extend({},o);return d.push(a(r,!0)),e.when.apply(e,d).then(function(t){var r,i=n(arguments),a=i.pop();if(e.isDeferred(o))p=u(t);else for(var s in o)e.isDeferred(o[s])&&(p[s]=u(i.shift()));r=a(p,c),f.resolve(r,p),l&&l(r,p)},function(){f.reject.apply(f,arguments)}),f}var h,g=t(l),f=a(r,g);if(g)h=f,f.then(function(e){l(o?e(o,c):e)});else{if("resolved"===f.state()&&f.__view_id){var m=i.cachedRenderers[f.__view_id];return o?m(o,c):m}f.then(function(e){h=o?e(o,c):e})}return h},registerView:function(t,n,r,o){var a=(r||i.types[i.ext]).renderer(t,n);return o=o||new e.Deferred,i.cache&&(i.cached[t]=o,o.__view_id=t,i.cachedRenderers[t]=a),o.resolve(a)}});var o=function(e,t){if(!e.length)throw"can.view: No template or empty template:"+t},a=function(t,n){var r,a,s,u=t.match(/\.[\w\d]+$/);if(t.match(/^#/)&&(t=t.substr(1)),(a=document.getElementById(t))&&(u="."+a.type.match(/\/(x\-)?(.+)/)[2]),u||i.cached[t]||(t+=u=i.ext),e.isArray(u)&&(u=u[0]),s=i.toId(t),t.match(/^\/\//)){var c=t.substr(2);t=window.steal?steal.config().root.mapJoin(c):c}if(r=i.types[u],i.cached[s])return i.cached[s];if(a)return i.registerView(s,a.innerHTML,r);var l=new e.Deferred;return e.ajax({async:n,url:t,dataType:"text",error:function(e){o("",t),l.reject(e)},success:function(e){o(e,t),i.registerView(s,e,r,l)}}),l},s=function(t){var n=[];if(e.isDeferred(t))return[t];for(var r in t)e.isDeferred(t[r])&&n.push(t[r]);return n},u=function(t){return e.isArray(t)&&"success"===t[1]?t[0]:t};return e.extend(i,{register:function(t){this.types["."+t.suffix]=t,i[t.suffix]=function(n,r){if(!r){var o=function(){return i.frag(o.render.apply(this,arguments))};return o.render=function(){var e=t.renderer(null,n);return e.apply(e,arguments)},o}return i.preload(n,t.renderer(n,r)),e.view(n)}},registerScript:function(e,t,n){return"can.view.preload('"+t+"',"+i.types["."+e].script(t,n)+");"},preload:function(t,n){function r(){return i.frag(n.apply(this,arguments))}return i.cached[t]=(new e.Deferred).resolve(function(e,t){return n.call(e,e,t)}),r.render=n,r}}),e}),define("can/observe/compute",["can/util/library"],function(e){var t=function(t,n){var r;e.Observe&&(r=e.Observe.__reading,e.Observe.__reading=function(e,t){i.push({obj:e,attr:t})});var i=[],o=t.call(n);return e.Observe&&(e.Observe.__reading=r),{value:o,observed:i}},n=function(n,r,i,o){var a,s={},u=!0,c={value:void 0,teardown:function(){for(var e in s){var t=s[e];t.observe.obj.unbind(t.observe.attr,l),delete s[e]}}},l=function(e){if(!(o&&!o.bound||void 0!==e.batchNum&&e.batchNum===a)){var t=c.value,n=d();c.value=n,n!==t&&i(n,t),a=a=e.batchNum}},d=function(){var i=t(n,r),o=i.observed,a=i.value;u=!u,e.each(o,function(e){s[e.obj._cid+"|"+e.attr]?s[e.obj._cid+"|"+e.attr].matched=u:(s[e.obj._cid+"|"+e.attr]={matched:u,observe:e},e.obj.bind(e.attr,l))});for(var c in s){var d=s[c];d.matched!==u&&(d.observe.obj.unbind(d.observe.attr,l),delete s[c])}return a};return c.value=d(),c.isListening=!e.isEmptyObject(s),c};return e.compute=function(t,r){if(t&&t.isComputed)return t;var i,o,a=0,s=!0;"function"==typeof t?o=function(n){return void 0===n?i?(a&&e.Observe.__reading&&e.Observe.__reading(o,"change"),i.value):t.call(r||this):t.apply(r||this,arguments)}:(o=function(n){if(void 0===n)return e.Observe.__reading&&e.Observe.__reading(o,"change"),t;var r=t;return t=n,r!==n&&e.Observe.triggerBatch(o,"change",[n,r]),n},s=!1),o.isComputed=!0,e.cid(o,"compute");var u={bound:!1};return o.bind=function(c,l){e.addEvent.apply(o,arguments),0===a&&s&&(u.bound=!0,i=n(t,r||this,function(t,n){e.Observe.triggerBatch(o,"change",[t,n])},u)),a++},o.unbind=function(t,n){e.removeEvent.apply(o,arguments),a--,0===a&&s&&(i.teardown(),u.bound=!1)},o},e.compute.binder=n,e.compute}),define("can/view/scanner",["can/view"],function(can){var newLine=/(\r|\n)+/g,tagToContentPropMap={option:"textContent",textarea:"value"},clean=function(e){return e.split("\\").join("\\\\").split("\n").join("\\n").split('"').join('\\"').split(" ").join("\\t")},reverseTagMap={tr:"tbody",option:"select",td:"tr",th:"tr",li:"ul"},getTag=function(e,t,n){if(e)return e;for(;n<t.length;){if("<"==t[n]&&reverseTagMap[t[n+1]])return reverseTagMap[t[n+1]];n++}return""},bracketNum=function(e){return--e.split("{").length- --e.split("}").length},myEval=function(script){eval(script)},attrReg=/([^\s]+)[\s]*=[\s]*$/,startTxt="var ___v1ew = [];",finishTxt="return ___v1ew.join('')",put_cmd="___v1ew.push(",insert_cmd=put_cmd,htmlTag=null,quote=null,beforeQuote=null,rescan=null,status=function(){return quote?"'"+beforeQuote.match(attrReg)[1]+"'":htmlTag?1:0};return can.view.Scanner=Scanner=function(e){can.extend(this,{text:{},tokens:[]},e),this.tokenReg=[],this.tokenSimple={"<":"<",">":">",'"':'"',"'":"'"},this.tokenComplex=[],this.tokenMap={};for(var t,n=0;t=this.tokens[n];n++)t[2]?(this.tokenReg.push(t[2]),this.tokenComplex.push({abbr:t[1],re:new RegExp(t[2]),rescan:t[3]})):(this.tokenReg.push(t[1]),this.tokenSimple[t[1]]=t[0]),this.tokenMap[t[0]]=t[1];this.tokenReg=new RegExp("("+this.tokenReg.slice(0).concat(["<",">",'"',"'"]).join("|")+")","g")},Scanner.prototype={helpers:[{name:/\s*\(([\$\w]+)\)\s*->([^\n]*)/,fn:function(e){var t=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,n=e.match(t);return"function(__){var "+n[1]+"=can.$(__);"+n[2]+"}"}}],scan:function(e,t){var n=[],r=0,i=this.tokenSimple,o=this.tokenComplex;e=e.replace(newLine,"\n"),e.replace(this.tokenReg,function(t,a){var s=arguments[arguments.length-2];if(s>r&&n.push(e.substring(r,s)),i[t])n.push(t);else for(var u,c=0;u=o[c];c++)if(u.re.test(t)){n.push(u.abbr),u.rescan&&n.push(u.rescan(a));break}r=s+a.length}),r<e.length&&n.push(e.substr(r));var a,s,u,c="",l=[startTxt+(this.text.start||"")],d=function(e,t){l.push(put_cmd,'"',clean(e),'"'+(t||"")+");")},f=[],p=null,h=!1,g="",m=[],b=!1,v=0,y=this.tokenMap;for(htmlTag=quote=beforeQuote=null;void 0!==(u=n[v++]);){if(null===p)switch(u){case y.left:case y.escapeLeft:case y.returnLeft:h=htmlTag&&1;case y.commentLeft:p=u,c.length&&d(c),c="";break;case y.escapeFull:h=htmlTag&&1,rescan=1,p=y.escapeLeft,c.length&&d(c),rescan=n[v++],c=rescan.content||rescan,rescan.before&&d(rescan.before),n.splice(v,0,y.right);break;case y.commentFull:break;case y.templateLeft:c+=y.left;break;case"<":0!==n[v].indexOf("!--")&&(htmlTag=1,h=0),c+=u;break;case">":htmlTag=0;var _="/"==c.substr(c.length-1)||"--"==c.substr(c.length-2);h||!b&&tagToContentPropMap[m[m.length-1]]?(_?d(c.substr(0,c.length-1),',can.view.pending(),"/>"'):d(c,',can.view.pending(),">"'),c="",h=0):c+=u,(_||b)&&(m.pop(),g=m[m.length-1],b=!1);break;case"'":case'"':htmlTag&&(quote&&quote===u?quote=null:null===quote&&(quote=u,beforeQuote=a));default:"<"===a&&(g=u.split(/\s/)[0],0===g.indexOf("/")&&m[m.length-1]===g.substr(1)?(g=m[m.length-1],b=!0):m.push(g)),c+=u}else switch(u){case y.right:case y.returnRight:switch(p){case y.left:s=bracketNum(c),1==s?(l.push(insert_cmd,"can.view.txt(0,'"+getTag(g,n,v)+"',"+status()+",this,function(){",startTxt,c),f.push({before:"",after:finishTxt+"}));\n"})):(r=f.length&&-1==s?f.pop():{after:";"},r.before&&l.push(r.before),l.push(c,";",r.after));break;case y.escapeLeft:case y.returnLeft:s=bracketNum(c),s&&f.push({before:finishTxt,after:"}));"});for(var x=p===y.escapeLeft?1:0,w={insert:insert_cmd,tagName:getTag(g,n,v),status:status()},C=0;C<this.helpers.length;C++){var A=this.helpers[C];if(A.name.test(c)){c=A.fn(c,w),A.name.source==/^>[\s]*\w*/.source&&(x=0);break}}"object"==typeof c?c.raw&&l.push(c.raw):l.push(insert_cmd,"can.view.txt("+x+",'"+g+"',"+status()+",this,function(){ "+(this.text.escape||"")+"return ",c,s?startTxt:"}));"),rescan&&rescan.after&&rescan.after.length&&(d(rescan.after.length),rescan=null)}p=null,c="";break;case y.templateLeft:c+=y.left;break;default:c+=u}a=u}c.length&&d(c),l.push(";");var O=l.join(""),E={out:"with(_VIEW) { with (_CONTEXT) {"+O+" "+finishTxt+"}}"};return myEval.call(E,"this.fn = (function(_CONTEXT,_VIEW){"+E.out+"});\r\n//@ sourceURL="+t+".js"),E}},Scanner}),define("can/view/render",["can/view","can/util/string"],function(e){var t=!0;try{document.createTextNode("")._=0}catch(n){t=!1}var r={"class":"className",value:"value",innerText:"innerText",textContent:"textContent"},i={"":"span",table:"tbody",tr:"td",ol:"li",ul:"li",tbody:"tr",thead:"tr",tfoot:"tr",select:"option",optgroup:"option"},o="__!!__",a=/__!!__/g,s={option:"textContent"in document.createElement("option")?"textContent":"innerText",textarea:"value"},u=e.each(["checked","disabled","readonly","required"],function(e){r[e]=e}),c=function(e,t){return t&&11===e.parentNode.nodeType?t:e.parentNode},l=function(t,n,i){var o=t.nodeName.toString().toLowerCase(),a=r[n];a?(t[a]=e.inArray(n,u)>-1?!0:i,"value"!==a||"input"!==o&&"textarea"!==o||(t.defaultValue=i)):t.setAttribute(n,i)},d=function(e,t){return(r[t]&&e[r[t]]?e[r[t]]:e.getAttribute(t))||""},f=function(t,n){e.inArray(n,u)>-1?t[n]=!1:t.removeAttribute(n)},p=[],h=function(e){if("string"==typeof e)return e;if(!e&&0!==e)return"";var t=e.hookup&&function(t,n){e.hookup.call(e,t,n)}||"function"==typeof e&&e;return t?(p.push(t),""):""+e},g=function(t){return"string"==typeof t||"number"==typeof t?e.esc(t):h(t)},m={},b={},v={},y="ejs_"+Math.random(),_=0,x=function(e){if(t||3!==e.nodeType)return e[y]?e[y]:e[y]=(e.nodeName?"element_":"obj_")+ ++_;for(var n in b)if(b[n]===e)return n;return b["text_"+ ++_]=e,"text_"+_},w=function(t,n){var r=m[x(t)];if(r){var i=e.inArray(n,r);i>=0&&r.splice(i,1),r.length||delete m[x(t)]}},C=function(e,t){var n=m[x(e)];n||(n=m[x(e)]=[]),n.push(t)},A=function(e){var t=i[e]||"span";return"span"===t?"@@!!@@":"<"+t+">"+A(t)+"</"+t+">"};return e.extend(e.view,{pending:function(){var t=p.slice(0);return lastHookups=t,p=[],e.view.hook(function(n){e.each(t,function(e){e(n)})})},registerNode:function(t){var n=x(t);v[n]=t,e.each(t,function(e){C(e,n)})},unregisterNode:function(t){var n=x(t);e.each(t,function(e){w(e,n)}),delete v[n]},txt:function(t,n,r,u,m){var b=e.compute.binder(m,u,function(e,t){_(e,t)});if(!b.isListening)return(t||0!==r?g:h)(b.value);var v,y,_,x=function(){b.teardown(),y&&e.view.unregisterNode(y)},w=function(t){e.bind.call(t,"destroyed",x),v=t},C=function(t){t||(x(),e.unbind.call(v,"destroyed",x))},O=i[n]||"span",E=s[n];if(0!==r||E){if(1===r){
var j=b.value.replace(/['"]/g,"").split("=")[0];return p.push(function(e){_=function(t){var n=(t||"").replace(/['"]/g,"").split("="),r=n[0];r!=j&&j&&f(e,j),r&&(l(e,r,n[1]),j=r)},w(e)}),b.value}var N=0===r?E:r;return(0===r?lastHookups:p).push(function(t){_=function(){l(t,N,i.render(),E)};var n,r=e.$(t);n=e.data(r,"hooks"),n||e.data(r,"hooks",n={});var i,s=d(t,N,E),u=s.split(o),c=[];c.push(u.shift(),u.join(o)),n[N]?n[N].bindings.push(b):n[N]={render:function(){var e=0,t=s.replace(a,function(){return h(i.bindings[e++].value)});return t},bindings:[b],batchNum:void 0},i=n[N],c.splice(1,0,b.value),l(t,N,c.join(""),E),w(t)}),o}return"<"+O+e.view.hook(t?function(e,t){_=function(e){r.nodeValue=""+e,C(r.parentNode)};var n=c(e,t),r=document.createTextNode(b.value);e.parentNode!==n?(n=e.parentNode,n.insertBefore(r,e),n.removeChild(e)):(n.insertBefore(r,e),n.removeChild(e)),w(n)}:function(t,n){_=function(e){var t=r[0].parentNode;t&&i(e),C(r[0].parentNode)},n=c(t,n);var r,i=function(i){var o=e.view.frag(i,n),a=e.makeArray(o.childNodes),s=r?r[r.length-1]:t;if(s.nextSibling?s.parentNode.insertBefore(o,s.nextSibling):s.parentNode.appendChild(o),r){var u=e.makeArray(r);e.view.replace(r,a),e.remove(e.$(u))}else e.remove(e.$(t)),r=a,y=r,e.view.registerNode(r)};i(b.value,[t]),w(n)})+">"+A(O)+"</"+O+">"},replace:function(t,n){t=e.makeArray(t),e.each(t,function(r){e.each(e.makeArray(m[x(r)]),function(i){var o=v[i],a=e.inArray(r,o),s=e.inArray(t[t.length-1],o);if(a>=0&&s>=0){for(var u=a;s>=u;u++){var c=o[u];w(c,i)}o.splice.apply(o,[a,s-a+1].concat(n)),e.each(n,function(e){C(e,i)})}else e.view.unregisterNode(o)})})},canExpando:t,textNodeMap:b,nodeMap:m,nodeListMap:v}),e}),define("can/view/ejs",["can/util/library","can/view","can/util/string","can/observe/compute","can/view/scanner","can/view/render"],function(e){var t=e.extend,n=function(e){if(this.constructor!=n){var r=new n(e);return function(e,t){return r.render(e,t)}}return"function"==typeof e?void(this.template={fn:e}):(t(this,e),void(this.template=this.scanner.scan(this.text,this.name)))};return e.EJS=n,n.prototype.render=function(e,t){return e=e||{},this.template.fn.call(e,e,new n.Helpers(e,t||{}))},t(n.prototype,{scanner:new e.view.Scanner({tokens:[["templateLeft","<%%"],["templateRight","%>"],["returnLeft","<%=="],["escapeLeft","<%="],["commentLeft","<%#"],["left","<%"],["right","%>"],["returnRight","%>"]]})}),n.Helpers=function(e,n){this._data=e,this._extras=n,t(this,n)},n.Helpers.prototype={list:function(t,n){e.each(t,function(e,r){n(e,r,t)})}},e.view.register({suffix:"ejs",script:function(e,t){return"can.EJS(function(_CONTEXT,_VIEW) { "+new n({text:t,name:e}).template.out+" })"},renderer:function(e,t){return n({text:t,name:e})}}),e}),define("can/route",[],function(){}),define("can",["can/util/library","can/control/route","can/model","can/view/ejs","can/route"],function(e){return e}),function(e){function t(){}function n(e){a=[e]}function r(e,t,n){return e&&e.apply(t.context||t,n)}function i(e){return/\?/.test(e)?"&":"?"}function o(o){function p(e){Y++||($(),z&&(E[W]={s:[e]}),V&&(e=V.apply(o,[e])),r(U,o,[e,x,o]),r(F,o,[o,x]))}function I(e){Y++||($(),z&&e!=w&&(E[W]=e),r(D,o,[o,e]),r(F,o,[o,e]))}o=e.extend({},N,o);var T,k,P,L,M,U=o.success,D=o.error,F=o.complete,V=o.dataFilter,q=o.callbackParameter,H=o.callback,B=o.cache,z=o.pageCache,G=o.charset,W=o.url,Q=o.data,K=o.timeout,Y=0,$=t;return A&&A(function(e){e.done(U).fail(D),U=e.resolve,D=e.reject}).promise(o),o.abort=function(){!Y++&&$()},r(o.beforeSend,o,[o])===!1||Y?o:(W=W||c,Q=Q?"string"==typeof Q?Q:e.param(Q,o.traditional):c,W+=Q?i(W)+Q:c,q&&(W+=i(W)+encodeURIComponent(q)+"=?"),!B&&!z&&(W+=i(W)+"_"+(new Date).getTime()+"="),W=W.replace(/=\?(&|$)/,"="+H+"$1"),z&&(T=E[W])?T.s?p(T.s[0]):I(T):(C[H]=n,P=e(_)[0],P.id=f+j++,G&&(P[u]=G),R&&R.version()<11.6?(L=e(_)[0]).text="document.getElementById('"+P.id+"')."+g+"()":P[s]=s,S&&(P.htmlFor=P.id,P.event=h),P[m]=P[g]=P[b]=function(e){if(!P[v]||!/i/.test(P[v])){try{P[h]&&P[h]()}catch(t){}e=a,a=0,e?p(e[0]):I(l)}},P.src=W,$=function(e){M&&clearTimeout(M),P[b]=P[m]=P[g]=null,O[y](P),L&&O[y](L)},O[d](P,k=O.firstChild),L&&O[d](L,k),M=K>0&&setTimeout(function(){I(w)},K)),o)}var a,s="async",u="charset",c="",l="error",d="insertBefore",f="_jqjsp",p="on",h=p+"click",g=p+l,m=p+"load",b=p+"readystatechange",v="readyState",y="removeChild",_="<script>",x="success",w="timeout",C=window,A=e.Deferred,O=e("head")[0]||document.documentElement,E={},j=0,N={callback:f,url:location.href},R=C.opera,S=!!e("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;o.setup=function(t){e.extend(N,t)},e.jsonp=o}(jQuery),define("lib/jquery-jsonp/src/jquery.jsonp",function(){}),define("scripts/components/price-generator/models/product-offers-model",["jquery","can","lib/jquery-jsonp/src/jquery.jsonp"],function(e,t){var n=t.Model({marketSegment:"COM",countryCode:"US",landscape:"prod",timeout:2e4,rootNode:"productOffering",requestCount:0,findAll:function(t){var n,r=t.countryCode||this.countryCode,i=t.landscape||this.landsscape;if(!t)throw new Error("Params not defined");if(!t.productKeys)throw new Error("ProductKeys not defined in params!");if(!e.isArray(t.productKeys))throw new Error("ProductKeys not an Array!");return n=this.getCountryQueryString(this.getUpperCaseValue(r)),n+="&"+this.getMarketSegmentQueryString(t.marketSegment),n+="&"+this.getProductKeyQueryString(t.productKeys),t.promoCodes&&e.isArray(t.promoCodes)&&t.promoCodes.length&&(n+="&"+this.getPromoCodesQueryString(t.promoCodes)),t.languageCode&&(n+="&language="+t.languageCode),e.jsonp({type:"GET",url:this.getUrl(r,i)+"?callback=?",callback:this.getCallbackName(),data:n,dataType:"jsonp",timeout:this.timeout})},getUpperCaseValue:function(t){return e.isValue(t)?t.toUpperCase():void 0},getUrl:function(e,t){var n="/svcs/offers/products.json",r=this.isNorthAmerica(e)?"//store1.":"//store2.";switch(t){case"stage":r+="stage.";break;case"pre-stage":r+="qa04.";break;case"dev":r+="dev04."}return r+="adobe.com"+n},getCallbackName:function(){return"productOffers"+this.requestCount++},isNorthAmerica:function(e){return"US"===e||"CA"===e||"MX"===e},getProductKeyQueryString:function(e){return"product_key="+e.join("&product_key=")},getCountryQueryString:function(e){return"countryCode="+(e?e:this.countryCode)},getMarketSegmentQueryString:function(e){return"marketSegment="+(e?e:this.marketSegment)},getPromoCodesQueryString:function(e){return"promotion_code="+e.join(",")},models:function(e){return this.model(e[this.rootNode])}},{});return n}),define("scripts/components/common/util/number-util",[],function(){return{formatByMask:function(e,t){if(!e||isNaN(+t))return t;t="-"===e.charAt(0)?-t:+t;var n=0>t?t=-t:0,r=e.match(/[^\d\-\+#]/g),i=r&&r[r.length-1]||".",o=r&&r[1]&&r[0]||",";e=e.split(i),t=t.toFixed(e[1]&&e[1].length),t=+t+"";var a=e[1]&&e[1].lastIndexOf("0"),s=t.split(".");(!s[1]||s[1]&&s[1].length<=a)&&(t=(+t).toFixed(a+1));var u=e[0].split(o);e[0]=u.join("");var c=e[0]&&e[0].indexOf("0");if(c>-1)for(;s[0].length<e[0].length-c;)s[0]="0"+s[0];else 0===+s[0]&&(s[0]="");t=t.split("."),t[0]=s[0];var l=u[1]&&u[u.length-1].length;if(l){for(var d=t[0],f="",p=d.length%l,h=0,g=d.length;g>h;h++)f+=d.charAt(h),(h-p+1)%l===0&&g-l>h&&(f+=o);t[0]=f}return t[1]=e[1]&&t[1]?i+t[1]:"",(n?"-":"")+t[0]+t[1]}}}),define("can-proxy",["can/util/library","can/construct"],function(e,t){var n=(e.isFunction,e.isArray),r=e.makeArray,i=function(e){var t,i=r(arguments);return e=i.shift(),n(e)||(e=[e]),t=this,function(){for(var o,a,s=i.concat(r(arguments)),u=e.length,c=0;u>c;c++)a=e[c],a&&(o="string"==typeof a,s=(o?t[a]:a).apply(t,s||[]),u-1>c&&(s=!n(s)||s._use_call?[s]:s));return s}};e.Construct.proxy=e.Construct.prototype.proxy=i;for(var o=[e.Observe,e.Control,e.Model],a=0;a<o.length;a++)o[a]&&(o[a].proxy=i);return e}),define("price-generator",["jquery","can","scripts/components/price-generator/models/product-offers-model","scripts/components/common/util/number-util","can-proxy"],function(e,t,n,r){var i=t.Construct({defaults:{landscape:"prod",countryCode:"US",marketSegment:"COM",promoCodes:[]}},{init:function(t){this.options=e.extend({},this.constructor.defaults,t)},getPrices:function(t){var r=e.extend({},this.options,t),i=new e.Deferred;return n.findAll(r).done(this.proxy("productPriceSuccess",i)).fail(this.proxy("productPriceFailed",i)),i.promise()},productPriceSuccess:function(t,n){var r=this.getPriceObjects(n);e.isEmptyObject(r)?t.reject({errorType:"NO_PRICE_DATA_FOUND"}):t.resolve(r)},productPriceFailed:function(e,t){e.reject({errorType:"INVALID_PRICE_REQUEST"})},getPriceObjects:function(t){var n=t.attr("currency"),r=t.attr("productOffers"),i={},o=this;try{e.each(r,function(e,t){i[t.attr("productKey")]=o.getProductPrices(n,t)})}catch(a){}return i},getProductPrices:function(t,n){var r=this,i={};return e.each(n.attr("priceMap"),function(e,n){i[n.attr("priceTypeKey")]=r.getPriceParts(t,n.attr("price"))}),i},getPriceParts:function(e,t){var n=t.display_price,r=t.priceWithoutTax,i=t.priceWithTax,o=this.getOriginalPrice(t),a=e.formatString,s={price:n,priceWithoutTax:r,priceWithTax:i,formattedPrice:this.getFormattedPrice(e,n),formattedPriceWithoutTax:this.getFormattedPrice(e,r),formattedPriceWithTax:this.getFormattedPrice(e,i),symbol:this.getCurrencySymbol(e),decimalDelim:this.getDecimalDelim(e),thousandDelim:a.match(/#.(?=#)/)[0].replace(/#/,""),includesTax:t.attr("includes_tax")};return o&&(s.originalPrice=o,s.formattedOriginalPrice=this.getFormattedPrice(e,o),s.originalPriceWithTax=t.orginalPriceWithTax,s.formattedOriginalPriceWithTax=this.getFormattedPrice(e,t.orginalPriceWithTax),s.originalPriceWithoutTax=t.orginalPriceWithoutTax,s.formattedOriginalPriceWithoutTax=this.getFormattedPrice(e,t.orginalPriceWithoutTax)),s},getOriginalPrice:function(e){return e.includes_tax?e.orginalPriceWithTax:e.orginalPriceWithoutTax},getFormattedPrice:function(e,t){var n=this.getCurrencySymbol(e),i=e.formatString,o=this.getNumberMask(e),a=r.formatByMask(o,t);return i.replace(/'.*'/,"SYMBOL").replace(/#.*0/,a).replace(/SYMBOL/,n)},getCurrencySymbol:function(e){var t=e.formatString;return t.match(/'(.*?)'/)[1]},getNumberMask:function(t){var n=t.formatString,r=e.trim(n.replace(/'.*'/,"")),i=t.usePrecision;return i?r:r+"."},getDecimalDelim:function(e){var t=e.formatString,n=t.match(/0.(?=0)/);return n?n[0].replace(/0/,""):""}});return i}),define("scripts/components/common/util/lang",["jquery"],function(e){return e.extend({type:function(e){var t={undefined:"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"};return t[typeof e]||t[Object.prototype.toString.call(e)]||(e?"object":"null")},isBoolean:function(e){return"boolean"==typeof e},isNull:function(e){return null===e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isString:function(e){return"string"==typeof e},isUndefined:function(e){return"undefined"==typeof e},isValue:function(e){var t=this.type(e);switch(t){case"number":return isFinite(e);case"null":case"undefined":return!1;default:return!!t}},isDate:function(e){return"date"===this.type(e)},timeStampToDate:function(e){var t,n,r=new RegExp("^([\\d]{4})-([\\d]{2})-([\\d]{2})T([\\d]{2}):([\\d]{2}):([\\d]{2}\\.?[\\d]{0,3})([\\+\\-])([\\d]{2}):([\\d]{2})$"),i=r.exec(e);return null!=i?(t=60*parseInt(i[8],10)+parseInt(i[9],10),"-"===i[7]&&(t=-t),n=new Date(Date.UTC(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10),parseInt(i[6],10))-60*t*1e3)):null},ISO8601DateString:function(e){function t(e){return 10>e?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z"},isPrimitive:function(e){var t=this.type(e);switch(t){case"undefined":case"number":case"boolean":case"string":return!0;default:return!1}},hasKey:function(e,t){return t in e},some:Array.prototype.some?function(e,t,n){return Array.prototype.some.call(e,t,n)}:function(e,t,n){var r,i=e.length;for(r=0;i>r;r+=1)if(t.call(n,e[r],r,e))return!0;return!1},hash:function(e,t){var n,r={},i=e.length,o=t&&t.length;for(n=0;i>n;n+=1)r[e[n]]=o&&o>n?t[n]:!0;return r},createNs:function(t){var n,r;return r=t.split("."),n=window[r[0]]=window[r[0]]||{},e.each(r.slice(1),function(e,t){n=n[t]=n[t]||{}}),n},rgb2hex:function(e){function t(e){return isNaN(e)?"00":n[(e-e%16)/16]+n[e%16]}var n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],r=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return"#"+t(r[1])+t(r[2])+t(r[3])},localToGlobal:function(e,t,n){var r={},i=e.offset();return r.x=Math.floor(t+i.left),r.y=Math.floor(n+i.top),r},globalToLocal:function(e,t,n){var r={},i=e.offset();return r.x=Math.floor(t-i.left),r.y=Math.floor(n-i.top),r}}),jQuery}),define("scripts/components/common/util/locale-map-util",["jquery","can","scripts/components/common/util/lang"],function(e,t){var n=t.Construct({LOCALE_MAP:{AT:["de_at"],AU:["en_au"],BE:["en_be","fr_be","nl_be"],BG:["en_xeu"],BR:["pt_br"],CA:["en_us","fr_ca"],CH:["de_ch","fr_ch","it_ch"],CY:["en_xeu"],CZ:["cs_cz"],DE:["de_de"],DK:["da_dk"],EE:["en_xeu"],ES:["es_es"],FI:["fi_fi"],FR:["fr_fr"],GB:["en_gb"],GR:["en_xeu"],HU:["en_xeu"],IE:["en_ie"],IT:["it_it"],JP:["ja_jp"],LT:["en_xeu"],LU:["en_lu","fr_lu","de_lu"],LV:["en_xeu"],MT:["en_xeu"],MX:["en_us"],NL:["nl_nl"],NO:["no_no"],NZ:["en_nz"],PL:["pl_pl"],PT:["pt_pt"],RO:["en_xeu"],SE:["sv_se"],SI:["en_xeu"],SK:["en_xeu"],US:["en_us"],ZA:["en_xap"]},getValidLocaleCode:function(t,n){var r=t.toLowerCase()+"_"+n.toLowerCase(),i=e.inArray(r,this.LOCALE_MAP[n]);return-1===i?this.LOCALE_MAP[n][0]:r}},{});return n}),define("scripts/components/common/util/can-string-util",["can"],function(e){var t=/_|-/,n=/\=\=/,r=/([A-Z]+)([A-Z][a-z])/g,i=/([a-z\d])([A-Z])/g,o=/([a-z\d])([A-Z])/g,a=/\{([^\}]+)\}/g,s=/"/g,u=/'/g,c=/(\-|_)+(.)?/g,l=/[a-z][A-Z]/g,d=function(e,t,n){var r=e[t];return void 0===r&&n===!0&&(r=e[t]={}),r},f=function(e){return/^f|^o/.test(typeof e)},p=function(e){var t=null===e||void 0===e||isNaN(e)&&""+e=="NaN";return""+(t?"":e)};return e.extend(e,{esc:function(e){return p(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(s,"&#34;").replace(u,"&#39;")},getObject:function(t,n,r){var i,o,a,s,u=t?t.split("."):[],c=u.length,l=0;if(n=e.isArray(n)?n:[n||window],s=n.length,!c)return n[0];for(l;s>l;l++){for(i=n[l],a=void 0,o=0;c>o&&f(i);o++)a=i,i=d(a,u[o]);if(void 0!==a&&void 0!==i)break}if(r===!1&&void 0!==i&&delete a[u[o-1]],r===!0&&void 0===i)for(i=n[0],o=0;c>o&&f(i);o++)i=d(i,u[o],!0);return i},capitalize:function(e,t){return e.charAt(0).toUpperCase()+e.slice(1)},camelize:function(e){return p(e).replace(c,function(e,t,n){return n?n.toUpperCase():""})},hyphenate:function(e){return p(e).replace(l,function(e,t){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})},underscore:function(e){return e.replace(n,"/").replace(r,"$1_$2").replace(i,"$1_$2").replace(o,"_").toLowerCase()},sub:function(t,n,r){var i=[];return t=t||"",i.push(t.replace(a,function(t,o){var a=e.getObject(o,n,r===!0?!1:void 0);return void 0===a||null===a?(i=null,""):f(a)&&i?(i.push(a),""):""+a})),null===i?i:i.length<=1?i[0]:i},replacer:a,undHash:t}),e}),define("can-super",["can/util/library","can/construct"],function(e,t){var n=e.isFunction,r=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;return e.Construct._overwrite=function(e,t,i,o){e[i]=n(o)&&n(t[i])&&r.test(o)?function(e,n){return function(){var r,i=this._super;return this._super=t[e],r=n.apply(this,arguments),this._super=i,r}}(i,o):o},e.Construct._inherit=function(t,n,r){r=r||t;for(var i in t)e.Construct._overwrite(r,n,i,t[i])},e}),define("scripts/components/product-configurator/models/product-configuration-model",["jquery","can","scripts/components/common/util/locale-map-util","scripts/components/common/util/lang","scripts/components/common/util/can-string-util","can-super"],function(e,t,n){var r=t.Observe({domains:{prod:"store1.adobe.com",stage:"store1.stage.adobe.com","pre-stage":"store1.qa04.adobe.com",dev:"store1.dev04.adobe.com"},rootNode:"InlineConfigurator",findAll:function(t){var n=new e.Deferred,r=this.getServiceUrl(t),i=this;return e.ajax({url:r,type:"GET",dataType:"jsonp",data:this.getRequestParams(t),jsonpCallback:this.getCallbackName(t.productKey)}).then(function(e){var t=i.processData(e[i.rootNode]),r=new i(t);n.resolve(r)}).fail(function(e,t,r){n.reject({errorType:"PRODUCT_DATA_NOT_FOUND"})}),n.promise()},getRequestParams:function(e){var t={marketSegment:e.marketSegment,countryCode:e.countryCode,locale:this.getLocale(e)};return e.promotionCodes&&(t.promotion_code=e.promotionCodes.toString()),t},getServiceUrl:function(e){var t=this.domains[e.landscape||"prod"];return"//"+t+"/svcs/products"+e.productKey+"/configurator.json"},getLocale:function(e){return n.getValidLocaleCode(e.languageCode,e.countryCode)},getCallbackName:function(e){return"config"+e.replace(/\//g,"_")},processData:function(e){var t={productKey:e.productKey,currency:e.currency,configurationType:e.configurationType,skus:this.normalizeResultSet(e.skus),createDate:new Date(e.create_date),priceDisplay:e.price_display};return e.qualifyingProducts&&(t.qualifyingProducts=this.normalizeResultSet(e.qualifyingProducts)),t},normalizeResultSet:function(t){var n=[],r=this.normalizeColumnNames(t.columns),i=t.data;return e.each(i,function(t,i){for(var o in i.data)"null"===i.data[o]&&(i.data[o]=null);n.push(e.hash(r,i.data))}),n},normalizeColumnNames:function(n){var r=[];return e.each(n,function(e,n){r.push(t.camelize(n.toLowerCase()))}),r}},{init:function(){this.attr("filteredSkus",new t.Observe.List([])),this.setupFilteredSkuData()},setupFilteredSkuData:function(){this.attr("filteredSkus").replace(this.skus.slice(0)),this.filterHistory=[]},filterProductData:function(e,t){this.filterAppliedPreviously(e)&&this.revertDataToEarlierState(e),this.applyFilter(e,t),this.saveFilter(e,t)},getSkusWithDistinctFieldValues:function(t){for(var n,r,i=[],o={},a=this.attr("filteredSkus"),s=a.length,u=0;s>u;u++)n=a[u],r=n[t],""===r||null===r||e.hasKey(o,r)||(o[r]=1,i.push(n));return i},applyFilter:function(t,n){var r=this.attr("filteredSkus"),i=function(e){return e[t]===n};e.isValue(n)&&(r=e.grep(r,i),this.attr("filteredSkus").replace(r))},saveFilter:function(e,t){var n={fieldName:e,value:t,data:this.filteredSkus.slice(0)};this.filterHistory.push(n)},filterAppliedPreviously:function(t){var n=function(e){return e.fieldName===t};return e.grep(this.filterHistory,n).length>0},revertDataToEarlierState:function(e){var t=this.filterHistory;this.rollbackFilters(e),t.length?this.attr("filteredSkus").replace(t[t.length-1].data):this.attr("filteredSkus").replace(this.skus.slice(0))},rollbackFilters:function(e){var t,n=this.filterHistory;do t=n.pop();while(t.fieldName!==e)},resetAllFilters:function(){this.setupFilteredSkuData()}});return r}),define("text",["module"],function(e){"use strict";var t,n,r,i,o,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,l=c&&location.protocol&&location.protocol.replace(/\:/,""),d=c&&location.hostname,f=c&&(location.port||void 0),p={},h=e.config&&e.config()||{};return t={version:"2.0.14",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=a[t];try{e=new ActiveXObject(n)}catch(r){}if(e){a=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,o=e.lastIndexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!a||o>1)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,r=n||t,o=r.indexOf("!"),-1!==o&&(i="strip"===r.substring(o+1),r=r.substring(0,o),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var o,a,s,u=t.xdRegExp.exec(e);return u?(o=u[2],a=u[3],a=a.split(":"),s=a[1],a=a[0],!(o&&o!==n||a&&a.toLowerCase()!==r.toLowerCase()||(s||a)&&s!==i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,h.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText)return void r();h.isBuild=i&&i.isBuild;var o=t.parseName(e),a=o.moduleName+(o.ext?"."+o.ext:""),s=n.toUrl(a),u=h.useXhr||t.useXhr;return 0===s.indexOf("empty:")?void r():void(!c||u(s,l,d,f)?t.get(s,function(n){t.finishLoad(e,o.strip,n,r)},function(e){r.error&&r.error(e)}):n([a],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,r)}))},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var o=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,n,r,i,o){var a=t.parseName(n),s=a.ext?"."+a.ext:"",u=a.moduleName+s,c=r.toUrl(a.moduleName+s)+".js";t.load(u,r,function(n){var r=function(e){return i(c,e)};r.asModule=function(e,t){return i.asModule(e,c,t)},t.write(e,u,r,o)},o)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");"\ufeff"===i[0]&&(i=i.substring(1)),t(i)}catch(o){r&&r(o)}}):"xhr"===h.env||!h.env&&t.createXhr()?t.get=function(e,n,r,i){var o,a=t.createXhr();if(a.open("GET",e,!0),i)for(o in i)i.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),i[o]);h.onXhr&&h.onXhr(a,e),a.onreadystatechange=function(t){var i,o;4===a.readyState&&(i=a.status||0,i>399&&600>i?(o=new Error(e+" HTTP status: "+i),o.xhr=a,r&&r(o)):n(a.responseText),h.onXhrComplete&&h.onXhrComplete(a,e))},a.send(null)}:"rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,r,i="utf-8",o=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),i)),u="";try{for(n=new java.lang.StringBuffer,r=s.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=s.readLine());)n.append(a),n.append(r);u=String(n.toString())}finally{s.close()}t(u)}:("xpconnect"===h.env||!h.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,a,s,u={};o&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(s,1,0,!1),a=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),a.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),u),a.close(),n.close(),t(u.value)}catch(c){throw new Error((s&&s.path||"")+": "+c)}}),t}),define("text!scripts/components/product-configurator/views/filter-control-view.ejs",[],function(){return'<label class="control-label col-sm-3"><%= displayName %></label>\n<div class="col-sm-9">\n\n<%\n if( dataProvider.attr( \'length\' ) > 1 ){\n%>\n    <select class="form-control">\n     <% \n\n     list( dataProvider, function( item, index ){ \n         var name = item.attr( labelField ),\n               value = item.attr( fieldName );\n       %>\n        \n      <option value="<%= value %>"<% if( value === defaultValue ){ %> selected="selected" <%}%>><%== name %></option>\n       \n      <% }); %>\n     \n  </select>\n<%\n }\n else {\n%>\n    <p class="form-control-static"><%== dataProvider.attr( \'0.\' + labelField ) %></p>\n<%\n   }\n%>\n</div>'}),define("scripts/components/product-configurator/filter-control",["jquery","can","text!./views/filter-control-view.ejs","scripts/components/common/util/lang","can-proxy"],function(e,t,n){var r=t.Control({},{init:function(){this.name=this.options.name},initialize:function(){this.createViewModel(),this.setDataProvider(),this.renderView()},createViewModel:function(){this.viewModel=new t.Observe({displayName:this.options.displayName,fieldName:this.options.fieldName,labelField:this.options.labelField,defaultValue:"",dataProvider:new t.Observe.List([])})},setDataProvider:function(){var e=this.options.model,t=this.options.fieldName,n=this.options.sortFunction,r=this.viewModel.attr("dataProvider"),i=e.getSkusWithDistinctFieldValues(t);n&&i.sort(n),this.setDefaultValue(i),r.replace(i),this.setVisible()},setDefaultValue:function(t){var n,r,i=this.options.fieldName,o=this.options.defaultValue,a=function(e){return e[i]===r};if(e.isArray(o)){n=o.length;for(var s=0;n>s&&(r=o[s],!e.some(t,a));s++);}else r=o;this.viewModel.attr("defaultValue",r)},setVisible:function(){var e=this.viewModel.attr("dataProvider"),t=e.length;switch(t){case 0:this.element.hide();break;case 1:this.showSingleValueState();break;default:this.element.show()}},showSingleValueState:function(){var e=this.options.fieldName,t=this.viewModel.attr("dataProvider.0."+e);this.options.hideSingleValue||!this.isValidValue(t)?this.element.hide():this.element.show()},isValidValue:function(e){return"N/A"!==e&&"NONE"!==e&&""!==e&&"null"!==e&&null!==e},renderView:function(){t.view.ejs("viewEJS",n),this.element.html(t.view("viewEJS",this.viewModel))},applyFilter:function(){this.options.configurator.filterProductData(this)},getValue:function(){return this.element.find("select").val()||this.viewModel.dataProvider.attr("0."+this.options.fieldName)},getFieldName:function(){return this.options.fieldName},"select change":function(){this.viewModel.attr("defaultValue",this.getValue()),this.applyFilter()}});return r}),define("scripts/components/product-configurator/filter-control-factory",["jquery","can","./filter-control"],function(e,t,n){var r=t.Construct({DISTRIBUTION:"DISTRIBUTION",UPGRADE:"UPGRADE",VERSION:"VERSION",SERVICE_COMMITMENT:"SERVICE_COMMITMENT",PLATFORM:"PLATFORM",LANGUAGE:"LANGUAGE",FULFILLMENT:"FULFILLMENT",TERM_TYPE:"TERM_TYPE",QUANTITY:"QUANTITY",controllerProps:{DISTRIBUTION:{fieldName:"distributionMethod",labelField:"distributionMethodLabel",displayName:"I want to buy:",sortFunction:function(e,t){return t.price-e.price},hideSingleValue:!1,defaultValue:"FULL",name:"DISTRIBUTION"},UPGRADE:{fieldName:"upgradeGroup",labelField:"name",valueField:"productKey",displayName:"Upgrade from:",truncate:!0,hideSingleValue:!1,defaultValue:null,name:"UPGRADE"},VERSION:{fieldName:"versionString",labelField:"versionString",displayName:"Version:",hideSingleValue:!0,defaultValue:null,name:"VERSION"},SERVICE_COMMITMENT:{fieldName:"serviceCommitment",labelField:"serviceCommitmentLabel",displayName:"Plan:",hideSingleValue:!1,defaultValue:"YEAR",name:"SERVICE_COMMITMENT"},PLATFORM:{fieldName:"platformCode",labelField:"platformLabel",displayName:"Platform:",hideSingleValue:!1,defaultValue:"Windows",name:"PLATFORM"},LANGUAGE:{fieldName:"languageCode",labelField:"language",displayName:"Language:",hideSingleValue:!1,defaultValue:"EN",name:"LANGUAGE"},FULFILLMENT:{fieldName:"fulfillmentMethodType",labelField:"fulfillmentMethodTypeLabel",displayName:"Delivery:",sortFunction:function(e,t){var n=e.fulfillmentMethodTypeLabel.toLowerCase(),r=t.fulfillmentMethodTypeLabel.toLowerCase();return r>n?-1:n>r?1:0},hideSingleValue:!0,defaultValue:"SOFTGOOD",name:"FULFILLMENT"},TERM_TYPE:{fieldName:"termType",labelField:"termTypeLabel",displayName:"Plan:",hideSingleValue:!0,defaultValue:"ANNUAL",name:"TERM_TYPE"},QUANTITY:{fieldName:"quantity",labelField:"quantity",displayName:"Quantity:",hideSingleValue:!1,defaultValue:1,name:"QUANTITY"}},controlMixins:{UPGRADE:{setDataProvider:function(){var e=this.options.model,t=this.options.fieldName,n=this.viewModel.attr("dataProvider"),r=e.getSkusWithDistinctFieldValues(t),i=r.length>1?e.attr("qualifyingProducts"):[];n.replace(i),this.setVisible()}},QUANTITY:{setDataProvider:function(){for(var e=this.options.model,t=this.viewModel.attr("dataProvider"),n=e.getSkusWithDistinctFieldValues("maxCartQty"),r=1===n.length?n[0].maxCartQty:9,i=[],o=1;r>=o;o++)i.push({quantity:String(o)});this.viewModel.attr("defaultValue",this.options.defaultValue),t.replace(i),this.setVisible()},applyFilter:function(){this.options.configurator.skusFiltered()}}}},{init:function(e){this.configurator=e},getFilterControl:function(t,r){var i=this.getFilterControlOptions(t,r),o="form-group configurator-control "+t.toLowerCase(),a=e('<div class="'+o+'">'),s=new n(a,i);return this.addControlMixins(s),s.initialize(),s},getFilterControlOptions:function(t,n){var r=this.constructor.controllerProps[t],i=n[r.fieldName]||{};return e.extend(r,i),r.model=this.configurator.model,r.configurator=this.configurator,r},addControlMixins:function(t){var n=t.name,r=this.constructor.controlMixins[n];e.extend(t,r)}});return r}),define("lib/canjs/amd/can/control/plugin",["jquery","can/util/library","can/control"],function(e,t){var n,r=function(e,t){for(n=0;n<t.length;n++)if("string"==typeof t[n]?e.constructor._shortName==t[n]:e instanceof t[n])return!0;return!1},i=t.makeArray,o=t.Control.setup;return t.Control.setup=function(){if(this!==t.Control){var e=this.pluginName||this._fullName;"can_control"!==e&&this.plugin(e),o.apply(this,arguments)}},e.fn.extend({controls:function(){var e,n,o=i(arguments),a=[];return this.each(function(){if(e=t.$(this).data("controls"))for(var i=0;i<e.length;i++)n=e[i],(!o.length||r(n,o))&&a.push(n)}),a},control:function(e){return this.controls.apply(this,arguments)[0]}}),t.Control.plugin=function(n){var r=this;e.fn[n]||(e.fn[n]=function(n){var o,a=i(arguments),s="string"==typeof n&&e.isFunction(r.prototype[n]),u=a[0];return this.each(function(){var e=t.$(this).control(r);e?s?o=e[u].apply(e,a.slice(1)):e.update.apply(e,a):r.newInstance.apply(r,[this].concat(a))}),void 0!==o?o:this})},t.Control.prototype.update=function(e){t.extend(this.options,e),this.on()},t}),define("product-configurator",["jquery","can","scripts/components/product-configurator/models/product-configuration-model","scripts/components/product-configurator/filter-control-factory","lib/canjs/amd/can/control/plugin","can-proxy"],function(e,t,n,r){var i=t.Control({pluginName:"anyware_product_configurator",defaults:{countryCode:"US",languageCode:"en",marketSegment:"COM",landscape:"prod",containerClass:"form-horizontal",filterControlOptions:{distributionMethod:{displayName:"I want to buy:",defaultValue:["SUB_NEW","FULL"],hideSingleValue:!0},upgradeGroup:{displayName:"Upgrade from:",defaultValue:null,hideSingleValue:!0},versionString:{displayName:"Version:",defaultValue:null,hideSingleValue:!0},serviceCommitment:{displayName:"Plan:",defaultValue:"YEAR",hideSingleValue:!0},platformCode:{displayName:"Platform:",defaultValue:["Mac/Win","Windows"],hideSingleValue:!0},languageCode:{displayName:"Language:",defaultValue:["MULT","EN"],hideSingleValue:!0},fulfillmentMethod:{displayName:"Delivery:",defaultValue:"SOFTGOOD",hideSingleValue:!0},termType:{displayName:"Plan:",defaultValue:"ANNUAL",hideSingleValue:!0},quantity:{displayName:"Quantity:",defaultValue:1,hideSingleValue:!0}}},MISSING_ARGUMENTS_ERROR:"Configurator: You must provide either a productModel or productKey plugin options"},{init:function(){var e=this.options;if(!e.productKey&&!e.model)throw new Error(this.constructor.MISSING_ARGUMENTS_ERROR);this.element.addClass(this.options.containerClass),this.currentFilterIndex=0,e.model?this.dataLoaded(e.model):this.loadProductData()},loadProductData:function(){n.findAll(this.options).then(this.proxy("dataLoaded")).fail(this.proxy("dataLoadError"))},dataLoaded:function(e){this.model=e,this.setupListeners(),this.setupFilterControls(),this.beginConfigutation()},dataLoadError:function(e){this.element.trigger("errorEvent",e);
},beginConfigutation:function(){var e=this.filterControls[0];this.filterProductData(e)},filterProductData:function(e){this.model.filterAppliedPreviously(e.getFieldName())&&this.setCurrentFilterIndex(e.name),this.isCurrentFilter(e.name)&&(this.applyFilter(e),this.resetRemainingFilters())},applyFilter:function(e){this.model.filterProductData(e.getFieldName(),e.getValue()),this.currentFilterIndex++},resetRemainingFilters:function(){for(var e,t=this.filterControls,n=t.length,r=this.currentFilterIndex,i=t[r],o=r;n>o;o++)e=t[o],e.setDataProvider();i&&i.applyFilter()},getSelectedSku:function(){var e,t=this.model.attr("filteredSkus");return 1===t.length&&(e=t.attr("0"),e.attr("quantity",this.getQuantity())),e},getQuantity:function(){return this.filterControls[this.getFilterIndex("QUANTITY")].getValue()},isCurrentFilter:function(e){return this.currentFilterIndex===this.getFilterIndex(e)},setCurrentFilterIndex:function(e){this.currentFilterIndex=this.getFilterIndex(e)},getFilterIndex:function(e){for(var t=this.filterControls,n=t.length,r=0;n>r;r++)if(t[r].name===e)return r;return-1},setupListeners:function(){this.model.attr("filteredSkus").bind("change",this.proxy("skusFiltered"))},skusFiltered:function(){var e,t=this.model.attr("filteredSkus.length");1===t&&(e=this.getSelectedSku()),this.element.trigger("modelChanged",{numberOfSkus:t,model:this.model,selectedSku:e})},setupFilterControls:function(){for(var e,t=this.getFilterControlList(),n=new r(this),i=this.filterControls=[],o=this.options.filterControlOptions,a=0;a<t.length;a++)e=n.getFilterControl(t[a],o),this.element.append(e.element),i.push(e)},getFilterControlList:function(){var e,t=this.dataIncludesQualifyingProducts(),n=this.getConfigurationType(),i=r;switch(n){case"STANDARD":e=t?[i.DISTRIBUTION,i.UPGRADE,i.SERVICE_COMMITMENT,i.PLATFORM,i.LANGUAGE,i.FULFILLMENT,i.QUANTITY]:[i.DISTRIBUTION,i.VERSION,i.SERVICE_COMMITMENT,i.PLATFORM,i.LANGUAGE,i.FULFILLMENT,i.QUANTITY];break;case"SUBSCRIPTION":e=[i.TERM_TYPE,i.QUANTITY]}return e},dataIncludesQualifyingProducts:function(){var e=this.model.attr("qualifyingProducts");return e&&e.length>0},getConfigurationType:function(){var e=this.model.attr("configurationType");return"SSP_SUBSCRIPTION"===e?"SUBSCRIPTION":"STANDARD"}});return i}),define("OpenAjax/hub/hub",[],function(){var e=window.OpenAjax||{};return e.hub||(window.OpenAjax=e,e.hub=function(){var e={},t="org.openajax.hub.";return{implementer:"http://openajax.org",implVersion:"2.0.7",specVersion:"2.0",implExtraData:{},libraries:e,registerLibrary:function(n,r,i,o){e[n]={prefix:n,namespaceURI:r,version:i,extraData:o},this.publish(t+"registerLibrary",e[n])},unregisterLibrary:function(n){this.publish(t+"unregisterLibrary",e[n]),delete e[n]}}}(),e.hub.Error={BadParameters:"OpenAjax.hub.Error.BadParameters",Disconnected:"OpenAjax.hub.Error.Disconnected",Duplicate:"OpenAjax.hub.Error.Duplicate",NoContainer:"OpenAjax.hub.Error.NoContainer",NoSubscription:"OpenAjax.hub.Error.NoSubscription",NotAllowed:"OpenAjax.hub.Error.NotAllowed",WrongProtocol:"OpenAjax.hub.Error.WrongProtocol",IncompatBrowser:"OpenAjax.hub.Error.IncompatBrowser"},e.hub.SecurityAlert={LoadTimeout:"OpenAjax.hub.SecurityAlert.LoadTimeout",FramePhish:"OpenAjax.hub.SecurityAlert.FramePhish",ForgedMsg:"OpenAjax.hub.SecurityAlert.ForgedMsg"},e.hub._debugger=function(){e.hub.enableDebug},e.hub.ManagedHub=function(t){if(!t||!t.onPublish||!t.onSubscribe)throw new Error(e.hub.Error.BadParameters);if(this._p=t,this._onUnsubscribe=t.onUnsubscribe?t.onUnsubscribe:null,this._scope=t.scope||window,t.log){var n=this;this._log=function(r){try{t.log.call(n._scope,"ManagedHub: "+r)}catch(i){e.hub._debugger()}}}else this._log=function(){};this._subscriptions={c:{},s:null},this._containers={},this._seq=0,this._active=!0,this._isPublishing=!1,this._pubQ=[]},e.hub.ManagedHub.prototype.subscribeForClient=function(t,n,r){if(this._assertConn(),this._invokeOnSubscribe(n,t))return this._subscribe(n,this._sendToClient,this,{c:t,sid:r});throw new Error(e.hub.Error.NotAllowed)},e.hub.ManagedHub.prototype.unsubscribeForClient=function(e,t){this._unsubscribe(t),this._invokeOnUnsubscribe(e,t)},e.hub.ManagedHub.prototype.publishForClient=function(e,t,n){this._assertConn(),this._publish(t,n,e)},e.hub.ManagedHub.prototype.disconnect=function(){this._active=!1;for(var e in this._containers)this.removeContainer(this._containers[e])},e.hub.ManagedHub.prototype.getContainer=function(e){var t=this._containers[e];return t?t:null},e.hub.ManagedHub.prototype.listContainers=function(){var e=[];for(var t in this._containers)e.push(this._containers[t]);return e},e.hub.ManagedHub.prototype.addContainer=function(t){this._assertConn();var n=t.getClientID();if(this._containers[n])throw new Error(e.hub.Error.Duplicate);this._containers[n]=t},e.hub.ManagedHub.prototype.removeContainer=function(t){var n=t.getClientID();if(!this._containers[n])throw new Error(e.hub.Error.NoContainer);t.remove(),delete this._containers[n]},e.hub.ManagedHub.prototype.subscribe=function(t,n,r,i,o){function a(t,i,a,u){if(s._invokeOnPublish(t,i,u,null))try{n.call(r,t,i,o)}catch(c){e.hub._debugger(),s._log("caught error from onData callback to Hub.subscribe(): "+c.message)}}if(this._assertConn(),this._assertSubTopic(t),!n)throw new Error(e.hub.Error.BadParameters);if(r=r||window,!this._invokeOnSubscribe(t,null))return void this._invokeOnComplete(i,r,null,!1,e.hub.Error.NotAllowed);var s=this,u=this._subscribe(t,a,r,o);return this._invokeOnComplete(i,r,u,!0),u},e.hub.ManagedHub.prototype.publish=function(e,t){this._assertConn(),this._assertPubTopic(e),this._publish(e,t,null)},e.hub.ManagedHub.prototype.unsubscribe=function(t,n,r){if(this._assertConn(),!t)throw new Error(e.hub.Error.BadParameters);this._unsubscribe(t),this._invokeOnUnsubscribe(null,t),this._invokeOnComplete(n,r,t,!0)},e.hub.ManagedHub.prototype.isConnected=function(){return this._active},e.hub.ManagedHub.prototype.getScope=function(){return this._scope},e.hub.ManagedHub.prototype.getSubscriberData=function(t){this._assertConn();var n=t.split("."),r=n.pop(),i=this._getSubscriptionObject(this._subscriptions,n,0,r);if(i)return i.data;throw new Error(e.hub.Error.NoSubscription)},e.hub.ManagedHub.prototype.getSubscriberScope=function(t){this._assertConn();var n=t.split("."),r=n.pop(),i=this._getSubscriptionObject(this._subscriptions,n,0,r);if(i)return i.scope;throw new Error(e.hub.Error.NoSubscription)},e.hub.ManagedHub.prototype.getParameters=function(){return this._p},e.hub.ManagedHub.prototype._sendToClient=function(e,t,n,r){this.isConnected()&&this._invokeOnPublish(e,t,r,n.c)&&n.c.sendToClient(e,t,n.sid)},e.hub.ManagedHub.prototype._assertConn=function(){if(!this.isConnected())throw new Error(e.hub.Error.Disconnected)},e.hub.ManagedHub.prototype._assertPubTopic=function(t){if(!t||""===t||-1!=t.indexOf("*")||-1!=t.indexOf("..")||"."==t.charAt(0)||"."==t.charAt(t.length-1))throw new Error(e.hub.Error.BadParameters)},e.hub.ManagedHub.prototype._assertSubTopic=function(t){if(!t)throw new Error(e.hub.Error.BadParameters);for(var n=t.split("."),r=n.length,i=0;r>i;i++){var o=n[i];if(""===o||-1!=o.indexOf("*")&&"*"!=o&&"**"!=o)throw new Error(e.hub.Error.BadParameters);if("**"==o&&r-1>i)throw new Error(e.hub.Error.BadParameters)}},e.hub.ManagedHub.prototype._invokeOnComplete=function(t,n,r,i,o){if(t)try{n=n||window,t.call(n,r,i,o)}catch(a){e.hub._debugger(),this._log("caught error from onComplete callback: "+a.message)}},e.hub.ManagedHub.prototype._invokeOnPublish=function(t,n,r,i){try{return this._p.onPublish.call(this._scope,t,n,r,i)}catch(o){e.hub._debugger(),this._log("caught error from onPublish callback to constructor: "+o.message)}return!1},e.hub.ManagedHub.prototype._invokeOnSubscribe=function(t,n){try{return this._p.onSubscribe.call(this._scope,t,n)}catch(r){e.hub._debugger(),this._log("caught error from onSubscribe callback to constructor: "+r.message)}return!1},e.hub.ManagedHub.prototype._invokeOnUnsubscribe=function(t,n){if(this._onUnsubscribe){var r=n.slice(0,n.lastIndexOf("."));try{this._onUnsubscribe.call(this._scope,r,t)}catch(i){e.hub._debugger(),this._log("caught error from onUnsubscribe callback to constructor: "+i.message)}}},e.hub.ManagedHub.prototype._subscribe=function(e,t,n,r){var i=e+"."+this._seq,o={scope:n,cb:t,data:r,sid:this._seq++},a=e.split(".");return this._recursiveSubscribe(this._subscriptions,a,0,o),i},e.hub.ManagedHub.prototype._recursiveSubscribe=function(e,t,n,r){var i=t[n];n==t.length?(r.next=e.s,e.s=r):("undefined"==typeof e.c&&(e.c={}),"undefined"==typeof e.c[i]?(e.c[i]={c:{},s:null},this._recursiveSubscribe(e.c[i],t,n+1,r)):this._recursiveSubscribe(e.c[i],t,n+1,r))},e.hub.ManagedHub.prototype._publish=function(e,t,n){if(this._isPublishing)return void this._pubQ.push({t:e,d:t,p:n});for(this._safePublish(e,t,n);this._pubQ.length>0;){var r=this._pubQ.shift();this._safePublish(r.t,r.d,r.p)}},e.hub.ManagedHub.prototype._safePublish=function(e,t,n){this._isPublishing=!0;var r=e.split(".");this._recursivePublish(this._subscriptions,r,0,e,t,n),this._isPublishing=!1},e.hub.ManagedHub.prototype._recursivePublish=function(e,t,n,r,i,o){if("undefined"!=typeof e){var a;if(n==t.length?a=e:(this._recursivePublish(e.c[t[n]],t,n+1,r,i,o),this._recursivePublish(e.c["*"],t,n+1,r,i,o),a=e.c["**"]),"undefined"!=typeof a)for(var s=a.s;s;){var u=s.scope,c=s.cb,l=s.data;"string"==typeof c&&(c=u[c]),c.call(u,r,i,l,o),s=s.next}}},e.hub.ManagedHub.prototype._unsubscribe=function(t){var n=t.split("."),r=n.pop();if(!this._recursiveUnsubscribe(this._subscriptions,n,0,r))throw new Error(e.hub.Error.NoSubscription)},e.hub.ManagedHub.prototype._recursiveUnsubscribe=function(e,t,n,r){if("undefined"==typeof e)return!1;if(n<t.length){var i=e.c[t[n]];if(!i)return!1;if(this._recursiveUnsubscribe(i,t,n+1,r),!i.s){for(var o in i.c)return!0;delete e.c[t[n]]}}else{for(var a=e.s,s=null,u=!1;a;){if(r==a.sid){u=!0,a==e.s?e.s=a.next:s.next=a.next;break}s=a,a=a.next}if(!u)return!1}return!0},e.hub.ManagedHub.prototype._getSubscriptionObject=function(e,t,n,r){if("undefined"!=typeof e){if(n<t.length){var i=e.c[t[n]];return this._getSubscriptionObject(i,t,n+1,r)}for(var o=e.s;o;){if(r==o.sid)return o;o=o.next}}return null},e.hub._hub=new e.hub.ManagedHub({onSubscribe:function(e,t){return!0},onPublish:function(e,t,n,r){return!0}}),e.hub.subscribe=function(t,n,r,i){return"string"==typeof n&&(r=r||window,n=r[n]||null),e.hub._hub.subscribe(t,n,r,null,i)},e.hub.unsubscribe=function(t){return e.hub._hub.unsubscribe(t)},e.hub.publish=function(t,n){e.hub._hub.publish(t,n)},e.hub.registerLibrary("OpenAjax","http://openajax.org/hub","2.0",{})),e}),define("OpenAjax/containers/inline/inline",["OpenAjax/hub/hub"],function(e){return e.hub.InlineContainer=function(t,n,r){function i(t,n,r,i,o){if(t)try{n=n||window,t.call(n,r,i,o)}catch(a){e.hub._debugger(),h._log("caught error from onComplete callback: "+a.message)}}function o(){for(var e in f)t.unsubscribeForClient(this,f[e].h);f=[],p=0,d=!1}function a(){if(!d)throw new Error(e.hub.Error.Disconnected)}function s(t){if(null==t||""===t||-1!=t.indexOf("*")||-1!=t.indexOf("..")||"."==t.charAt(0)||"."==t.charAt(t.length-1))throw new Error(e.hub.Error.BadParameters)}function u(t){if(!t)throw new Error(e.hub.Error.BadParameters);for(var n=t.split("."),r=n.length,i=0;r>i;i++){var o=n[i];if(""===o||-1!=o.indexOf("*")&&"*"!=o&&"**"!=o)throw new Error(e.hub.Error.BadParameters);if("**"==o&&r-1>i)throw new Error(e.hub.Error.BadParameters)}}function c(t){var n=f[t];if(n)return n;throw new Error(e.hub.Error.NoSubscription)}if(!(t&&n&&r&&r.Container&&r.Container.onSecurityAlert))throw new Error(e.hub.Error.BadParameters);var l=r.Container.scope||window,d=!1,f=[],p=0,h=null;if(r.Container.log)var g=function(t){try{r.Container.log.call(l,"InlineContainer::"+n+": "+t)}catch(i){e.hub._debugger()}};else g=function(){};this._init=function(){t.addContainer(this)},this.getHub=function(){return t},this.sendToClient=function(t,n,r){if(d){var i=f[r];try{i.cb.call(i.sc,t,n,i.d)}catch(o){e.hub._debugger(),h._log("caught error from onData callback to HubClient.subscribe(): "+o.message)}}},this.remove=function(){d&&o()},this.isConnected=function(){return d},this.getClientID=function(){return n},this.getPartnerOrigin=function(){return d?window.location.protocol+"//"+window.location.hostname:null},this.getParameters=function(){return r},this.connect=function(t,n,o){if(d)throw new Error(e.hub.Error.Duplicate);if(d=!0,h=t,r.Container.onConnect)try{r.Container.onConnect.call(l,this)}catch(a){e.hub._debugger(),g("caught error from onConnect callback to constructor: "+a.message)}i(n,o,t,!0)},this.disconnect=function(t,n,a){if(!d)throw new Error(e.hub.Error.Disconnected);if(o(),r.Container.onDisconnect)try{r.Container.onDisconnect.call(l,this)}catch(s){e.hub._debugger(),g("caught error from onDisconnect callback to constructor: "+s.message)}i(n,a,t,!0)},this.subscribe=function(n,r,o,s,c){if(a(),u(n),!r)throw new Error(e.hub.Error.BadParameters);var l=""+p++,d=!1,h=null;try{var g=t.subscribeForClient(this,n,l);d=!0}catch(m){l=null,h=m.message}return o=o||window,d&&(f[l]={h:g,cb:r,sc:o,d:c}),i(s,o,l,d,h),l},this.publish=function(e,n){a(),s(e),t.publishForClient(this,e,n)},this.unsubscribe=function(n,r,o){if(a(),"undefined"==typeof n||null===n)throw new Error(e.hub.Error.BadParameters);var s=f[n];if(!s)throw new Error(e.hub.Error.NoSubscription);t.unsubscribeForClient(this,s.h),delete f[n],i(r,o,n,!0)},this.getSubscriberData=function(e){return a(),c(e).d},this.getSubscriberScope=function(e){return a(),c(e).sc},this._init()},e.hub.InlineHubClient=function(t){if(!(t&&t.HubClient&&t.HubClient.onSecurityAlert&&t.InlineHubClient&&t.InlineHubClient.container))throw new Error(e.hub.Error.BadParameters);var n=t.InlineHubClient.container,r=t.HubClient.scope||window;if(t.HubClient.log)var i=function(i){try{t.HubClient.log.call(r,"InlineHubClient::"+n.getClientID()+": "+i)}catch(o){e.hub._debugger()}};else i=function(){};this._log=i,this.connect=function(e,t){n.connect(this,e,t)},this.disconnect=function(e,t){n.disconnect(this,e,t)},this.getPartnerOrigin=function(){return n.getPartnerOrigin()},this.getClientID=function(){return n.getClientID()},this.subscribe=function(e,t,r,i,o){return n.subscribe(e,t,r,i,o)},this.publish=function(e,t){n.publish(e,t)},this.unsubscribe=function(e,t,r){n.unsubscribe(e,t,r)},this.isConnected=function(){return n.isConnected()},this.getScope=function(){return r},this.getSubscriberData=function(e){return n.getSubscriberData(e)},this.getSubscriberScope=function(e){return n.getSubscriberScope(e)},this.getParameters=function(){return t}},e}),define("OpenAjax/containers/iframe/iframe",["OpenAjax/hub/hub"],function(OpenAjax){var OpenAjax=OpenAjax||{};return OpenAjax.hub=OpenAjax.hub||{},OpenAjax.gadgets="object"==typeof OpenAjax.gadgets?OpenAjax.gadgets:"object"==typeof gadgets?gadgets:{},OpenAjax.gadgets.rpctx=OpenAjax.gadgets.rpctx||{},function(){if("undefined"==typeof gadgets){if("undefined"==typeof oaaConfig)for(var scripts=document.getElementsByTagName("script"),reHub=/openajax(?:managedhub-(?:all|core).*|-mashup)\.js$/i,i=scripts.length-1;i>=0;i--){var src=scripts[i].getAttribute("src");if(src){var m=src.match(reHub);if(m){var config=scripts[i].getAttribute("oaaConfig");if(config)try{oaaConfig=eval("({ "+config+" })")}catch(e){}break}}}"undefined"!=typeof oaaConfig&&oaaConfig.gadgetsGlobal&&(gadgets=OpenAjax.gadgets)}}(),OpenAjax.hub.IframeContainer||!function(){function e(e,t,n){if(!OpenAjax.hub.IframeContainer._prng){var r=(new Date).getTime()+Math.random()+document.cookie;OpenAjax.hub.IframeContainer._prng=OpenAjax._smash.crypto.newPRNG(r)}var i=e.IframeContainer||e.IframeHubClient;if(i&&i.seed)try{var o=i.seed.call(t);OpenAjax.hub.IframeContainer._prng.addSeed(o)}catch(a){OpenAjax.hub._debugger(),n("caught error from 'seed' callback: "+a.message)}var s=i&&i.tokenLength||6;return OpenAjax.hub.IframeContainer._prng.nextRandomB64Str(s)}OpenAjax.hub.IframeContainer=function(n,r,i){function o(e){var t=e[0],n=e[1],r=e[2];if(!(t&&n&&r&&r.Container&&r.Container.onSecurityAlert&&r.IframeContainer&&r.IframeContainer.parent&&r.IframeContainer.uri))throw new Error(OpenAjax.hub.Error.BadParameters)}function a(){var e=document.createElement("span");i.IframeContainer.parent.appendChild(e);var t='<iframe id="'+f+'" name="'+f+'" src="javascript:\'<html></html>\'"',n="",o=i.IframeContainer.iframeAttrs;if(o)for(var a in o)switch(a){case"style":for(var s in o.style)n+=s+":"+o.style[s]+";";break;case"className":t+=' class="'+o[a]+'"';break;default:t+=" "+a+'="'+o[a]+'"'}n+="visibility:hidden;",t+=' style="'+n+'"></iframe>',e.innerHTML=t;var u;u=i.IframeContainer.tunnelURI?"&parent="+encodeURIComponent(i.IframeContainer.tunnelURI)+"&forcesecure=true":"&oahParent="+encodeURIComponent(OpenAjax.gadgets.rpc.getOrigin(window.location.href));var c="";f!==r&&(c="&oahId="+f.substring(f.lastIndexOf("_")+1)),document.getElementById(f).src=i.IframeContainer.uri+"#rpctoken="+d+u+c}function s(){function e(e){if(e&&(m=!0,clearTimeout(p),document.getElementById(f).style.visibility="visible",i.Container.onConnect))try{i.Container.onConnect.call(g,h)}catch(t){OpenAjax.hub._debugger(),y("caught error from onConnect callback to constructor: "+t.message)}}OpenAjax.gadgets.rpc.call(f,"openajax.pubsub",e,"cmd","con")}function u(){if(m){m=!1,document.getElementById(f).style.visibility="hidden";for(var e in b)n.unsubscribeForClient(h,b[e]);b={}}}function c(e){try{i.Container.onSecurityAlert.call(g,h,e)}catch(t){OpenAjax.hub._debugger(),y("caught error from onSecurityAlert callback to constructor: "+t.message)}}function l(){p=setTimeout(function(){c(OpenAjax.hub.SecurityAlert.LoadTimeout),h._handleIncomingRPC=function(){}},v)}o(arguments);var d,f,p,h=this,g=i.Container.scope||window,m=!1,b={},v=i.IframeContainer.timeout||15e3;if(i.Container.log)var y=function(e){try{i.Container.log.call(g,"IframeContainer::"+r+": "+e)}catch(t){OpenAjax.hub._debugger()}};else y=function(){};this._init=function(){n.addContainer(this),f=OpenAjax.hub.IframeContainer._rpcRouter.add(r,this),d=e(i,g,y);var t=i.IframeContainer.clientRelay,o=OpenAjax.gadgets.rpc.getRelayChannel();if(i.IframeContainer.tunnelURI){if("wpm"!==o&&"ifpc"!==o)throw new Error(OpenAjax.hub.Error.IncompatBrowser)}else y("WARNING: Parameter 'IframeContaienr.tunnelURI' not specified. Connection will not be fully secure."),"rmr"!==o||t||(t=OpenAjax.gadgets.rpc.getOrigin(i.IframeContainer.uri)+"/robots.txt");a(),OpenAjax.gadgets.rpc.setupReceiver(f,t),l()},this.sendToClient=function(e,t,n){OpenAjax.gadgets.rpc.call(f,"openajax.pubsub",null,"pub",e,t,n)},this.remove=function(){u(),clearTimeout(p),OpenAjax.gadgets.rpc.removeReceiver(f);var e=document.getElementById(f);e.parentNode.removeChild(e),OpenAjax.hub.IframeContainer._rpcRouter.remove(f)},this.isConnected=function(){return m},this.getClientID=function(){return r},this.getPartnerOrigin=function(){if(m){var e=OpenAjax.gadgets.rpc.getReceiverOrigin(f);if(e)return/^([a-zA-Z]+:\/\/[^:]+).*/.exec(e)[1]}return null},this.getParameters=function(){return i},this.getHub=function(){return n},this.getIframe=function(){return document.getElementById(f)},this._handleIncomingRPC=function(e,t,r){switch(e){case"pub":n.publishForClient(h,t,r);break;case"sub":var o="";try{b[r]=n.subscribeForClient(h,t,r)}catch(a){o=a.message}return o;case"uns":var c=b[r];return n.unsubscribeForClient(h,c),delete b[r],r;case"con":return s(),!0;case"dis":if(l(),u(),i.Container.onDisconnect)try{i.Container.onDisconnect.call(g,h)}catch(a){OpenAjax.hub._debugger(),y("caught error from onDisconnect callback to constructor: "+a.message)}return!0}},this._onSecurityAlert=function(e){c(t[e])},this._init()},OpenAjax.hub.IframeHubClient=function(e){function t(){if(!s)throw new Error(OpenAjax.hub.Error.Disconnected)}function n(e){if(!e)throw new Error(OpenAjax.hub.Error.BadParameters);for(var t=e.split("."),n=t.length,r=0;n>r;r++){var i=t[r];if(""===i||-1!=i.indexOf("*")&&"*"!=i&&"**"!=i)throw new Error(OpenAjax.hub.Error.BadParameters);if("**"==i&&n-1>r)throw new Error(OpenAjax.hub.Error.BadParameters)}}function r(e){if(!e||""===e||-1!=e.indexOf("*")||-1!=e.indexOf("..")||"."==e.charAt(0)||"."==e.charAt(e.length-1))throw new Error(OpenAjax.hub.Error.BadParameters)}if(!e||!e.HubClient||!e.HubClient.onSecurityAlert)throw new Error(OpenAjax.hub.Error.BadParameters);var i,o=this,a=e.HubClient.scope||window,s=!1,u={},c=0;if(e.HubClient.log)var l=function(t){try{e.HubClient.log.call(a,"IframeHubClient::"+i+": "+t)}catch(n){OpenAjax.hub._debugger()}};else l=function(){};this._init=function(){var t=OpenAjax.gadgets.util.getUrlParameters();if(!t.parent){var n=t.oahParent+"/robots.txt";OpenAjax.gadgets.rpc.setupReceiver("..",n)}if(e.IframeHubClient&&e.IframeHubClient.requireParentVerifiable&&null===OpenAjax.gadgets.rpc.getReceiverOrigin(".."))throw OpenAjax.gadgets.rpc.removeReceiver(".."),new Error(OpenAjax.hub.Error.IncompatBrowser);OpenAjax.hub.IframeContainer._rpcRouter.add("..",this),i=OpenAjax.gadgets.rpc.RPC_ID,t.oahId&&(i=i.substring(0,i.lastIndexOf("_")))},this.connect=function(e,t){function n(n){if(n&&(s=!0,e))try{e.call(t||window,o,!0)}catch(r){OpenAjax.hub._debugger(),l("caught error from onComplete callback to connect(): "+r.message)}}if(s)throw new Error(OpenAjax.hub.Error.Duplicate);OpenAjax.gadgets.rpc.call("..","openajax.pubsub",n,"con")},this.disconnect=function(e,t){if(!s)throw new Error(OpenAjax.hub.Error.Disconnected);s=!1;var n=null;e&&(n=function(n){try{e.call(t||window,o,!0)}catch(r){OpenAjax.hub._debugger(),l("caught error from onComplete callback to disconnect(): "+r.message)}}),OpenAjax.gadgets.rpc.call("..","openajax.pubsub",n,"dis")},this.getPartnerOrigin=function(){if(s){var e=OpenAjax.gadgets.rpc.getReceiverOrigin("..");if(e)return/^([a-zA-Z]+:\/\/[^:]+).*/.exec(e)[1]}return null},this.getClientID=function(){return i},this.subscribe=function(e,r,i,o,a){function s(e){if(""!==e&&delete u[d],o)try{o.call(i,d,""===e,e)}catch(t){OpenAjax.hub._debugger(),l("caught error from onComplete callback to subscribe(): "+t.message)}}if(t(),n(e),!r)throw new Error(OpenAjax.hub.Error.BadParameters);i=i||window;var d=""+c++;return u[d]={cb:r,sc:i,d:a},OpenAjax.gadgets.rpc.call("..","openajax.pubsub",s,"sub",e,d),d},this.publish=function(e,n){t(),r(e),OpenAjax.gadgets.rpc.call("..","openajax.pubsub",null,"pub",e,n)},this.unsubscribe=function(e,n,r){function i(t){if(delete u[e],n)try{n.call(r||window,e,!0)}catch(i){OpenAjax.hub._debugger(),l("caught error from onComplete callback to unsubscribe(): "+i.message)}}if(t(),!e)throw new Error(OpenAjax.hub.Error.BadParameters);if(!u[e]||u[e].uns)throw new Error(OpenAjax.hub.Error.NoSubscription);u[e].uns=!0,OpenAjax.gadgets.rpc.call("..","openajax.pubsub",i,"uns",null,e)},this.isConnected=function(){return s},this.getScope=function(){return a},this.getSubscriberData=function(e){if(t(),u[e])return u[e].d;throw new Error(OpenAjax.hub.Error.NoSubscription)},this.getSubscriberScope=function(e){if(t(),u[e])return u[e].sc;throw new Error(OpenAjax.hub.Error.NoSubscription)},this.getParameters=function(){return e},this._handleIncomingRPC=function(e,t,n,r){if("pub"===e&&u[r]&&!u[r].uns)try{u[r].cb.call(u[r].sc,t,n,u[r].d)}catch(i){OpenAjax.hub._debugger(),l("caught error from onData callback to subscribe(): "+i.message)}return"con"===t?!0:!1},this._init()},OpenAjax.hub.IframeContainer._rpcRouter=function(){function e(){var e=r[this.f];return e?e._handleIncomingRPC.apply(e,arguments):void 0}function n(e,t){var n=r[e];n&&n._onSecurityAlert.call(n,t)}var r={};return{add:function(i,o){function a(e,t){if(".."===e)return void(r[".."]||(r[".."]=t));for(var n=e;document.getElementById(n);)n=e+"_"+(32767*Math.random()|0).toString(16);return r[n]=t,n}return OpenAjax.gadgets.rpc.register("openajax.pubsub",e),OpenAjax.gadgets.rpc.config({securityCallback:n}),t[OpenAjax.gadgets.rpc.SEC_ERROR_LOAD_TIMEOUT]=OpenAjax.hub.SecurityAlert.LoadTimeout,t[OpenAjax.gadgets.rpc.SEC_ERROR_FRAME_PHISH]=OpenAjax.hub.SecurityAlert.FramePhish,t[OpenAjax.gadgets.rpc.SEC_ERROR_FORGED_MSG]=OpenAjax.hub.SecurityAlert.ForgedMsg,this.add=a,a(i,o)},remove:function(e){delete r[e]}}}();var t={}}(),OpenAjax}),define("OpenAjax/containers/iframe/crypto",["OpenAjax/hub/hub"],function(e){return"undefined"==typeof e._smash&&(e._smash={}),e._smash.crypto={strToWA:function(e,t){for(var n=Array(),r=(1<<t)-1,i=0;i<e.length*t;i+=t)n[i>>5]|=(e.charCodeAt(i/t)&r)<<32-t-i%32;return n},hmac_sha1:function(e,t,n){for(var r=Array(16),i=Array(16),o=0;16>o;o++)r[o]=909522486^e[o],i[o]=1549556828^e[o];var a=this.sha1(r.concat(this.strToWA(t,n)),512+t.length*n);return this.sha1(i.concat(a),672)},newPRNG:function(e){function t(e){return r.hmac_sha1(o,e,8)}function n(e){for(var n=t(e),r=0;5>r;r++)a[r]^=n[r]}var r=this;("string"!=typeof e||e.length<12)&&alert("WARNING: Seed length too short ...");var o=[43417,15926,18182,33130,9585,30800,49772,40144,47678,55453,4659,38181,65340,6787,54417,65301],a=[],s=0;return n(e),{addSeed:function(e){n(e)},nextRandomOctets:function(e){for(var t=[];e>0;){s+=1;var n=r.hmac_sha1(a,s.toString(16),8);for(i=0;i<20&e>0;i++,e--)t.push((n[i>>2]>>i%4)%256)}return t},nextRandomB64Str:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",n=this.nextRandomOctets(e),r="",i=0;e>i;i++)r+=t.charAt(63&n[i]);return r}}},sha1:function(){function e(e,t,n,r){return 20>e?t&n|~t&r:40>e?t^n^r:60>e?t&n|t&r|n&r:t^n^r}function t(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}var n=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n},r=function(e,t){return e<<t|e>>>32-t};return function(i,o){i[o>>5]|=128<<24-o%32,i[(o+64>>9<<4)+15]=o;for(var a=Array(80),s=1732584193,u=-271733879,c=-1732584194,l=271733878,d=-1009589776,f=0;f<i.length;f+=16){for(var p=s,h=u,g=c,m=l,b=d,v=0;80>v;v++){a[v]=16>v?i[f+v]:r(a[v-3]^a[v-8]^a[v-14]^a[v-16],1);var y=n(n(r(p,5),e(v,h,g,m)),n(n(b,a[v]),t(v)));b=m,m=g,g=r(h,30),h=p,p=y}s=n(p,s),u=n(h,u),c=n(g,c),l=n(m,l),d=n(b,d)}return Array(s,u,c,l,d)}}()},e}),this.JSON||(JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,o,a,s=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(o=u.length,n=0;o>n;n+=1)a[n]=str(n,u)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)r=rep[n],"string"==typeof r&&(i=str(r,u),i&&a.push(quote(r)+(gap?": ":":")+i));else for(r in u)Object.hasOwnProperty.call(u,r)&&(i=str(r,u),i&&a.push(quote(r)+(gap?": ":":")+i));return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b"," ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("OpenAjax/containers/iframe/json2",function(){}),define("OpenAjax/containers/iframe/rpc/rpc-dependencies",["OpenAjax/hub/hub","OpenAjax/containers/inline/inline","OpenAjax/containers/iframe/iframe","OpenAjax/containers/iframe/crypto","OpenAjax/containers/iframe/json2"],function(e){return e.gadgets.util=function(){function e(e){var t,n=e.indexOf("?"),r=e.indexOf("#");return t=-1===r?e.substr(n+1):[e.substr(n+1,r-n-1),"&",e.substr(r+1)].join(""),t.split("&")}var t=null,n=[];return{getUrlParameters:function(n){if(null!==t&&"undefined"==typeof n)return t;for(var r={},i=e(n||document.location.href),o=window.decodeURIComponent?decodeURIComponent:unescape,a=0,s=i.length;s>a;++a){var u=i[a].indexOf("=");if(-1!==u){var c=i[a].substring(0,u),l=i[a].substring(u+1);l=l.replace(/\+/g," "),r[c]=o(l)}}return"undefined"==typeof n&&(t=r),r},registerOnLoadHandler:function(e){n.push(e)},runOnLoadHandlers:function(){for(var e=0,t=n.length;t>e;++e)n[e]()},attachBrowserEvent:function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n)},removeBrowserEvent:function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n)}}}(),e.gadgets.util.getUrlParameters(),e.gadgets.json=e.gadgets.json||{},e.gadgets.json.stringify||(e.gadgets.json={parse:function(e){try{return window.JSON.parse(e)}catch(t){return!1}},stringify:function(e){try{return window.JSON.stringify(e)}catch(t){return null}}}),e.gadgets.log=function(t){e.gadgets.log.logAtLevel(e.gadgets.log.INFO,t)},e.gadgets.warn=function(t){e.gadgets.log.logAtLevel(e.gadgets.log.WARNING,t)},e.gadgets.error=function(t){e.gadgets.log.logAtLevel(e.gadgets.log.ERROR,t)},e.gadgets.setLogLevel=function(t){e.gadgets.log.logLevelThreshold_=t},e.gadgets.log.logAtLevel=function(t,n){if(!(t<e.gadgets.log.logLevelThreshold_)&&e.gadgets.log._console){var r=e.gadgets.log._console;t==e.gadgets.log.WARNING&&r.warn?r.warn(n):t==e.gadgets.log.ERROR&&r.error?r.error(n):r.log&&r.log(n)}},e.gadgets.log.INFO=1,e.gadgets.log.WARNING=2,e.gadgets.log.ERROR=3,e.gadgets.log.NONE=4,e.gadgets.log.logLevelThreshold_=e.gadgets.log.INFO,e.gadgets.log._console=window.console?window.console:window.opera?window.opera.postError:void 0,function(){function t(){n||(n=!0,e.gadgets.util.runOnLoadHandlers(),e.gadgets.util.registerOnLoadHandler=function(e){setTimeout(e,0)},window.detachEvent&&window.detachEvent("onload",t))}if(!window.__isgadget){var n=!1;window.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):window.attachEvent&&window.attachEvent("onload",t)}}(),e}),define("OpenAjax/containers/iframe/rpc/fe.transport",["OpenAjax/hub/hub","OpenAjax/containers/inline/inline","OpenAjax/containers/iframe/iframe","OpenAjax/containers/iframe/crypto","OpenAjax/containers/iframe/json2","OpenAjax/containers/iframe/rpc/rpc-dependencies"],function(e){return e.gadgets.rpctx=e.gadgets.rpctx||{},e.gadgets.rpctx.frameElement||(e.gadgets.rpctx.frameElement=function(){function t(t,r,a){try{if(".."!==r){var s=window.frameElement;
if("function"==typeof s[i])return"function"!=typeof s[i][o]&&(s[i][o]=function(t){n(e.gadgets.json.parse(t))}),void s[i](e.gadgets.json.stringify(a))}else{var u=document.getElementById(t);if("function"==typeof u[i]&&"function"==typeof u[i][o])return void u[i][o](e.gadgets.json.stringify(a))}}catch(c){}return!0}var n,r,i="__g2c_rpc",o="__c2g_rpc";return{getCode:function(){return"fe"},isParentVerifiable:function(){return!1},init:function(e,t){return n=e,r=t,!0},setup:function(t,o){if(".."!==t)try{var a=document.getElementById(t);a[i]=function(t){n(e.gadgets.json.parse(t))}}catch(s){return!1}if(".."===t){r("..",!0);var u=function(){window.setTimeout(function(){e.gadgets.rpc.call(t,e.gadgets.rpc.ACK)},500)};e.gadgets.util.registerOnLoadHandler(u)}return!0},call:function(e,n,r){t(e,n,r)}}}()),e}),define("OpenAjax/containers/iframe/rpc/ifpc.transport",["OpenAjax/hub/hub","OpenAjax/containers/inline/inline","OpenAjax/containers/iframe/iframe","OpenAjax/containers/iframe/crypto","OpenAjax/containers/iframe/json2","OpenAjax/containers/iframe/rpc/rpc-dependencies","OpenAjax/containers/iframe/rpc/fe.transport"],function(e){return e.gadgets.rpctx=e.gadgets.rpctx||{},e.gadgets.rpctx.ifpc||(e.gadgets.rpctx.ifpc=function(){function t(t){for(var n=[],r=0,i=t.length;i>r;++r)n.push(encodeURIComponent(e.gadgets.json.stringify(t[r])));return n.join("&")}function n(e){for(var t,n=o.length-1;n>=0;--n){var r=o[n];try{if(r&&(r.recyclable||"complete"===r.readyState)){if(r.parentNode.removeChild(r),!window.ActiveXObject){r.recyclable=!1,t=r;break}o[n]=r=null,o.splice(n,1)}}catch(i){}}t||(t=document.createElement("iframe"),t.style.border=t.style.width=t.style.height="0px",t.style.visibility="hidden",t.style.position="absolute",t.onload=function(){this.recyclable=!0},o.push(t)),t.src=e,window.setTimeout(function(){document.body.appendChild(t)},0)}function r(e,t){for(var n=t-1;n>=0;--n)if("undefined"==typeof e[n])return!1;return!0}var i,o=[],a=0,s=2e3,u={};return{getCode:function(){return"ifpc"},isParentVerifiable:function(){return!0},init:function(e,t){return i=t,i("..",!0),!0},setup:function(e,t){return i(e,!0),!0},call:function(r,i,o){var u=e.gadgets.rpc.getRelayUrl(r);if(++a,!u)return void e.gadgets.warn("No relay file assigned for IFPC");var c=null,l=[];if(o.l){var d=o.a;c=[u,"#",t([i,a,1,0,t([i,o.s,"","",i].concat(d))])].join(""),l.push(c)}else{c=[u,"#",r,"&",i,"@",a,"&"].join("");for(var f,p=encodeURIComponent(e.gadgets.json.stringify(o)),h=s-c.length,g=Math.ceil(p.length/h),m=0;p.length>0;)f=p.substring(0,h),p=p.substring(h),l.push([c,g,"&",m,"&",f].join("")),m+=1}do n(l.shift());while(l.length>0);return!0},_receiveMessage:function(t,n){var i=t[1],o=parseInt(t[2],10),a=parseInt(t[3],10),s=t[t.length-1],c=1===o;o>1&&(u[i]||(u[i]=[]),u[i][a]=s,r(u[i],o)&&(s=u[i].join(""),delete u[i],c=!0)),c&&n(e.gadgets.json.parse(decodeURIComponent(s)))}}}()),e}),define("OpenAjax/containers/iframe/rpc/rmr.transport",["OpenAjax/hub/hub","OpenAjax/containers/inline/inline","OpenAjax/containers/iframe/iframe","OpenAjax/containers/iframe/crypto","OpenAjax/containers/iframe/json2","OpenAjax/containers/iframe/rpc/rpc-dependencies","OpenAjax/containers/iframe/rpc/fe.transport","OpenAjax/containers/iframe/rpc/ifpc.transport"],function(e){return e.gadgets.rpctx=e.gadgets.rpctx||{},e.gadgets.rpctx.rmr||(e.gadgets.rpctx.rmr=function(){function t(t,n,r,i){var o=function(){document.body.appendChild(t),t.src="about:blank",i&&(t.onload=function(){a(i)}),t.src=n+"#"+r};document.body?o():e.gadgets.util.registerOnLoadHandler(function(){o()})}function n(n){if("object"!=typeof f[n]){var i=document.createElement("iframe"),a=i.style;a.position="absolute",a.top="0px",a.border="0",a.opacity="0",a.width="10px",a.height="1px",i.id="rmrtransport-"+n,i.name=i.id;var s=e.gadgets.rpc.getRelayUrl(n);s||(s=e.gadgets.rpc.getOrigin(e.gadgets.util.getUrlParameters().parent)+"/robots.txt"),f[n]={frame:i,receiveWindow:null,relayUri:s,searchCounter:0,width:10,waiting:!0,queue:[],sendId:0,recvId:0},".."!==n&&t(i,s,o(n)),r(n)}}function r(t){var n=null;f[t].searchCounter++;try{var i=e.gadgets.rpc._getTargetWin(t);n=".."===t?i.frames["rmrtransport-"+e.gadgets.rpc.RPC_ID]:i.frames["rmrtransport-.."]}catch(o){}var a=!1;if(n&&(a=s(t,n)),!a){if(f[t].searchCounter>d)return;window.setTimeout(function(){r(t)},l)}}function i(t,n,r,i){var a=null;if(a=".."!==r?f[".."]:f[t]){if(n!==e.gadgets.rpc.ACK&&a.queue.push(i),a.waiting||0===a.queue.length&&(n!==e.gadgets.rpc.ACK||!i||i.ackAlone!==!0))return!0;a.queue.length>0&&(a.waiting=!0);var s=a.relayUri+"#"+o(t);try{a.frame.contentWindow.location=s;var u=10==a.width?20:10;a.frame.style.width=u+"px",a.width=u}catch(c){return!1}}return!0}function o(t){var n=f[t],r={id:n.sendId};return n&&(r.d=Array.prototype.slice.call(n.queue,0),r.d.push({s:e.gadgets.rpc.ACK,id:n.recvId})),e.gadgets.json.stringify(r)}function a(t){for(var n=f[t],r=n.receiveWindow.location.hash.substring(1),o=e.gadgets.json.parse(decodeURIComponent(r))||{},a=o.d||[],s=!1,l=!1,d=0,p=n.recvId-o.id,h=0;h<a.length;++h){var g=a[h];if(g.s!==e.gadgets.rpc.ACK)s=!0,++d<=p||(++n.recvId,u(g));else{c(t,!0),n.waiting&&(l=!0),n.waiting=!1;var m=Math.max(0,g.id-n.sendId);n.queue.splice(0,m),n.sendId=Math.max(n.sendId,g.id||0)}}if(s||l&&n.queue.length>0){var b=".."===t?e.gadgets.rpc.RPC_ID:"..";i(t,e.gadgets.rpc.ACK,b,{ackAlone:s})}}function s(e,n){function r(){a(e)}var i=f[e];try{var s=!1;if(s="document"in n,!s)return!1;if(s="object"==typeof n.document,!s)return!1;var u=n.location.href;if("about:blank"===u)return!1}catch(c){return!1}return i.receiveWindow=n,"undefined"==typeof n.attachEvent?n.onresize=r:n.attachEvent("onresize",r),".."===e?t(i.frame,i.relayUri,o(e),e):a(e),!0}var u,c,l=500,d=10,f={};return{getCode:function(){return"rmr"},isParentVerifiable:function(){return!0},init:function(e,t){return u=e,c=t,!0},setup:function(t,r){try{n(t)}catch(i){return e.gadgets.warn("Caught exception setting up RMR: "+i),!1}return!0},call:function(e,t,n){return i(e,n.s,t,n)}}}()),e}),define("OpenAjax/containers/iframe/rpc/wpm.transport",["OpenAjax/hub/hub","OpenAjax/containers/inline/inline","OpenAjax/containers/iframe/iframe","OpenAjax/containers/iframe/crypto","OpenAjax/containers/iframe/json2","OpenAjax/containers/iframe/rpc/rpc-dependencies","OpenAjax/containers/iframe/rpc/fe.transport","OpenAjax/containers/iframe/rpc/ifpc.transport","OpenAjax/containers/iframe/rpc/rmr.transport"],function(e){return e.gadgets.rpctx=e.gadgets.rpctx||{},e.gadgets.rpctx.wpm||(e.gadgets.rpctx.wpm=function(){function t(){function t(e){"postmessage.test"==e.data&&(n=!0,"undefined"==typeof e.origin&&(s=!0))}var n=!1;e.gadgets.util.attachBrowserEvent(window,"message",t,!1),window.postMessage("postmessage.test","*"),n&&(a=!0),e.gadgets.util.removeBrowserEvent(window,"message",t,!1)}function n(t){var n=e.gadgets.json.parse(t.data);if(n&&n.f){var i=e.gadgets.rpc.getRelayUrl(n.f)||e.gadgets.util.getUrlParameters().parent,o=e.gadgets.rpc.getOrigin(i);(s?t.domain===/^.+:\/\/([^:]+).*/.exec(o)[1]:t.origin===o)&&r(n)}}var r,i,o,a=!1,s=!1;return{getCode:function(){return"wpm"},isParentVerifiable:function(){return!0},init:function(s,u){return r=s,i=u,t(),o=a?function(e,t,n){window.setTimeout(function(){e.postMessage(t,n)},0)}:function(e,t,n){e.postMessage(t,n)},e.gadgets.util.attachBrowserEvent(window,"message",n,!1),i("..",!0),!0},setup:function(t,n,r){return".."===t&&(r?e.gadgets.rpc._createRelayIframe(n):e.gadgets.rpc.call(t,e.gadgets.rpc.ACK)),!0},call:function(t,n,r){var i=e.gadgets.rpc._getTargetWin(t),a=e.gadgets.rpc.getRelayUrl(t)||e.gadgets.util.getUrlParameters().parent,s=e.gadgets.rpc.getOrigin(a);return s?o(i,e.gadgets.json.stringify(r),s):e.gadgets.error("No relay set (used as window.postMessage targetOrigin), cannot send cross-domain message"),!0},relayOnload:function(e,t){i(e,!0)}}}()),e}),define("OpenAjax/containers/iframe/rpc/rpc",["OpenAjax/hub/hub","OpenAjax/containers/inline/inline","OpenAjax/containers/iframe/iframe","OpenAjax/containers/iframe/crypto","OpenAjax/containers/iframe/json2","OpenAjax/containers/iframe/rpc/rpc-dependencies","OpenAjax/containers/iframe/rpc/fe.transport","OpenAjax/containers/iframe/rpc/ifpc.transport","OpenAjax/containers/iframe/rpc/rmr.transport","OpenAjax/containers/iframe/rpc/wpm.transport"],function(e){return e.gadgets.rpc||(e.gadgets.rpc=function(){function t(){return"function"==typeof window.postMessage?e.gadgets.rpctx.wpm:"object"==typeof window.postMessage?e.gadgets.rpctx.wpm:navigator.userAgent.indexOf("WebKit")>0?e.gadgets.rpctx.rmr:"Gecko"===navigator.product?e.gadgets.rpctx.frameElement:e.gadgets.rpctx.ifpc}function n(e,t){var n=H;t||(n=F),I[e]=n;for(var r=T[e]||[],i=0;i<r.length;++i){var o=r[i];o.t=d(e),n.call(e,o.f,o)}T[e]=[]}function r(){function t(){V=!0}q||(e.gadgets.util.attachBrowserEvent(window,"unload",t,!1),q=!0)}function i(t,n,i,o,a){O[n]&&O[n]===i||(e.gadgets.error("Invalid auth token. "+O[n]+" vs "+i),L(n,D)),a.onunload=function(){N[n]&&!V&&(L(n,U),e.gadgets.rpc.removeReceiver(n))},r(),o=e.gadgets.json.parse(decodeURIComponent(o)),H.relayOnload(n,o)}function o(t){if(t&&"string"==typeof t.s&&"string"==typeof t.f&&t.a instanceof Array){if(O[t.f]&&O[t.f]!==t.t&&(e.gadgets.error("Invalid auth token. "+O[t.f]+" vs "+t.t),L(t.f,D)),t.s===y)return void window.setTimeout(function(){n(t.f,!0)},0);t.c&&(t.callback=function(n){e.gadgets.rpc.call(t.f,b,null,t.c,n)});var r=(w[t.s]||w[v]).apply(t,t.a);t.c&&"undefined"!=typeof r&&e.gadgets.rpc.call(t.f,b,null,t.c,r)}}function a(e){if(!e)return"";e=e.toLowerCase(),0==e.indexOf("//")&&(e=window.location.protocol+e),-1==e.indexOf("://")&&(e=window.location.protocol+"//"+e);var t=e.substring(e.indexOf("://")+3),n=t.indexOf("/");-1!=n&&(t=t.substring(0,n));var r=e.substring(0,e.indexOf("://")),i="",o=t.indexOf(":");if(-1!=o){var a=t.substring(o+1);t=t.substring(0,o),("http"===r&&"80"!==a||"https"===r&&"443"!==a)&&(i=":"+a)}return r+"://"+t+i}function s(e){if("undefined"==typeof e||".."===e)return window.parent;e=String(e);var t=window.frames[e];return t?t:(t=document.getElementById(e),t&&t.contentWindow?t.contentWindow:null)}function u(e,t,n){if(N[e]!==!0){"undefined"==typeof N[e]&&(N[e]=0);var r=document.getElementById(e);return".."!==e&&null==r||H.setup(e,t,n)!==!0?void(N[e]!==!0&&N[e]++<x?window.setTimeout(function(){u(e,t,n)},_):(I[e]=F,N[e]=!0)):void(N[e]=!0)}}function c(t,n){if("undefined"==typeof R[t]){R[t]=!1;var r=e.gadgets.rpc.getRelayUrl(t);if(a(r)!==a(window.location.href))return!1;var i=s(t);try{R[t]=i.OpenAjax.gadgets.rpc.receiveSameDomain}catch(o){e.gadgets.error("Same domain call failed: parent= incorrectly set.")}}return"function"==typeof R[t]?(R[t](n),!0):!1}function l(e,t,n){/http(s)?:\/\/.+/.test(t)||(0==t.indexOf("//")?t=window.location.protocol+t:"/"==t.charAt(0)?t=window.location.protocol+"//"+window.location.host+t:-1==t.indexOf("://")&&(t=window.location.protocol+"//"+t)),C[e]=t,A[e]=!!n}function d(e){return O[e]}function f(e,t,n){t=t||"",O[e]=String(t),u(e,t,n)}function p(t,r){function i(i){var s=i?i.rpc:{},u=s.parentRelayUrl;if("http://"!==u.substring(0,7)&&"https://"!==u.substring(0,8)&&"//"!==u.substring(0,2)&&"string"==typeof S.parent&&""!==S.parent)if("/"!==u.substring(0,1)){var c=S.parent.lastIndexOf("/");u=S.parent.substring(0,c+1)+u}else u=a(S.parent)+u;var d=!!s.useLegacyProtocol;l("..",u,d),d&&(H=e.gadgets.rpctx.ifpc,H.init(o,n));var p=r||S.forcesecure||!1;f("..",t,p)}var s={parentRelayUrl:e.gadgets.config.NonEmptyStringValidator};e.gadgets.config.register("rpc",s,i)}function h(e,t,n){var r=n||S.forcesecure||!1,i=t||S.parent;i&&(l("..",i),f("..",e,r))}function g(t,n,r,i){if(e.gadgets.util){var o=document.getElementById(t);if(!o)throw new Error("Cannot set up gadgets.rpc receiver with ID: "+t+", element not found.");var a=n||o.src;l(t,a);var s=e.gadgets.util.getUrlParameters(o.src),u=r||s.rpctoken,c=i||s.forcesecure;f(t,u,c)}}function m(e,t,n,r){if(".."===e){var i=n||S.rpctoken||S.ifpctok||"";window.__isgadget===!0?p(i,r):h(i,t,r)}else g(e,t,n,r)}var b="__cb",v="",y="__ack",_=500,x=10,w={},C={},A={},O={},E=0,j={},N={},R={},S={},I={},T={},k=window.top!==window.self,P=window.name,L=function(){},M=0,U=1,D=2,F=function(){function t(t){return function(){e.gadgets.log("gadgets.rpc."+t+"("+e.gadgets.json.stringify(Array.prototype.slice.call(arguments))+"): call ignored. [caller: "+document.location+", isChild: "+k+"]")}}return{getCode:function(){return"noop"},isParentVerifiable:function(){return!0},init:t("init"),setup:t("setup"),call:t("call")}}();e.gadgets.util&&(S=e.gadgets.util.getUrlParameters());var V=!1,q=!1,H=t();return w[v]=function(){e.gadgets.warn("Unknown RPC service: "+this.s)},w[b]=function(e,t){var n=j[e];n&&(delete j[e],n(t))},{config:function(e){"function"==typeof e.securityCallback&&(L=e.securityCallback)},register:function(e,t){if(e===b||e===y)throw new Error("Cannot overwrite callback/ack service");if(e===v)throw new Error("Cannot overwrite default service: use registerDefault");w[e]=t},unregister:function(e){if(e===b||e===y)throw new Error("Cannot delete callback/ack service");if(e===v)throw new Error("Cannot delete default service: use unregisterDefault");delete w[e]},registerDefault:function(e){w[v]=e},unregisterDefault:function(){delete w[v]},forceParentVerifiable:function(){H.isParentVerifiable()||(H=e.gadgets.rpctx.ifpc)},call:function(t,n,r,i){t=t||"..";var o="..";".."===t&&(o=P),++E,r&&(j[E]=r);var a={s:n,f:o,c:r?E:0,a:Array.prototype.slice.call(arguments,3),t:O[t],l:A[t]};if(".."!==t&&!document.getElementById(t))return void e.gadgets.log("WARNING: attempted send to nonexistent frame: "+t);if(!c(t,a)){var s=I[t];if(!s)return void(T[t]?T[t].push(a):T[t]=[a]);A[t]&&(s=e.gadgets.rpctx.ifpc),s.call(t,o,a)===!1&&(I[t]=F,H.call(t,o,a))}},getRelayUrl:function(e){var t=C[e];return t&&"/"===t.substring(0,1)&&(t="/"===t.substring(1,2)?document.location.protocol+t:document.location.protocol+"//"+document.location.host+t),t},setRelayUrl:l,setAuthToken:f,setupReceiver:m,getAuthToken:d,removeReceiver:function(e){delete C[e],delete A[e],delete O[e],delete N[e],delete R[e],delete I[e]},getRelayChannel:function(){return H.getCode()},receive:function(e,t){e.length>4?H._receiveMessage(e,o):i.apply(null,e.concat(t))},receiveSameDomain:function(e){e.a=Array.prototype.slice.call(e.a),window.setTimeout(function(){o(e)},0)},getOrigin:a,getReceiverOrigin:function(t){var n=I[t];if(!n)return null;if(!n.isParentVerifiable(t))return null;var r=e.gadgets.rpc.getRelayUrl(t)||e.gadgets.util.getUrlParameters().parent;return e.gadgets.rpc.getOrigin(r)},init:function(){H.init(o,n)===!1&&(H=F),k&&m("..")},_getTargetWin:s,_createRelayIframe:function(t,n){function r(){document.body.appendChild(a),a.src='javascript:"<html></html>"',a.src=o}var i=e.gadgets.rpc.getRelayUrl("..");if(i){var o=i+"#..&"+P+"&"+t+"&"+encodeURIComponent(e.gadgets.json.stringify(n)),a=document.createElement("iframe");return a.style.border=a.style.width=a.style.height="0px",a.style.visibility="hidden",a.style.position="absolute",document.body?r():e.gadgets.util.registerOnLoadHandler(function(){r()}),a}},ACK:y,RPC_ID:P,SEC_ERROR_LOAD_TIMEOUT:M,SEC_ERROR_FRAME_PHISH:U,SEC_ERROR_FORGED_MSG:D}}(),e.gadgets.rpc.init()),e}),define("OpenAjax",["OpenAjax/hub/hub","OpenAjax/containers/inline/inline","OpenAjax/containers/iframe/iframe","OpenAjax/containers/iframe/crypto","OpenAjax/containers/iframe/json2","OpenAjax/containers/iframe/rpc/rpc-dependencies","OpenAjax/containers/iframe/rpc/fe.transport","OpenAjax/containers/iframe/rpc/ifpc.transport","OpenAjax/containers/iframe/rpc/rmr.transport","OpenAjax/containers/iframe/rpc/wpm.transport","OpenAjax/containers/iframe/rpc/rpc"],function(e){return e}),define("scripts/core/open-ajax/open-ajax",["OpenAjax"],function(e){return e}),define("scripts/core/hub/hub",["scripts/core/open-ajax/open-ajax"],function(){var e=function(){function e(){var e="anyware",t=function(t){return e+"."+t},n=function(){return!0},r=function(){},i=new OpenAjax.hub.ManagedHub({onPublish:n,onSubscribe:n,onUnsubscribe:n,onSecurityAlert:r});return{subscribe:function(e,n){return i.subscribe(t(e),n)},unsubscribe:function(e){return i.unsubscribe(e)},publish:function(e,n){return i.publish(t(e),n)},getMessageHub:function(){return i},removeContainer:function(e){return i.removeContainer(e)}}}var t;return{getInstance:function(){return t||(t=e()),window.Adobe=window.Adobe||{},window.Adobe.Anyware=window.Adobe.Anyware||{},window.Adobe.Anyware.Hub=t,t}}}();return e}),define("scripts/core/container/container",["jquery","scripts/core/hub/hub"],function(e,t){var n=function(e,t,n,r,i,o){this.init(e,t,n,r,i,o)};return n.prototype={hub:t.getInstance(),container:null,init:function(t,n,r,i,o,a){var s;this.checkRequiredParams(t,n,r),s={"class":"anyware-iframe",style:{border:"none",width:"100%",height:"100%",overflow:"hidden",scroll:"no"},allowTransparency:!0,frameborder:0},e.extend(!0,s,o),this.componentName=t,this.componentId=this.createComponentId(t),this.element=n,this.clientUrl=r,this.tunnelUrl=this.getTunnelUrl(i),this.iframeAttrs=s,this.timeout=a||15e3},checkRequiredParams:function(e,t,n){if(!e||!t||!n)throw new Error("Expect element, clientUrl and handlers to be passed to constructor.")},loadComponent:function(t){var n=this.hub.getMessageHub(),r=this;this.container=new OpenAjax.hub.IframeContainer(n,this.componentId,{Container:{onSecurityAlert:function(t,n){t===r.container&&e(r.element).trigger("errorEvent",{errorType:r.getSecurityErrorType(n),errors:n})},onConnect:function(){r.readyHandler=r.setUpReadyHandler(t)},onDisconnect:function(){}},IframeContainer:{parent:this.element,iframeAttrs:this.iframeAttrs,uri:this.clientUrl,tunnelURI:this.tunnelUrl,timeout:this.timeout}})},unloadComponent:function(){this.hub.removeContainer(this.container),this.container=null},isConnected:function(){var e=!1;return this.container&&(e=this.container.isConnected()),e},subscribe:function(e,t){return this.hub.subscribe(this.getTopic(e),t)},unsubscribe:function(e){this.hub.unsubscribe(e)},publish:function(e,t){this.hub.publish(this.getTopic(e),t)},getComponentId:function(){return this.container.getClientID()},getComponentName:function(){return this.componentName},createComponentId:function(e){var t=Math.floor(1e4*Math.random());return e+"."+t},getSecurityErrorType:function(e){switch(e){case OpenAjax.hub.SecurityAlert.LoadTimeout:e="APPLICATION_LOAD_FAILURE";break;default:e="CROSS_DOMAIN_SECURITY_ERROR"}return e},setUpReadyHandler:function(e){var t=this;return this.subscribe("applicationReady",function(n){e.apply(),t.removeReadyHandler()})},removeReadyHandler:function(){this.readyHandler&&(this.unsubscribe(this.readyHandler),this.readyHandler=null)},getTopic:function(e){return this.componentId+"."+e},getTunnelUrl:function(e){var t,n,r="rpc_relay.html",i=location.host,o=location.protocol;return e?t=e:(n=window.location.pathname,t=n.substring(0,n.lastIndexOf("/")+1)+r),o+"//"+i+t}},n}),define("scripts/components/common/models/configuration-model",["jquery","can","can-proxy","scripts/components/common/util/lang"],function(e,t){var n=t.Model.extend({domains:{dev:"store1.dev04.adobe.com","pre-stage":"store1.qa04.adobe.com",stage:"store1.stage.adobe.com",prod:"store1.adobe.com"},requiredAttrs:["appId","clientId","countryCode","marketSegment"],MISSING_REQUIRED_ATTRIBUTES:"Missing required attributes: ",CONFIGURATION_ERROR:"CONFIGURATION_ERROR",CLIENT_URL_UNAVAILABLE:"CLIENT_URL_UNAVAILABLE"},{init:function(){for(var e,t=this.constructor.requiredAttrs,n=0;n<t.length;n++)if(e=t[n],!this.attr(e))throw new Error(this.constructor.MISSING_REQUIRED_ATTRIBUTES+e)},load:function(t,n,r){var i=this.attr();return this.callbackScope=t,this.successCallback=n,this.errorCallback=r,e.ajax({url:this.getRequestUrl(i),dataType:"jsonp",jsonpCallback:this.getCallbackName(i),success:this.proxy("handleLoadSuccess"),error:this.proxy("handleLoadError")})},handleLoadSuccess:function(e){if(this.isClientUrlAvailable(e)){var t=this.updateData(e);this.doSuccessCallback(t)}else{var n={errorType:this.constructor.CLIENT_URL_UNAVAILABLE};this.doErrorCallback(n)}},handleLoadError:function(e){var t={errorType:this.constructor.CONFIGURATION_ERROR};this.doErrorCallback(t)},doSuccessCallback:function(e){this.successCallback.call(this.callbackScope,e)},doErrorCallback:function(e){this.errorCallback.call(this.callbackScope,e)},isClientUrlAvailable:function(e){return this.isMarketSegmentSupported(e)&&!this.is404Response(e)},isMarketSegmentSupported:function(t){var n=!0;return e.isValue(t.supportedMarketSegments)&&(n=t.supportedMarketSegments.indexOf(this.attr("marketSegment"))>-1),n},is404Response:function(t){var n=!1;return e.isValue(t.errorCode)&&(n=404===t.errorCode),n},updateData:function(e){if(e.appPath){var t=this.attr(),n=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),r=t.isLocal?n:e.baseUrl[this.attr("landscape")],i=t.isLocal?e.appPath.replace("/anyware/latest/","/app/"):e.appPath;t.debug&&(i+=i.indexOf("?")>0?"&compress=false":"?compress=false"),e.appUrl=r+i}return this.attr(e)},getRequestUrl:function(){var e=this.attr(),t=this.getBaseUrl(),n=e.isLocal?"/app":"/anyware/latest",r=n+"/resources/config/";return t+r+e.appId+"/"+e.clientId+"/"+e.countryCode.toUpperCase()+"/config.json"},getBaseUrl:function(){var t=this.attr(),n=document.location.protocol,r="";return e.isValue(t.landscape)&&!t.isLocal&&(r=n+"//"+this.getConfigDomain(t.landscape)),r},getConfigDomain:function(e){var t=this.constructor.domains;return t[e]||t.prod},getCallbackName:function(e){return e.appId+"Config"},getConfigBaseUrl:function(e){var t=this.attr().baseUrl[e];return t}});return n}),define("scripts/components/common/util/options-validator-util",["jquery","can","scripts/components/common/util/lang"],function(e,t){var n=t.Construct.extend({validateOptions:function(e,t){if(t.validationRules){var n,r,i=t.validationRules;for(r in i)n=i[r],e[r]=this.processValidationRule(n,r,e)}return e},processValidationRule:function(e,t,n){var r=n[t],i=new RegExp(e.pattern,e.flags),o=r;return i.test(r)||(o=this.getDefaultValue(e,n)),o},getDefaultValue:function(e,t){var n;return e.defaultValue&&(n=this.getDepthValue(0,e.defaultValue,e,t)),n},getDepthValue:function(e,t,n,r){var i,o,a=n.defaultValueDepth||0;return a===e?t:(i=this.getOptionName(t),o=this.getNextDepthValue(t[i],i,r),this.getDepthValue(++e,o,n,r))},getOptionName:function(e){var t;for(var n in e)t=n;return t},getNextDepthValue:function(e,t,n){var r=n[t];return e[r]||e.fallbackValue}},{});return n}),function(){var e=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(n){function r(){!e&&this.init&&this.init.apply(this,arguments)}var i=this.prototype;e=!0;var o=new this;e=!1;for(var a in n)o[a]="function"==typeof n[a]&&"function"==typeof i[a]&&t.test(n[a])?function(e,t){return function(){var n=this._super;this._super=i[e];var r=t.apply(this,arguments);return this._super=n,r}}(a,n[a]):n[a];return r.prototype=o,r.constructor=r,r.extend=arguments.callee,r}}(),define("lib/jquery-encoder/libs/Class.create",function(){}),function(e){var t={attr:[",",".","-","_"],css:["(",",","'",'"',")"," "],js:[",",".","_"," "]},n={attr:[],css:["behavior","-moz-behavior","-ms-behavior"]};e.encoder={encodeForHTML:function(t){var n=document.createElement("div");return e(n).text(t),e(n).html()},encodeForHTMLAttribute:function(n,r){r||(r=t.attr);for(var i="",o=0;o<n.length;o++){var a=n.charAt(o),s=n.charCodeAt(o);if(!a.match(/[a-zA-Z0-9]/)&&e.inArray(a,r)<0){var u=s.toString(16);i+="&#x"+u+";"}else i+=a}return i},encodeForCSS:function(n,r){r||(r=t.css);for(var i="",o=0;o<n.length;o++){var a=n.charAt(o),s=n.charCodeAt(o);if(!a.match(/[a-zA-Z0-9]/)&&e.inArray(a,r)<0){var u=s.toString(16);i+="\\"+u+" "}else i+=a}return i},encodeForURL:function(e){return encodeURIComponent(e)},encodeForJavascript:function(n,i){i||(i=t.js);for(var o="",a=0;a<n.length;a++){var s=n.charAt(a),u=n.charCodeAt(a);if(e.inArray(s,i)>=0||null==r[u])o+=s;else{var c,l=u.toString(16);256>u?(c="00".substr(l.length),o+="\\x"+c+l.toUpperCase()):(c="0000".substr(l.length),o+="\\u"+c+l.toUpperCase())}}return o},canonicalize:function(e,t){if(null===e)return null;for(var n=e,r=e,i=0,o=0,a=[new u,new c,new l];;){r=n;for(var s=0;s<a.length;s++){var d=a[s].decode(n);d!=n&&(i++,n=d)}if(r==n)break;o++}if(t&&i>1)throw"Attack Detected - Multiple/Double Encodings used in input";return n}};for(var r=[],i=0;255>i;i++)i>=48&&57>=i||i>=65&&90>=i||i>=97&&122>=i?r[i]=null:r[i]=i.toString(16);var o={html:function(t){return e.encoder.encodeForHTML(t.unsafe)},css:function(t){var r=[],i=[];t.map?r=t.map:r[t.name]=t.unsafe;for(var o in r)if("function"!=typeof r[o]&&r.hasOwnProperty(o)){var a=e.encoder.canonicalize(o,t.strict);e.inArray(a,n[t.context])<0&&(i[o]=e.encoder.encodeForCSS(r[o]))}return i},attr:function(t){var r=[],i=[];t.map?r=t.map:r[t.name]=t.unsafe;for(var o in r)if("function"!=typeof r[o]&&r.hasOwnProperty(o)){var a=e.encoder.canonicalize(o,t.strict);e.inArray(a,n[t.context])<0&&(i[o]=e.encoder.encodeForHTMLAttribute(r[o]))}return i}};e.fn.encode=function(){var t=arguments.length,n={context:"html",unsafe:null,name:null,map:null,setter:null,strict:!0};return 1==t&&"object"==typeof arguments[0]?e.extend(n,arguments[0]):(n.context=arguments[0],2==arguments.length?"html"==n.context?n.unsafe=arguments[1]:("attr"==n.content||"css"==n.content)&&(n.map=arguments[1]):(n.name=arguments[1],n.unsafe=arguments[2])),"html"==n.context?n.setter=this.html:"css"==n.context?n.setter=this.css:"attr"==n.context&&(n.setter=this.attr),n.setter.call(this,o[n.context].call(this,n))};var a=Class.extend({_input:null,_pushback:null,_temp:null,_index:0,_mark:0,_hasNext:function(){return null==this._input?!1:0==this._input.length?!1:this._index<this._input.length},init:function(e){this._input=e},pushback:function(e){this._pushback=e},index:function(){return this._index},hasNext:function(){return null!=this._pushback?!0:this._hasNext()},next:function(){if(null!=this._pushback){var e=this._pushback;return this._pushback=null,e}return this._hasNext()?this._input.charAt(this._index++):null},nextHex:function(){var e=this.next();return null==e?null:e.match(/[0-9A-Fa-f]/)?e:null},peek:function(e){return e?this._pushback&&this._pushback==e?!0:this._hasNext()?this._input.charAt(this._index)==e:!1:this._pushback?this._pushback:this._hasNext()?this._input.charAt(this._index):null},mark:function(){this._temp=this._pushback,this._mark=this._index},reset:function(){this._pushback=this._temp,this._index=this._mark},remainder:function(){var e=this._input.substr(this._index);return null!=this._pushback&&(e=this._pushback+e),e}}),s=Class.extend({decode:function(e){for(var t="",n=new a(e);n.hasNext();){var r=this.decodeCharacter(n);t+=null!=r?r:n.next()}return t},decodeCharacter:function(e){return e.next()}}),u=s.extend({decodeCharacter:function(e){e.mark();var t=e.next();if(null==t||"&"!=t)return e.reset(),null;var n=e.next();if(null==n)return e.reset(),null;var r;if("#"==n){if(r=this._getNumericEntity(e),null!=r)return r}else if(n.match(/[A-Za-z]/)&&(e.pushback(n),r=this._getNamedEntity(e),null!=r))return r;return e.reset(),null},_getNamedEntity:function(e){var t,n,r="";n=Math.min(e.remainder().length,m.getMaxKeyLength());for(var i=0;n>i;i++)r+=e.next().toLowerCase();if(t=m.getLongestMatch(r),null==t)return null;e.reset(),e.next(),n=t.getKey().length;for(var o=0;n>o;o++)e.next();return e.peek(";")&&e.next(),t.getValue()},_getNumericEntity:function(e){var t=e.peek();return null==t?null:"x"==t||"X"==t?(e.next(),this._parseHex(e)):this._parseNumber(e)},_parseHex:function(e){for(var t="";e.hasNext();){var n=e.peek();if(isNaN(parseInt(n,16))){if(";"==n){e.next();break}break}t+=n,e.next()}var r=parseInt(t,16);return!isNaN(r)&&f(r)?String.fromCharCode(r):null},_parseNumber:function(e){for(var t="";e.hasNext();){var n=e.peek();if(isNaN(parseInt(n,10))){if(";"==n){e.next();break}break}t+=n,e.next()}var r=parseInt(t,10);return!isNaN(r)&&f(r)?String.fromCharCode(r):null}}),c=s.extend({decodeCharacter:function(e){e.mark();var t=e.next();if(null==t)return e.reset(),null;if("%"!=t)return e.reset(),null;for(var n="",r=0;2>r;r++){var i=e.nextHex();null!=i&&(n+=i)}if(2==n.length){var o=parseInt(n,16);if(f(o))return String.fromCharCode(o)}return e.reset(),null}}),l=s.extend({decodeCharacter:function(e){e.mark();var t=e.next();if(null==t||"\\"!=t)return e.reset(),null;var n=e.next();if(null==n)return e.reset(),null;switch(n){case"\r":e.peek("\n")&&e.next();case"\n":case"\f":case"\x00":return this.decodeCharacter(e)}if("NaN"==parseInt(n,16))return n;for(var r=n,i=0;5>i;i++){var o=e.next();if(null==o||p(o))break;if("NaN"==parseInt(o,16)){e.pushback(o);break}r+=o}var a=parseInt(r,16);return f(a)?String.fromCharCode(a):""}}),d=Class.extend({root:null,maxKeyLen:0,size:0,init:function(){this.clear()},getLongestMatch:function(e){return null==this.root&&null==e?null:this.root.getLongestMatch(e,0)},getMaxKeyLength:function(){return this.maxKeyLen},clear:function(){this.root=null,this.maxKeyLen=0,this.size=0},put:function(e,t){var n,r;return null==this.root&&(this.root=new d.Node),null!=(r=this.root.put(e,0,t))?r:((n=e.length)>this.maxKeyLen&&(this.maxKeyLen=e.length),this.size++,null)}});d.Entry=Class.extend({_key:null,_value:null,init:function(e,t){this._key=e,this._value=t},getKey:function(){return this._key},getValue:function(){return this._value},equals:function(e){return e instanceof d.Entry?this._key==e._key&&this._value==e._value:!1}}),d.Node=Class.extend({_value:null,_nextMap:null,setValue:function(e){this._value=e},getNextNode:function(e){return this._nextMap?this._nextMap[e]:null},put:function(e,t,n){var r,i,o;return e.length==t?(o=this._value,this.setValue(n),o):(i=e.charAt(t),null==this._nextMap?(this._nextMap=d.Node.newNodeMap(),r=new d.Node,this._nextMap[i]=r):null==(r=this._nextMap[i])&&(r=new d.Node,this._nextMap[i]=r),r.put(e,t+1,n))},get:function(e,t){var n;return e.length<=t?this._value:null==(n=this.getNextNode(e.charAt(t)))?null:n.get(e,t+1)},getLongestMatch:function(e,t){var n,r;return e.length<=t?d.Entry.newInstanceIfNeeded(e,this._value):null==(n=this.getNextNode(e.charAt(t)))?d.Entry.newInstanceIfNeeded(e,t,this._value):null!=(r=n.getLongestMatch(e,t+1))?r:d.Entry.newInstanceIfNeeded(e,t,this._value)}}),d.Entry.newInstanceIfNeeded=function(){var e,t,n=arguments[0];return"string"==typeof arguments[1]?(e=arguments[1],t=n.length):(t=arguments[1],e=arguments[2]),null==e||null==n?null:(n.length>t&&(n=n.substr(0,t)),new d.Entry(n,e))},d.Node.newNodeMap=function(){return{}};var f=function(e){return e>=0&&1114111>=e},p=function(e){return e.match(/[\s]/)},h=[],g=[],m=new d;!function(){h["&quot"]="34",h["&amp"]="38",h["&lt"]="60",h["&gt"]="62",h["&nbsp"]="160",h["&iexcl"]="161",h["&cent"]="162",h["&pound"]="163",h["&curren"]="164",h["&yen"]="165",h["&brvbar"]="166",h["&sect"]="167",h["&uml"]="168",h["&copy"]="169",h["&ordf"]="170",h["&laquo"]="171",h["&not"]="172",h["&shy"]="173",h["&reg"]="174",h["&macr"]="175",h["&deg"]="176",h["&plusmn"]="177",h["&sup2"]="178",h["&sup3"]="179",h["&acute"]="180",h["&micro"]="181",h["&para"]="182",h["&middot"]="183",h["&cedil"]="184",h["&sup1"]="185",h["&ordm"]="186",h["&raquo"]="187",h["&frac14"]="188",h["&frac12"]="189",h["&frac34"]="190",h["&iquest"]="191",h["&Agrave"]="192",h["&Aacute"]="193",h["&Acirc"]="194",h["&Atilde"]="195",h["&Auml"]="196",h["&Aring"]="197",h["&AElig"]="198",h["&Ccedil"]="199",h["&Egrave"]="200",h["&Eacute"]="201",h["&Ecirc"]="202",h["&Euml"]="203",h["&Igrave"]="204",h["&Iacute"]="205",h["&Icirc"]="206",h["&Iuml"]="207",h["&ETH"]="208",h["&Ntilde"]="209",h["&Ograve"]="210",h["&Oacute"]="211",h["&Ocirc"]="212",h["&Otilde"]="213",h["&Ouml"]="214",h["&times"]="215",h["&Oslash"]="216",h["&Ugrave"]="217",h["&Uacute"]="218",h["&Ucirc"]="219",h["&Uuml"]="220",h["&Yacute"]="221",h["&THORN"]="222",h["&szlig"]="223",h["&agrave"]="224",h["&aacute"]="225",h["&acirc"]="226",h["&atilde"]="227",h["&auml"]="228",h["&aring"]="229",
h["&aelig"]="230",h["&ccedil"]="231",h["&egrave"]="232",h["&eacute"]="233",h["&ecirc"]="234",h["&euml"]="235",h["&igrave"]="236",h["&iacute"]="237",h["&icirc"]="238",h["&iuml"]="239",h["&eth"]="240",h["&ntilde"]="241",h["&ograve"]="242",h["&oacute"]="243",h["&ocirc"]="244",h["&otilde"]="245",h["&ouml"]="246",h["&divide"]="247",h["&oslash"]="248",h["&ugrave"]="249",h["&uacute"]="250",h["&ucirc"]="251",h["&uuml"]="252",h["&yacute"]="253",h["&thorn"]="254",h["&yuml"]="255",h["&OElig"]="338",h["&oelig"]="339",h["&Scaron"]="352",h["&scaron"]="353",h["&Yuml"]="376",h["&fnof"]="402",h["&circ"]="710",h["&tilde"]="732",h["&Alpha"]="913",h["&Beta"]="914",h["&Gamma"]="915",h["&Delta"]="916",h["&Epsilon"]="917",h["&Zeta"]="918",h["&Eta"]="919",h["&Theta"]="920",h["&Iota"]="921",h["&Kappa"]="922",h["&Lambda"]="923",h["&Mu"]="924",h["&Nu"]="925",h["&Xi"]="926",h["&Omicron"]="927",h["&Pi"]="928",h["&Rho"]="929",h["&Sigma"]="931",h["&Tau"]="932",h["&Upsilon"]="933",h["&Phi"]="934",h["&Chi"]="935",h["&Psi"]="936",h["&Omega"]="937",h["&alpha"]="945",h["&beta"]="946",h["&gamma"]="947",h["&delta"]="948",h["&epsilon"]="949",h["&zeta"]="950",h["&eta"]="951",h["&theta"]="952",h["&iota"]="953",h["&kappa"]="954",h["&lambda"]="955",h["&mu"]="956",h["&nu"]="957",h["&xi"]="958",h["&omicron"]="959",h["&pi"]="960",h["&rho"]="961",h["&sigmaf"]="962",h["&sigma"]="963",h["&tau"]="964",h["&upsilon"]="965",h["&phi"]="966",h["&chi"]="967",h["&psi"]="968",h["&omega"]="969",h["&thetasym"]="977",h["&upsih"]="978",h["&piv"]="982",h["&ensp"]="8194",h["&emsp"]="8195",h["&thinsp"]="8201",h["&zwnj"]="8204",h["&zwj"]="8205",h["&lrm"]="8206",h["&rlm"]="8207",h["&ndash"]="8211",h["&mdash"]="8212",h["&lsquo"]="8216",h["&rsquo"]="8217",h["&sbquo"]="8218",h["&ldquo"]="8220",h["&rdquo"]="8221",h["&bdquo"]="8222",h["&dagger"]="8224",h["&Dagger"]="8225",h["&bull"]="8226",h["&hellip"]="8230",h["&permil"]="8240",h["&prime"]="8242",h["&Prime"]="8243",h["&lsaquo"]="8249",h["&rsaquo"]="8250",h["&oline"]="8254",h["&frasl"]="8260",h["&euro"]="8364",h["&image"]="8365",h["&weierp"]="8472",h["&real"]="8476",h["&trade"]="8482",h["&alefsym"]="8501",h["&larr"]="8592",h["&uarr"]="8593",h["&rarr"]="8594",h["&darr"]="8595",h["&harr"]="8596",h["&crarr"]="8629",h["&lArr"]="8656",h["&uArr"]="8657",h["&rArr"]="8658",h["&dArr"]="8659",h["&hArr"]="8660",h["&forall"]="8704",h["&part"]="8706",h["&exist"]="8707",h["&empty"]="8709",h["&nabla"]="8711",h["&isin"]="8712",h["&notin"]="8713",h["&ni"]="8715",h["&prod"]="8719",h["&sum"]="8721",h["&minus"]="8722",h["&lowast"]="8727",h["&radic"]="8730",h["&prop"]="8733",h["&infin"]="8734",h["&ang"]="8736",h["&and"]="8743",h["&or"]="8744",h["&cap"]="8745",h["&cup"]="8746",h["&int"]="8747",h["&there4"]="8756",h["&sim"]="8764",h["&cong"]="8773",h["&asymp"]="8776",h["&ne"]="8800",h["&equiv"]="8801",h["&le"]="8804",h["&ge"]="8805",h["&sub"]="8834",h["&sup"]="8835",h["&nsub"]="8836",h["&sube"]="8838",h["&supe"]="8839",h["&oplus"]="8853",h["&otimes"]="8855",h["&perp"]="8869",h["&sdot"]="8901",h["&lceil"]="8968",h["&rceil"]="8969",h["&lfloor"]="8970",h["&rfloor"]="8971",h["&lang"]="9001",h["&rang"]="9002",h["&loz"]="9674",h["&spades"]="9824",h["&clubs"]="9827",h["&hearts"]="9829",h["&diams"]="9830";for(var e in h)"function"!=typeof h[e]&&h.hasOwnProperty(e)&&(g[h[e]]=e);for(var t in g)if("function"!=typeof g[t]&&g.hasOwnProperty(t)){var n=g[t].toLowerCase().substr(1);m.put(n,String.fromCharCode(t))}}(),Object.freeze?(e.encoder=Object.freeze(e.encoder),e.fn.encode=Object.freeze(e.fn.encode)):Object.seal?(e.encoder=Object.seal(e.encoder),e.fn.encode=Object.seal(e.fn.encode)):Object.preventExtensions&&(e.encoder=Object.preventExtensions(e.encoder),e.fn.encode=Object.preventExtensions(e.fn.encode))}(jQuery),define("lib/jquery-encoder/jquery-encoder-0.1.0",["lib/jquery-encoder/libs/Class.create"],function(){}),define("scripts/components/common/util/jquery-encoder",["can","jquery","lib/jquery-encoder/jquery-encoder-0.1.0","scripts/components/common/util/lang"],function(e,t){var n=e.Construct.extend({encode:function(e){return t.isArray(e)?this.encodeArray(e):t.isPlainObject(e)?this.encodeObject(e):this.encodeSimpleValue(e)},doesNotRequireEncoding:function(e){return t.isBoolean(e)||t.isNumber(e)},encodeArray:function(e){var n=[],r=this;return t.each(e,function(e,t){n.push(r.encode(t))}),n},encodeObject:function(e){var n={},r=this;return t.each(e,function(e,t){n[e]=r.encode(t)}),n},encodeSimpleValue:function(e){return this.doesNotRequireEncoding(e)?e:t.encoder.encodeForHTML(e)}},{});return n}),define("scripts/anyware-widgets/base-widget/base-widget",["jquery","can","scripts/core/container/container","scripts/components/common/models/configuration-model","scripts/components/common/util/options-validator-util","scripts/components/common/util/jquery-encoder","lib/canjs/amd/can/control/plugin","can-proxy"],function(e,t,n,r,i,o){var a=t.Control.extend({pluginName:"",appId:"",defaults:{clientId:"",countryCode:"",acceptedCreditCardTypes:[],languageCode:"",landscape:"prod",marketSegment:"COM",autoLoad:!0,autoRun:!0,tunnelPath:"",debug:!1,timeout:15e3,requiredOptions:["clientId","countryCode"]}},{eventObj:{},init:function(){this.initStateFlags(),this.processOptions(),this.loadConfig()},initStateFlags:function(){this.isConfigLoaded=!1,this.isComponentRunning=!1},processOptions:function(){this.setAdditionalOptions(),this.encodeOptions(),this.checkRequiredOptions(),this.enforceOptionFormatting()},encodeOptions:function(){this.options=o.encode(this.options)},checkRequiredOptions:function(){for(var e=0;e<this.options.requiredOptions.length;e++){var t=this.options.requiredOptions[e];if(this.options[t].length<1)throw new Error("Missing Required Option: "+t)}},enforceOptionFormatting:function(){this.options.countryCode=this.options.countryCode.toUpperCase(),this.options.languageCode=this.options.languageCode.toLowerCase()},setAdditionalOptions:function(){},loadConfig:function(){var e={landscape:this.options.landscape,appId:this.constructor.appId,clientId:this.options.clientId,countryCode:this.options.countryCode,marketSegment:this.options.marketSegment,isLocal:this.options.isLocal,debug:this.options.debug};this.configurationModel=new r(e),this.configurationModel.load(this,this.proxy("onConfigLoaded"),this.proxy("onConfigError"))},onConfigLoaded:function(){var e=this.configurationModel.attr();this.isConfigLoaded=!0,this.triggerEvent("configured",{configurationData:e}),this.options=i.validateOptions(this.options,e),this.options.autoLoad&&this.load()},onConfigError:function(e){this.configErrorOccurred=!0,this.triggerEvent("errorEvent",e)},isConfigured:function(){return this.isConfigLoaded},load:function(){if(this.container)throw new Error("Load requested, but component is already loaded.");this.container=this.createContainer(),this.container.loadComponent(this.proxy("onComponentLoaded")),this.container.subscribe("**",this.proxy("globalHandler"))},loaded:function(){return this.isLoaded()},isLoaded:function(){var e=!1;return this.container&&(e=this.container.isConnected()),e},onComponentLoaded:function(){this.triggerEvent("loaded"),this.subscribeToHubEvents(),this.options.autoRun&&this.run()},createContainer:function(){var e=this.constructor.appId,t=this.element[0],r=this.configurationModel.attr("appUrl"),i=this.options.tunnelPath,o=this.options.iframeAttrs,a=this.options.timeout,s=new n(e,t,r,i,o,a);return this.setContainerListeners(),s},subscribe:function(e,t){this.eventObj[e]=this.eventObj[e]||[],this.eventObj[e].push(t)},globalHandler:function(t,n){var r=t.split("."),i=r[r.length-1];e.isArray(this.eventObj[i])?this.triggerSubscribe(i,n):this.triggerDefault(i,n)},triggerSubscribe:function(e,t){for(var n=this.eventObj[e],r=0;r<n.length;r++)"function"==typeof n[r]?n[r](e,t):this.triggerDefault(e,t)},triggerDefault:function(e,t){this.triggerEvent(e,t)},run:function(){if(this.isComponentRunning)throw new Error("Run requested, but component is already running.");this.isLoaded()&&this.initializeComponent()},isRunning:function(){return this.isComponentRunning},initializeComponent:function(){if(this.isLoaded()){var e=this.getComponentData();this.container.publish("initialize",e),this.isComponentRunning=!0}},getComponentData:function(){return{initOptions:this.options,configuration:this.configurationModel.attr()}},destroy:function(){this.isLoaded()&&this.container.unloadComponent(),t.Control.prototype.destroy.call(this)},unload:function(){this.isLoaded()&&(this.container.unloadComponent(),this.element.empty().trigger("unloaded"))},reload:function(){this.isLoaded()&&(this.container.unloadComponent(),this.container.loadComponent(this.proxy("componentReloaded")))},componentReloaded:function(){this.isComponentRunning&&(this.isComponentRunning=!1,this.run())},subscribeToHubEvents:function(){},setContainerListeners:function(){this.subscribe("formError",this.proxy("onFormError")),this.subscribe("validationError",this.proxy("onValidationError"))},onFormError:function(e,t){var n="FORM_ERROR";this.triggerEvent("errorEvent",{errorType:n,errors:t})},onValidationError:function(e,t){var n="VALIDATION_ERROR";this.triggerEvent("errorEvent",{errorType:n,errors:t})},triggerEvent:function(e,t){this.element&&this.element.trigger(e,t)},__getAppUrl:function(){return this.configurationModel.attr("appUrl")},__setAppUrl:function(e){this.configurationModel.attr("appUrl",e)}});return a}),define("tokenizer",["jquery","scripts/anyware-widgets/base-widget/base-widget","lib/canjs/amd/can/control/plugin","can-super"],function(e,t){var n=t.extend({pluginName:"anyware_payment_tokenizer",appId:"tokenizer"},{checkRequiredOptions:function(){this.options.requiredOptions.push("acceptedCreditCardTypes"),this._super()},setAddress:function(e){this.container.publish("setAddress",e)},getToken:function(){this.container.publish("getToken")},clearData:function(){this.container.publish("clearData")},subscribeToHubEvents:function(){var e=this;this.subscribe("tokenErrorReceived",function(t,n){e.onTokenErrorReceived(t,n)})},onTokenErrorReceived:function(t,n){n.errorType="TOKENIZATION_ERROR",e(this.element).trigger("errorEvent",n)}});return n}),define("can/util/string/deparam",["can/util/library","can/util/string"],function(e){var t=/^\d+$/,n=/([^\[\]]+)|(\[\])/g,r=/([^?#]*)(#.*)?$/,i=function(e){return decodeURIComponent(e.replace(/\+/g," "))};return e.extend(e,{deparam:function(o){var a,s,u={};return o&&r.test(o)&&(a=o.split("&"),e.each(a,function(e){var r=e.split("="),o=i(r.shift()),a=i(r.join("=")),c=u;if(o){r=o.match(n);for(var l=0,d=r.length-1;d>l;l++)c[r[l]]||(c[r[l]]=t.test(r[l+1])||"[]"==r[l+1]?[]:{}),c=c[r[l]];s=r.pop(),"[]"==s?c.push(a):c[s]=a}})),u}}),e}),define("scripts/components/common/util/page-util",["jquery","can","can/util/string/deparam"],function(e,t){var n={getUrlParameter:function(e){for(var t,n=window.location.search.substring(1),r=n.split("&"),i=0;i<r.length;i++)if(t=r[i].split("="),t[0]===e)return t[1]},getUrlParameters:function(){var e=window.location.search.substring(1);return t.deparam(e)},addParamToUrl:function(e,t,n){var r,i,o,a;return e.indexOf(t+"=")>=0?(r=e.substring(0,e.indexOf(t)),i=e.substring(e.indexOf(t)),i=i.substring(i.indexOf("=")+1),i=i.indexOf("&")>=0?i.substring(i.indexOf("&")):"",e=r+t+"="+n+i):(o=e.split("#"),e=o[0],a=o[1]?"#"+o[1]:"",e+=e.indexOf("?")<0?"?":"&",e+=t+"="+n,e+=a),e},removeParamFromUrl:function(e,t){var n=this.getParamIndex(e,t);if(n>-1){var r,i,o=e.substring(0,n-1),a=e.substring(n),s=a.indexOf("&"),u=a.indexOf("#");s>-1?(r=e.charAt(n-1),i=s+1):u>-1&&(r="#",i=u+1),a=i?r+a.substring(i):"",e=o+a}return e},getParamIndex:function(e,t){var n=-1,r=["?","&","#"],i=e.indexOf(t+"="),o=(e.substring(i),e.charAt(i-1)),a=r.indexOf(o);return i>-1&&a>-1&&(n=i),n}};return n}),define("checkout",["jquery","can","scripts/anyware-widgets/base-widget/base-widget","scripts/components/common/util/page-util","lib/canjs/amd/can/control/plugin","scripts/components/common/util/lang","can-proxy","can-super"],function(e,t,n,r){var i=n.extend({pluginName:"anyware_checkout",appId:"checkout",ORDER_VALIDATED_EVENT:"orderValidated",ORDER_COMPLETED_EVENT:"orderCompleted",ORDER_STATUS_CHANGE_EVENT:"orderStatusChanged",PAYMENT_METHOD_SELECTED_EVENT:"paymentMethodSelected",SIGN_OUT_REQUESTED:"signOutRequested",CANCEL_PAGE_REQUESTED:"cancelPageRequested",READY_EVENT:"ready",ERROR_ORDER_NOT_VALIDATED:"Error! : Order Not In VALIDATED State!",UNIVERSAL_APP_PATH:"/anyware/latest/universal/checkout/index.html",UNIVERSAL_APP_PATH_LOCAL:"/app/universal/checkout/index.html",ORDER_STATUS_VALIDATED:"VALIDATED"},{order:{},setAdditionalOptions:function(){var t,n;e.isValue(this.options.payPalReturnUrl)||(this.options.payPalReturnUrl=window.location.href),e.isValue(this.options.cartId)||(t=r.getUrlParameter("cartId"),e.isValue(t)&&(this.options.cartId=t)),n=r.getUrlParameter("paypal"),e.isValue(n)&&(this.options.paypal=n)},orderValid:function(){return void 0!==this.order&&this.order.status===this.constructor.ORDER_STATUS_VALIDATED},validateOrder:function(){this.orderValid()?this.orderValidated({},{order:this.order}):this.container.publish("validateOrder")},placeOrder:function(){if(!this.orderValid())throw new Error(this.constructor.ERROR_ORDER_NOT_VALIDATED);this.container.publish("placeOrder")},requiresRedirect:function(){var e=this.configurationModel.attr();return!!e.redirectRequired},getRedirectUrl:function(){return this.redirectUrl},setItems:function(e){this.options.items=e,this.options.cartId=null,this.isComponentRunning&&this.reload()},updatePayPalReturnUrl:function(e){this.options.payPalReturnUrl=e||window.location.href},subscribeToHubEvents:function(){this.subscribe("orderStatusChange",this.proxy("orderStatusChange")),this.subscribe("orderValidated",this.proxy("orderValidated")),this.subscribe("orderCompleted",this.proxy("orderCompleted")),this.subscribe("paymentMethodSelected",this.proxy("paymentMethodSelected")),this.subscribe("uiReady",this.proxy("uiReady")),this.subscribe("payPalFlowRequested",this.proxy("payPalFlowRequested")),this.subscribe("signOutRequested",this.proxy("signOutRequested")),this.subscribe("cancelPageRequested",this.proxy("cancelPageRequested"))},orderStatusChange:function(e,t){this.order=t.order,this.triggerEvent(this.constructor.ORDER_STATUS_CHANGE_EVENT,t)},orderValidated:function(e,t){this.order=t.order,this.triggerEvent(this.constructor.ORDER_VALIDATED_EVENT,t)},orderCompleted:function(e,t){this.order=t.order,this.triggerEvent(this.constructor.ORDER_COMPLETED_EVENT,t),this.unload()},paymentMethodSelected:function(e,t){this.order=t.order,this.triggerEvent(this.constructor.PAYMENT_METHOD_SELECTED_EVENT,t)},uiReady:function(e){this.triggerEvent(this.constructor.READY_EVENT)},payPalFlowRequested:function(e,t){var n=t.redirectUrl;window.location.href=n},signOutRequested:function(e,t){this.triggerEvent(this.constructor.SIGN_OUT_REQUESTED,t)},cancelPageRequested:function(e,t){this.triggerEvent(this.constructor.CANCEL_PAGE_REQUESTED,t)},onConfigLoaded:function(){this.checkForRedirect(),this._super(),this.checkForPendingUniversalRequest()},load:function(){this.isEmbedded()?this._super():!this.isUniversalMode()&&this.options.autoRun&&this.run()},run:function(){this.requiresRedirect()?this.performRedirect():this._super()},isEmbedded:function(){return!this.requiresRedirect()&&!this.isUniversalMode()},checkForRedirect:function(){this.requiresRedirect()&&this.setRedirectUrl()},setRedirectUrl:function(){this.redirectOptions={marketSegment:this.getRedirectMarketSegment(),languageCode:this.getRedirectLanguageCode()};var e=this.configurationModel.attr(),t=e.redirectUrl,n=this.parseRedirectUrl(t);this.redirectUrl=this.processRedirectUrl(n)},parseRedirectUrl:function(t){if(e.isString(t))return t;for(var n in t)return this.parseRedirectUrl(t[n][this.redirectOptions[n]])},processRedirectUrl:function(e){var t=this.configurationModel.attr(),n=t.redirectVendor,r=this.options.items,i=e;if("DIGITAL_RIVER"===n){if(!r||1!==r.length)throw new Error("Item Not Found or More than One Item Found");var o=r[0].productKey;i=e.replace("<product_key>",o)}return i},getRedirectMarketSegment:function(){return this.options.marketSegment},getRedirectLanguageCode:function(){var e=this.configurationModel.attr(),t=this.options.languageCode,n=e.supportedLanguages,r=e.defaultLanguage;return this.isSupportedLanguage(t,n)||(t=r),t},isSupportedLanguage:function(n,r){var i=t.makeArray(r);return e.inArray(n,i)>-1},performRedirect:function(){var e=this.getRedirectUrl();this.options.autoRedirect?this.redirectToUrl(e):this.triggerEvent("redirectToCheckout",e)},redirectToUrl:function(e){window.location=e},isUniversalMode:function(){return!!this.options.universalMode},startUniversalCheckout:function(e){this.configErrorOccurred||(this.isConfigured()?this.performUniversalRedirect(e):this.savePendingUniversalRequest(e))},performUniversalRedirect:function(e){var t;this.requiresRedirect()?this.performRedirect():(t=this.assembleUniversalUrl(e),this.redirectToUrl(t))},checkForPendingUniversalRequest:function(){e.isValue(this.pendingUniversalRequest)&&this.startUniversalCheckout(this.pendingUniversalRequest.options)},savePendingUniversalRequest:function(e){this.pendingUniversalRequest={options:e}},assembleUniversalUrl:function(e){var t=this.getUrlParams(e),n=this.getBaseUrl()+this.getAppPath()+"?"+t;return n},getUrlParams:function(t){var n=this.getUniversalParams(t),r=["debug","autoLoad","autoRun","requiredOptions","autoRedirect","payPalReturnUrl","paypal","tunnelPath"];e.isValue(n.debug)&&n.debug&&(n.compress=!1);for(var i=0;i<r.length;i++){var o=r[i];e.isValue(n[o])&&delete n[o]}return e.param(n)},getUniversalParams:function(t){var n=e.extend(!0,{},this.options,t),r=this.getRedirectLanguageCode();return n.languageCode=r,n},getBaseUrl:function(){var e="",t=this.configurationModel.attr();return this.options.isLocal||(e=t.baseUrl[this.options.landscape]),e},getAppPath:function(){return this.options.isLocal?this.constructor.UNIVERSAL_APP_PATH_LOCAL:this.constructor.UNIVERSAL_APP_PATH}});return i}),define("scripts/anyware-widgets/price-display/price-display-controller",["jquery","can","scripts/anyware-widgets/base-widget/base-widget"],function(e,t,n){var r=n.extend({pluginName:"price_display_controller",appId:"priceDisplay",requiredOptions:[]},{getPrices:function(e){this.container.publish("getPrices",e)}});return r}),define("price-display",["jquery","can","scripts/anyware-widgets/price-display/price-display-controller","lib/canjs/amd/can/control/plugin","can-super","can-proxy"],function(e,t,n){var r=t.Control.extend({pluginName:"anyware_price_display",appId:"priceDisplay",defaults:{styles:{PRICE_TYPE_LABEL:"",FORMATTED_PRICE_CONTAINER:"",SUBSCRIPTION_TERM_LABEL:"",TAX_LABEL:"",ORIGINAL_PRICE:"EcommPrice_originalPrice",CURRENCY_SYMBOL:"cart-price-currency-symbol",INTEGER_PRICE_VALUE:"cart-price-dollar",DECIMAL_PRICE_VALUE:"cart-price-cent",INT_DELIMITER:"cart-price-integer-delimiter",DECIMAL_DELIMITER:"cart-price-decimal-delimiter",PRICE_STYLE:"CartCostWeak"}},widgetCount:0,numberOfWidgets:0,widgetsByMarketSegment:{COM:[],EDU:[]},mainControl:null,onConfigured:function(e,t){},onApplicationReady:function(e,t){var n=this.getPriceData();n.options=this.options,this.mainControl.getPrices(n)},onPriceLabelsReady:function(e,t){for(var n=this.widgetsByMarketSegment[t.marketSegment],r=t.priceLabelDivs,i=0;i<n.length;i++)n[i].element.append(r[i])},registerWidget:function(t,n){var r,i;this.numberOfWidgets||(this.numberOfWidgets=e(n).length),i=t.element.data().marketSegment||"COM",this.widgetsByMarketSegment[i.toUpperCase()].push(t),this.widgetCount++,this.mainControl||this.widgetCount!==this.numberOfWidgets||(r=t.options,this.createMainControl(r))},getPriceData:function(){var t,n,r={COM:[],EDU:[]},i=this;return e.each(this.widgetsByMarketSegment,function(o,a){for(var s=0;s<a.length;s++){var u=a[s];n=u.options,t=i.getWidgetData(u),r[o].push(e.extend(!0,{},n,t))}}),r},getWidgetData:function(t){var n=e.extend(!0,{},t.element.data());return n.controls=null,n},createMainControl:function(t){var r=e('<div id="price-display-controller" style="height:0px;width:0px"></div>');e("body").append(r),r.on("configured",e.proxy(this,"onConfigured")),r.on("applicationReady",e.proxy(this,"onApplicationReady")),r.on("priceLabelsReady",e.proxy(this,"onPriceLabelsReady")),this.mainControl=new n(r,t)},destroyMainController:function(){e("#price-display-controller").remove(),this.mainControl=null},unregisterWidget:function(e){var t=e.element.data().marketSegment||"COM",n=this.widgetsByMarketSegment[t.toUpperCase()];this.widgetCount--,this.numberOfWidgets--,n.splice(n.indexOf(e),1),0===this.numberOfWidgets&&this.destroyMainController()}},{init:function(){this.constructor.registerWidget(this,this.options.selector)},destroy:function(){this.constructor.unregisterWidget(this),this._super()}});return r}),define("live-person-chat",["jquery","scripts/anyware-widgets/base-widget/base-widget","lib/canjs/amd/can/control/plugin","can-super"],function(e,t){var n=t.extend({pluginName:"anyware_live_person_chat",appId:"lpchat",IFRAME_ANIMATION_TIME:400},{setAdditionalOptions:function(){this.options.iframeAttrs={style:{width:"450px",height:"400px",display:"none"}}},chatEventHandler:function(e){try{this.container.publish("chatEventHandler",e)}catch(t){}},subscribeToHubEvents:function(){this.subscribe("iframeDisplay",this.proxy("onIframeDisplay"))},onIframeDisplay:function(t,n){var r=e(".anyware-iframe");n.display?r.show(this.constructor.IFRAME_ANIMATION_TIME):r.hide(this.constructor.IFRAME_ANIMATION_TIME)}});return n}),require(["jquery","price-generator","product-configurator","tokenizer","checkout","price-display","live-person-chat"],function(e,t){e.createNs("Adobe.Anyware"),Adobe.Anyware.PriceGenerator=t,e(document).trigger("anywareReady")}),define("scripts/anyware-widgets/anyware-widgets",function(){})}();
